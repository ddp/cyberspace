<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="4. The Self World" href="selfwrld.html" /><link rel="prev" title="2. Building the Self system" href="build.html" />

    <!-- Generated with Sphinx 8.0.2 and Furo 2024.08.06 -->
        <title>3. Language Reference - Self Handbook 2024.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments%EF%B9%96v=a746c00c.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo%EF%B9%96v=354aac6f.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions%EF%B9%96v=302659d7.css" />
    
    


<style>body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Self Handbook 2024.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Self Handbook 2024.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">2. Building the Self system</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">3. Language Reference</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="selfwrld.html">4. The Self World</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 4. The Self World</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="worldorg.html">4.1. World Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="roots.html">4.2. The Roots of Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="blocks.html">4.3. Blocks, Booleans, and Control Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="numbers.html">4.4. Numbers and Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="collections.html">4.5. Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="pairs.html">4.6. Pairs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mirrors.html">4.7. Mirrors</a></li>
<li class="toctree-l2"><a class="reference internal" href="messages.html">4.8. Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="processes.html">4.9. Processes and Concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="foreign.html">4.10. Foreign Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix.html">4.11. I/O and Unix</a></li>
<li class="toctree-l2"><a class="reference internal" href="oddball.html">4.12. Other Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="lowlevel.html">4.13. How to use the low-level interrupt facilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="textdebug.html">4.14. Using the textual debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">4.15. Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="progguid.html">5. A Guide to Programming Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="howtoprg.html">6. How to Program in Self</a></li>
<li class="toctree-l1"><a class="reference internal" href="morphic.html">7. Morphic: The Self User Interface Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="vmref.html">8. Virtual Machine Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="ref.html">9. References</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="appendices.html">10. Appendices</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 10. Appendices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">10.1. Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="lexicaloverview.html">10.2. Lexical overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntaxoverview.html">10.3. Syntax overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="builtintypes.html">10.4. Built-in types</a></li>
<li class="toctree-l2"><a class="reference internal" href="usefulselectors.html">10.5. Useful Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="menus.html">10.6. Every Menu Item in the Programming Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitor.html">10.7. The system monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="primitives.html">10.8. Primitives</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="extras.html">11. Extras</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 11. Extras</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ui1.html">11.1. The Original Self UI</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/langref.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="language-reference">
<span id="langref"></span><span id="pp-langref"></span><h1><span class="section-number">3. </span>Language Reference<a class="headerlink" href="#language-reference" title="Link to this heading">¶</a></h1>
<p>This chapter specifies Self’s syntax and semantics. An early version of the syntax was presented
in the original Self paper by Ungar and Smith <a class="reference internal" href="ref.html#citations"><span class="std std-ref">[US87]</span></a> ; this chapter incorporates subsequent
changes to the language. The presentation assumes a basic understanding of object-oriented concepts.</p>
<p>The syntax is described using Extended Backus-Naur Form (EBNF). Terminal symbols appear in
Courier and are enclosed in single quotes; they should appear in code as written (not including
the single quotes). Non-terminal symbols are italicized. The following table describes the metasymbols:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>META-SYMBOL</p></td>
<td><p>FUNCTION</p></td>
<td><p>DESCRIPTION</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">(</span></code> and <code class="docutils literal notranslate"><span class="pre">)</span></code></p></td>
<td><p>grouping</p></td>
<td><p>used to group syntactic constructions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[</span></code> and <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td><p>option</p></td>
<td><p>encloses an optional construction</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">}</span></code></p></td>
<td><p>repetition</p></td>
<td><p>encloses a construction that may be repeated zero or more times</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">\</span></code></p></td>
<td><p>alternative</p></td>
<td><p>separates alternative constructions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">→</span></code></p></td>
<td><p>production</p></td>
<td><p>separates the left and right hand sides of a production</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>A glossary of terms used in this document can be found in <a class="reference internal" href="glossary.html"><span class="doc">Appendix A</span></a>.</p>
<section id="objects">
<span id="index-2"></span><span id="index-1"></span><span id="index-0"></span><h2><span class="section-number">3.1. </span>Objects<a class="headerlink" href="#objects" title="Link to this heading">¶</a></h2>
<p><em>Objects</em> are the fundamental entities in Self; every entity in a Self program is represented by one
or more objects. Even control is handled by objects: <em>blocks</em> (<a class="reference internal" href="#pp-langref-blocks"><span class="std std-ref">Blocks</span></a>) are Self closures used to implement
user-defined control structures. An object is composed of a (possibly empty) set of <em>slots</em>
and, optionally, <em>code</em> (<a class="reference internal" href="#pp-langref-code"><span class="std std-ref">Code</span></a>). A slot is a name-value pair; slots contain references to other objects.
When a slot is found during a <em>message lookup</em> (<a class="reference internal" href="#pp-langref-message-lookup"><span class="std std-ref">Message lookup semantics</span></a>) the object in the slot is evaluated.</p>
<p>Although everything is an object in Self, not all objects serve the same purpose; certain kinds of
objects occur frequently enough in specialized roles to merit distinct terminology and syntax. This
chapter introduces two kinds of objects, namely data objects (“plain” objects) and the two kinds of
objects with code, ordinary methods and block methods.</p>
<section id="syntax">
<span id="index-3"></span><h3><span class="section-number">3.1.1. </span>Syntax<a class="headerlink" href="#syntax" title="Link to this heading">¶</a></h3>
<p><em>Object literals</em> are delimited by parentheses. Within the parentheses, an object description consists
of a list of slots delimited by vertical bars (‘<code class="docutils literal notranslate"><span class="pre">|</span></code>’), followed by the code to be executed when the object
is evaluated. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>( | slot1. slot2 | ’here is some code’ printLine )
</pre></div>
</div>
<p>Both the slot list and code are optional: ‘<code class="docutils literal notranslate"><span class="pre">(|</span> <span class="pre">|)</span></code>’ and ‘<code class="docutils literal notranslate"><span class="pre">()</span></code>’ each denote an empty object <a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p><em>Block objects</em> are written like other objects, except that square brackets (‘<code class="docutils literal notranslate"><span class="pre">[</span></code>’ and ‘<code class="docutils literal notranslate"><span class="pre">]</span></code>’) are used in
place of parentheses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[ | slot1. slot2 | ’here is some code in a block’ printLine ]
</pre></div>
</div>
<p>A <em>slot list</em> consists of a (possibly empty) sequence of <em>slot descriptors</em> (<a class="reference internal" href="#pp-langref-slot-descriptors"><span class="std std-ref">Slot descriptors</span></a>) separated by periods.
A period at the end of the slot list is optional <a class="footnote-reference brackets" href="#f2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.</p>
<p>The code for an object is a sequence of <em>expressions</em> (<a class="reference internal" href="#pp-langref-expressions"><span class="std std-ref">Expressions</span></a>) separated by periods. A trailing period
is optional. Each expression consists of a series of <em>message sends</em> and <em>literals</em>. The last expression
in the code for an object may be preceded by the ‘<code class="docutils literal notranslate"><span class="pre">^</span></code>’ operator (<a class="reference internal" href="#pp-langref-returns"><span class="std std-ref">Returns</span></a>).</p>
</section>
<section id="data-objects">
<span id="index-5"></span><span id="index-4"></span><h3><span class="section-number">3.1.2. </span>Data objects<a class="headerlink" href="#data-objects" title="Link to this heading">¶</a></h3>
<p><em>Data objects</em> are objects without code. Data objects can have any number of slots. For example, the
object <code class="docutils literal notranslate"><span class="pre">()</span></code> has no slots (i.e., it’s empty) while the object <code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">|</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">17.</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">18</span> <span class="pre">|</span> <span class="pre">)</span></code> has two slots,
<code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/Chapter_2_Image_1.png"><img alt="_images/Chapter_2_Image_1.png" src="_images/Chapter_2_Image_1.png" style="width: 385.6px; height: 87.2px;" />
</a>
</figure>
<p>A data object returns itself when evaluated.</p>
</section>
<section id="the-assignment-primitive">
<span id="index-10"></span><span id="index-9"></span><span id="index-8"></span><span id="index-7"></span><span id="index-6"></span><h3><span class="section-number">3.1.3. </span>The assignment primitive<a class="headerlink" href="#the-assignment-primitive" title="Link to this heading">¶</a></h3>
<p>A slot containing the assignment primitive is called an <em>assignment slot</em> (<a class="reference internal" href="#pp-read-write-slots"><span class="std std-ref">Read/write slots</span></a>). When an assignment
slot is evaluated, the argument to the message is stored in the corresponding <em>data slot</em> (<a class="reference internal" href="#pp-langref-slot-descriptors"><span class="std std-ref">Slot descriptors</span></a>)
in the same object (the slot whose name is the assignment slot’s name minus the trailing colon),
and the <em>receiver</em> (<a class="reference internal" href="#pp-implicit-receiver"><span class="std std-ref">Implicit-receiver messages</span></a>) is returned as the result. (Note: this means that the value of an assignment
statement is the left-hand side of the assignment statement, not the right-hand side as it is in Smalltalk,
C, and many other languages. This is a potential source of confusion for new Self programmers.)</p>
</section>
<section id="objects-with-code">
<span id="index-18"></span><span id="index-17"></span><span id="index-16"></span><span id="index-15"></span><span id="index-14"></span><span id="index-13"></span><span id="index-12"></span><span id="index-11"></span><h3><span class="section-number">3.1.4. </span>Objects with code<a class="headerlink" href="#objects-with-code" title="Link to this heading">¶</a></h3>
<p>The feature that distinguishes a <em>method object</em> from a data object is that it has <em>code</em>, whereas a data
object does not. Evaluating a method object does not simply return the object itself, as with simple
data objects; rather, its code is executed and the resulting value is returned.</p>
</section>
<section id="code">
<span id="pp-langref-code"></span><h3><span class="section-number">3.1.5. </span>Code<a class="headerlink" href="#code" title="Link to this heading">¶</a></h3>
<p><em>Code</em> is a sequence of <em>expressions</em> (<a class="reference internal" href="#pp-langref-expressions"><span class="std std-ref">Expressions</span></a>). These expressions are evaluated in order, and the resulting
values are discarded except for that of the final expression, whose value determines the result
of evaluating the code.</p>
<p>The actual arguments in a message send are evaluated from left to right before the message is sent.
For instance, in the expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">to</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">i</span> <span class="n">By</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">j</span> <span class="n">Do</span><span class="p">:</span> <span class="p">[</span><span class="o">|</span> <span class="p">:</span><span class="n">k</span> <span class="o">|</span> <span class="n">k</span> <span class="nb">print</span> <span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">1</span></code> is evaluated first, then <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">*</span> <span class="pre">i</span></code>, then <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">j</span></code>, and then <code class="docutils literal notranslate"><span class="pre">[|</span> <span class="pre">:k</span> <span class="pre">|</span> <span class="pre">k</span> <span class="pre">print]</span></code>. Finally, the <code class="docutils literal notranslate"><span class="pre">to:By:Do:</span></code>
message is sent. The associativity and precedence of messages is discussed in section <a class="reference internal" href="#langref-expressions"><span class="std std-ref">Expressions</span></a>.</p>
</section>
<section id="methods">
<span id="pp-methods"></span><span id="index-19"></span><h3><span class="section-number">3.1.6. </span>Methods<a class="headerlink" href="#methods" title="Link to this heading">¶</a></h3>
<p><em>Ordinary methods</em> (or simply “methods”) are methods that are not embedded in other code. A
method can have <em>argument slots</em> (<a class="reference internal" href="#pp-argument-slots"><span class="std std-ref">Slots containing methods</span></a>) and/or local slots. An ordinary method always has an implicit
<em>parent</em> (<a class="reference internal" href="#pp-parent-slots"><span class="std std-ref">Parent slots</span></a>) argument slot named <code class="docutils literal notranslate"><span class="pre">self</span></code>. Ordinary methods are Self’s equivalent of
Smalltalk’s methods.</p>
<p>If a slot contains a method, the following steps are performed when the slot is evaluated as the result
of a message send:</p>
<blockquote>
<div><ul class="simple">
<li><p>The method object is <em>cloned</em>, creating a new <em>method activation object</em> containing slots for the method’s arguments and locals.</p></li>
<li><p>The clone’s self parent slot is initialized to the receiver of the message.</p></li>
<li><p>The clone’s argument slots, if any, are initialized to the values of the corresponding actual arguments.</p></li>
<li><p>The code of the method is executed in the context of this new activation object.</p></li>
</ul>
</div></blockquote>
<p>For example, consider the method <code class="docutils literal notranslate"><span class="pre">(|</span> <span class="pre">:arg</span> <span class="pre">|</span> <span class="pre">arg</span> <span class="pre">*</span> <span class="pre">arg</span> <span class="pre">)</span></code>:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/Chapter_2_Image_2.png"><img alt="_images/Chapter_2_Image_2.png" src="_images/Chapter_2_Image_2.png" style="width: 392.8px; height: 138.4px;" />
</a>
</figure>
<p>This method has an argument slot <code class="docutils literal notranslate"><span class="pre">arg</span></code> and returns the square of its argument.</p>
</section>
<section id="blocks">
<span id="pp-langref-blocks"></span><span id="index-26"></span><span id="index-25"></span><span id="index-24"></span><span id="index-23"></span><span id="index-22"></span><span id="index-21"></span><span id="index-20"></span><h3><span class="section-number">3.1.7. </span>Blocks<a class="headerlink" href="#blocks" title="Link to this heading">¶</a></h3>
<p><em>Blocks</em> are Self closures; they are used to implement user-defined control structures. A block literal
(delimited by square brackets) defines two objects: the <em>block method object</em>, containing the
block’s code, and an enclosing <em>block data object</em>. The block data object contains a parent pointer
(pointing to the object containing the shared behavior for block objects) and a slot containing the
block method object. Unlike an ordinary method object, the block method object does not contain
a self slot. Instead, it has an anonymous parent slot that is initialized to point to the activation object
for the lexically enclosing block or method. As a result, <em>implicit-receiver messages</em> (<a class="reference internal" href="#pp-implicit-receiver"><span class="std std-ref">Implicit-receiver messages</span></a>)
sent within a block method are lexically scoped. The block method object’s anonymous parent slot
is invisible at the Self level and cannot be accessed explicitly.</p>
<p>For example, the block <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">3</span> <span class="pre">+</span> <span class="pre">4</span> <span class="pre">]</span></code> looks like <a class="footnote-reference brackets" href="#f3" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/Chapter_2_Image_3.png"><img alt="_images/Chapter_2_Image_3.png" src="_images/Chapter_2_Image_3.png" style="width: 563.2px; height: 256.0px;" />
</a>
</figure>
<p>The block method’s selector is based on the number of arguments. If the block takes no arguments,
the selector is <code class="docutils literal notranslate"><span class="pre">value</span></code>. If it takes one argument, the selector is <code class="docutils literal notranslate"><span class="pre">value:</span></code>. If it takes two arguments,
the selector is <code class="docutils literal notranslate"><span class="pre">value:With:</span></code>, for three the selector is <code class="docutils literal notranslate"><span class="pre">value:With:With:</span></code>, and for more the selector
is just extended by enough <code class="docutils literal notranslate"><span class="pre">With:’s</span></code> to match the number of block arguments.</p>
<p>Block evaluation has two phases. In the first phase, a block object is created because the block is
evaluated (e.g., it is used as an argument to a message send). The block is cloned and given a
pointer to the activation record for its lexically enclosing scope, the current activation record. In the
second phase, the block’s method is evaluated as a result of sending the block the appropriate variant
of the <code class="docutils literal notranslate"><span class="pre">value</span></code> message. The block method is then cloned, the argument slots of the clone are
filled in, the anonymous parent slot of the clone is initialized using the scope pointer determined in
phase one, and, finally, the block’s code is executed.</p>
<p>It is an error to evaluate a block method after the activation record for its lexically enclosing scope
has returned. Such a block is called a <em>non-lifo</em> block because returning from it would violate the
last-in, first-out semantics of activation object invocation.</p>
<p>This restriction is made primarily to allow activation records to be allocated from a stack. A future
release of Self may relax this restriction, at least for blocks that do not access variables in
enclosing scopes.</p>
</section>
<section id="returns">
<span id="pp-langref-returns"></span><span id="index-27"></span><h3><span class="section-number">3.1.8. </span>Returns<a class="headerlink" href="#returns" title="Link to this heading">¶</a></h3>
<p>A <em>return</em> is denoted by preceding an expression by the ‘<code class="docutils literal notranslate"><span class="pre">^</span></code>’ operator. A return causes the value of the given expression to be returned as the result of evaluating the method or block. Only the last ex­pression in an object may be a return.</p>
<p>The presence or absence of the ‘<code class="docutils literal notranslate"><span class="pre">^</span></code>’ operator does not effect the behavior of ordinary methods, since an ordinary method always returns the value of its final expression anyway. In a block, however, a return causes control to be returned from the ordinary method containing that block, immediately terminating that method’s activation, the block’s activation, and all activations in between. Such a return is called a <em>non-local return</em>, since it may “return through” a number of activations. The result of the ordinary method’s evaluation is the value returned by the <em>non-local return</em>. For example, in the following method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>assertPositive: x = (
                x &gt; 0 ifTrue: [ ^ ’ok’ ].
                error: ’non-positive x’ )
</pre></div>
</div>
<p>the <code class="docutils literal notranslate"><span class="pre">error:</span></code> message will not be sent if <code class="docutils literal notranslate"><span class="pre">x</span></code> is positive because the non-local return of <code class="docutils literal notranslate"><span class="pre">’ok’</span></code> causes the <code class="docutils literal notranslate"><span class="pre">assertPositive:</span></code> method to return immediately.</p>
</section>
<section id="construction-of-object-literals">
<span id="index-28"></span><h3><span class="section-number">3.1.9. </span>Construction of object literals<a class="headerlink" href="#construction-of-object-literals" title="Link to this heading">¶</a></h3>
<p>Object literals are constructed during parsing — the parser converts objects in textual form into real Self objects.
An object literal is constructed as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>First, the slot initializers of every slot are evaluated from left to right. If a slot initializer contains
another object literal, this literal is constructed before the initializer containing it is evaluated.
If the initializer is an expression, it is evaluated in the context of the lobby.</p></li>
<li><p>Second, the object is created, and its slots are initialized with the results of the evaluations performed
in the first step.</p></li>
</ul>
</div></blockquote>
<p>Slot initializers are <em>not</em> evaluated in the lexical context, since none exists at parse time; they are evaluated
in the context of an object known as the <code class="docutils literal notranslate"><span class="pre">lobby</span></code>. That is, the initializers are evaluated as if they were the code
of a method in a slot of the <code class="docutils literal notranslate"><span class="pre">lobby</span></code>. This two-phase object construction pro­cess implies that slot initializers may
not refer to any other slots within the constructed object (as with Scheme’s <code class="docutils literal notranslate"><span class="pre">let*</span></code> and <code class="docutils literal notranslate"><span class="pre">letrec</span></code> forms) and, more generally,
that a slot initializer may not refer to any textually enclosing object literal.</p>
</section>
</section>
<section id="slot-descriptors">
<span id="pp-langref-slot-descriptors"></span><span id="index-33"></span><span id="index-32"></span><span id="index-31"></span><span id="index-30"></span><span id="index-29"></span><h2><span class="section-number">3.2. </span>Slot descriptors<a class="headerlink" href="#slot-descriptors" title="Link to this heading">¶</a></h2>
<p>An object can have any number of slots. Slots can contain data (<em>data slots</em>) or methods. Some slots have special roles: <em>argument slots</em> are filled in with the actual arguments during a message (<a class="reference internal" href="#pp-mesage-send"><span class="std std-ref">Message send</span></a>), and <em>parent slots</em> specify inheritance relationships (<a class="reference internal" href="#pp-lookup-algorithm"><span class="std std-ref">The lookup algorithm</span></a>).</p>
<p>A <em>slot descriptor</em> consists of an optional privacy specification, followed by the slot name and an optional initializer.</p>
<section id="read-only-slots">
<h3><span class="section-number">3.2.1. </span>Read-only slots<a class="headerlink" href="#read-only-slots" title="Link to this heading">¶</a></h3>
<p>A slot name followed by an equals sign (‘<code class="docutils literal notranslate"><span class="pre">=</span></code>’) and an expression represents a <em>read-only slot</em> initialized to the result of evaluating the expression in the root context.</p>
<p>For example, a constant point might be defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="o">|</span>   <span class="n">parent</span><span class="o">*</span> <span class="o">=</span> <span class="n">traits</span> <span class="n">point</span><span class="o">.</span>
      <span class="n">x</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="mf">4.</span>
      <span class="n">y</span> <span class="o">=</span> <span class="mf">5.</span>
<span class="o">|</span> <span class="p">)</span>
</pre></div>
</div>
<p>The resulting point contains three initialized read-only slots:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/Chapter_2_Image_4.png"><img alt="_images/Chapter_2_Image_4.png" src="_images/Chapter_2_Image_4.png" style="width: 320.8px; height: 173.60000000000002px;" />
</a>
</figure>
</section>
<section id="read-write-slots">
<span id="pp-read-write-slots"></span><span id="index-37"></span><span id="index-36"></span><span id="index-35"></span><span id="index-34"></span><h3><span class="section-number">3.2.2. </span>Read/write slots<a class="headerlink" href="#read-write-slots" title="Link to this heading">¶</a></h3>
<p>There is no separate assignment operation in Self. Instead, assignments to data slots are message sends that invoke the assignment primitive. For example, a data slot <code class="docutils literal notranslate"><span class="pre">x</span></code> is assignable if and only if there is a slot in the same object with the same name appended with a colon (in this case, <code class="docutils literal notranslate"><span class="pre">x:</span></code>), containing the assignment primitive. Therefore, assigning <code class="docutils literal notranslate"><span class="pre">17</span></code> to slot <code class="docutils literal notranslate"><span class="pre">x</span></code> consists of sending the message <code class="docutils literal notranslate"><span class="pre">x:</span> <span class="pre">17</span></code>. Since this is indistinguishable from a message send that invokes a method, clients do not need to know if <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">x:</span></code> comprise data slot accesses or method invocations.</p>
<p>An identifier followed by a left arrow (the characters ‘<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>’ and ‘<code class="docutils literal notranslate"><span class="pre">-</span></code>’ concatenated to form ‘<code class="docutils literal notranslate"><span class="pre">&lt;-</span></code>’) and an expression represents an initialized <em>read/write variable</em> (assignable data slot). The object will contain both a data slot of that name and a corresponding assignment slot whose name is obtained by appending a colon to the data slot name. The initializing expression is evaluated in the root context and the result stored into the data slot at parse time.</p>
<p>For example, an initialized mutable point might be defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="o">|</span>   <span class="n">parent</span><span class="o">*</span> <span class="o">=</span> <span class="n">traits</span> <span class="n">point</span><span class="o">.</span>
      <span class="n">x</span> <span class="o">&lt;-</span> <span class="mi">3</span> <span class="o">+</span> <span class="mf">4.</span>
      <span class="n">y</span> <span class="o">&lt;-</span> <span class="mf">5.</span>
<span class="o">|</span> <span class="p">)</span>
</pre></div>
</div>
<p>producing an object with two data slots (<code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>) and two assignment slots (<code class="docutils literal notranslate"><span class="pre">x:</span></code> and <code class="docutils literal notranslate"><span class="pre">y:</span></code>) containing the assignment primitive (depicted with <code class="docutils literal notranslate"><span class="pre">←</span></code>) <a class="footnote-reference brackets" href="#f4" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/Chapter_2_Image_5.png"><img alt="_images/Chapter_2_Image_5.png" src="_images/Chapter_2_Image_5.png" style="width: 342.40000000000003px; height: 235.20000000000002px;" />
</a>
</figure>
<p>An identifier by itself specifies an assignable data slot initialized to <em>nil</em> <a class="footnote-reference brackets" href="#f5" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>. Thus, the slot declaration <code class="docutils literal notranslate"><span class="pre">x</span></code> is a shorthand notation for <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;-</span> <span class="pre">nil</span></code>.</p>
<p>For example, a simple mutable point might be defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="o">|</span> <span class="n">x</span><span class="o">.</span> <span class="n">y</span><span class="o">.</span> <span class="o">|</span> <span class="p">)</span>
</pre></div>
</div>
<p>producing:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/Chapter_2_Image_6.png"><img alt="_images/Chapter_2_Image_6.png" src="_images/Chapter_2_Image_6.png" style="width: 399.20000000000005px; height: 158.4px;" />
</a>
</figure>
</section>
<section id="slots-containing-methods">
<span id="pp-argument-slots"></span><span id="index-39"></span><span id="index-38"></span><h3><span class="section-number">3.2.3. </span>Slots containing methods<a class="headerlink" href="#slots-containing-methods" title="Link to this heading">¶</a></h3>
<p>If the initializing expression is an object literal with code, that object is stored into the slot <em>without evaluating the code</em>. This allows a slot to be initialized to a method by storing the method itself, rather than its result, in the slot <a class="footnote-reference brackets" href="#f6" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a>. Methods may only be stored in read-only slots. A method automatically receives a parent argument slot named <code class="docutils literal notranslate"><span class="pre">self</span></code>. For example, a point addition method can be written as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="o">|</span>
      <span class="o">+</span> <span class="o">=</span> <span class="p">(</span> <span class="o">|</span> <span class="p">:</span><span class="n">arg</span> <span class="o">|</span> <span class="p">(</span><span class="n">clone</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">arg</span> <span class="n">x</span><span class="p">)</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span> <span class="o">+</span> <span class="n">arg</span> <span class="n">y</span> <span class="p">)</span><span class="o">.</span>
<span class="o">|</span> <span class="p">)</span>
</pre></div>
</div>
<p>producing:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/Chapter_2_Image_7.png"><img alt="_images/Chapter_2_Image_7.png" src="_images/Chapter_2_Image_7.png" style="width: 522.4px; height: 154.4px;" />
</a>
</figure>
<p>A slot name beginning with a colon indicates an <em>argument</em> slot. The prefixed colon is not part of the slot name and is ignored when matching the name against a message. Argument slots are always read-only, and no initializer may be specified for them. As a syntactic convenience, the argument name may also be written immediately after the slot name (without the prefixed colon), thereby implicitly declaring the argument slot. Thus, the following yields exactly the same object as above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="o">|</span>
      <span class="o">+</span> <span class="n">arg</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span><span class="n">clone</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">arg</span> <span class="n">x</span><span class="p">)</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span> <span class="o">+</span> <span class="n">arg</span> <span class="n">y</span> <span class="p">)</span><span class="o">.</span>
<span class="o">|</span> <span class="p">)</span>
</pre></div>
</div>
<p>The + slot above is a <em>binary slot</em> (<a class="reference internal" href="#pp-binary-messages"><span class="std std-ref">Binary messages</span></a>), taking one argument and having a name that consists of operator symbols. Slots like x or y in a point object are <em>unary slots</em> (<a class="reference internal" href="#pp-unary-messages"><span class="std std-ref">Unary messages</span></a>), which take no arguments and have simple identifiers for names. In addition, there are <em>keyword slots</em> (<a class="reference internal" href="#pp-keyword-messages"><span class="std std-ref">Keyword messages</span></a>), which handle messages that require one or more arguments. A keyword slot name is a sequence of identifiers, each followed by a colon.</p>
<p>The arguments in keyword methods are handled analogously to those in binary methods: each colon-terminated identifier in a keyword slot name requires a corresponding argument slot in the keyword method object, and the argument slots may be specified either all in the method or all interspersed with the selector parts.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="o">|</span>
      <span class="n">ifTrue</span><span class="p">:</span> <span class="kc">False</span><span class="p">:</span> <span class="o">=</span> <span class="p">(</span> <span class="o">|</span> <span class="p">:</span><span class="n">trueBlock</span><span class="o">.</span> <span class="p">:</span><span class="n">falseBlock</span> <span class="o">|</span>
              <span class="n">trueBlock</span> <span class="n">value</span> <span class="p">)</span><span class="o">.</span>
<span class="o">|</span> <span class="p">)</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="o">|</span>
      <span class="n">ifTrue</span><span class="p">:</span> <span class="n">trueBlock</span> <span class="kc">False</span><span class="p">:</span> <span class="n">falseBlock</span> <span class="o">=</span>
              <span class="p">(</span> <span class="n">trueBlock</span> <span class="n">value</span> <span class="p">)</span><span class="o">.</span>
<span class="o">|</span> <span class="p">)</span>
</pre></div>
</div>
<p>produce identical objects.</p>
</section>
<section id="parent-slots">
<span id="pp-parent-slots"></span><span id="index-40"></span><h3><span class="section-number">3.2.4. </span>Parent slots<a class="headerlink" href="#parent-slots" title="Link to this heading">¶</a></h3>
<p>A unary slot name followed by an asterisk denotes a <em>parent slot</em>. The trailing asterisk is not part of the slot name and is ignored when matching the name against a message. Except for their special meaning during the message lookup process (<a class="reference internal" href="#pp-lookup-algorithm"><span class="std std-ref">The lookup algorithm</span></a>), parent slots are exactly like normal unary slots; in particular, they may be assignable, allowing <em>dynamic inheritance</em>. Argument slots cannot be parent slots.</p>
</section>
<section id="annotations">
<span id="index-42"></span><span id="index-41"></span><h3><span class="section-number">3.2.5. </span>Annotations<a class="headerlink" href="#annotations" title="Link to this heading">¶</a></h3>
<p>In order to provide extra information for the programming environment, Self supports annotations on either whole objects or individual slots. Although any object can be an annotation, the Self syntax only supports the textual definition of string annotations. In order to annotate an object, use this syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>( | {} = ’this object has one slot’ snort = 17. | ) }
</pre></div>
</div>
<p>In order to annotate a group of slots, surround them with braces and insert the annotation after the opening brace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>( |
      { ’Category: accessing’
            getOne = (...).
            getAnother = (...).
      }
      anUnannotatedSlot.
| )
</pre></div>
</div>
<p>Annotations may nest; if so the Virtual Machine concatenates the annotations strings and inserts a separator character (16r7f) <a class="footnote-reference brackets" href="#f7" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>.</p>
</section>
</section>
<section id="expressions">
<span id="pp-langref-expressions"></span><span id="langref-expressions"></span><h2><span class="section-number">3.3. </span>Expressions<a class="headerlink" href="#expressions" title="Link to this heading">¶</a></h2>
<p><em>Expressions</em> in Self are <em>messages</em> sent to some object, the <em>receiver</em>. Self message syntax is similar to Smalltalk’s. Self provides three basic kinds of messages: unary messages, binary messages, and keyword messages. Each has its own syntax, associativity, and precedence. Each type of message can be sent either to an explicit or implicit receiver.</p>
<p>Productions <a class="footnote-reference brackets" href="#f8" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a>:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>expression</p></td>
<td><p>→</p></td>
<td><p>constant | unary-message | binary-message | keyword-message | ‘(’ expression ‘)’</p></td>
</tr>
<tr class="row-even"><td><p>constant</p></td>
<td><p>→</p></td>
<td><p>self | number | string | object</p></td>
</tr>
<tr class="row-odd"><td><p>unary-message</p></td>
<td><p>→</p></td>
<td><p>receiver unary-send | resend ‘.’ unary-send</p></td>
</tr>
<tr class="row-even"><td><p>unary-send</p></td>
<td><p>→</p></td>
<td><p>identifier</p></td>
</tr>
<tr class="row-odd"><td><p>binary-message</p></td>
<td><p>→</p></td>
<td><p>receiver binary-send | resend ‘.’ binary-send</p></td>
</tr>
<tr class="row-even"><td><p>binary-send</p></td>
<td><p>→</p></td>
<td><p>operator expression</p></td>
</tr>
<tr class="row-odd"><td><p>keyword-message</p></td>
<td><p>→</p></td>
<td><p>receiver keyword-send | resend ‘.’ keyword-send</p></td>
</tr>
<tr class="row-even"><td><p>keyword-send</p></td>
<td><p>→</p></td>
<td><p>small-keyword expression { cap-keyword expression }</p></td>
</tr>
<tr class="row-odd"><td><p>receiver</p></td>
<td><p>→</p></td>
<td><p>[ expression ]</p></td>
</tr>
<tr class="row-even"><td><p>resend</p></td>
<td><p>→</p></td>
<td><p>resend | identifier</p></td>
</tr>
</tbody>
</table>
</div>
<p>The table below summarizes Self’s message syntax rules:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>MESSAGE</p></th>
<th class="head"><p>ARGUMENTS</p></th>
<th class="head"><p>PRECEDENCE</p></th>
<th class="head"><p>ASSOCIATIVITY</p></th>
<th class="head"><p>SYNTAX</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Unary</p></td>
<td><p>0</p></td>
<td><p>highest</p></td>
<td><p>none</p></td>
<td><p>[receiver] identifier</p></td>
</tr>
<tr class="row-odd"><td><p>Binary</p></td>
<td><p>1</p></td>
<td><p>medium</p></td>
<td><p>none or left-to-right <a class="footnote-reference brackets" href="#f14" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>14<span class="fn-bracket">]</span></a></p></td>
<td><p>[receiver] operator expression</p></td>
</tr>
<tr class="row-even"><td><p>Keyword</p></td>
<td><p>&gt;= 1</p></td>
<td><p>lowest</p></td>
<td><p>right-to-left</p></td>
<td><p>[receiver] small-keyword expression { cap-keyword expression }</p></td>
</tr>
</tbody>
</table>
</div>
<p>Parentheses can be used to explicitly specify order of evaluation.</p>
<section id="unary-messages">
<span id="pp-unary-messages"></span><span id="index-44"></span><span id="index-43"></span><h3><span class="section-number">3.3.1. </span>Unary messages<a class="headerlink" href="#unary-messages" title="Link to this heading">¶</a></h3>
<p>A <em>unary message</em> does not specify any arguments. It is written as an identifier following the receiver.</p>
<p>Examples of unary messages sent to explicit receivers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">17</span> <span class="nb">print</span>
<span class="mi">5</span> <span class="n">factorial</span>
</pre></div>
</div>
<p><em>Associativity</em>. Unary messages compose from left to right. An expression to print 5 factorial, for example, is written:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">factorial</span> <span class="nb">print</span>
</pre></div>
</div>
<p>and interpreted as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">5</span> <span class="n">factorial</span><span class="p">)</span> <span class="nb">print</span>
</pre></div>
</div>
<p><em>Precedence</em>. Unary messages have higher precedence than binary messages and keyword messages.</p>
</section>
<section id="binary-messages">
<span id="pp-binary-messages"></span><span id="index-47"></span><span id="index-46"></span><span id="index-45"></span><h3><span class="section-number">3.3.2. </span>Binary messages<a class="headerlink" href="#binary-messages" title="Link to this heading">¶</a></h3>
<p>A <em>binary message</em> has a receiver and a single argument, separated by a binary operator. Examples of binary messages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span>
<span class="mi">7</span> <span class="o">&lt;-&gt;</span> <span class="mi">8</span>
</pre></div>
</div>
<p><em>Associativity</em>. Binary messages have no associativity, except between identical operators (which associate from left to right). For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">7</span>
</pre></div>
</div>
<p>is interpreted as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="mi">7</span>
</pre></div>
</div>
<p>But</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">7</span>
</pre></div>
</div>
<p>is illegal: the associativity must be made explicit by writing either</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">7</span> <span class="ow">or</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Precedence</em>. The precedence of binary messages is lower than unary messages but higher than keyword messages. All binary messages have the same precedence. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">factorial</span> <span class="o">+</span> <span class="n">pi</span> <span class="n">sine</span>
</pre></div>
</div>
<p>is interpreted as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">3</span> <span class="n">factorial</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">pi</span> <span class="n">sine</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="keyword-messages">
<span id="pp-keyword-messages"></span><span id="index-50"></span><span id="index-49"></span><span id="index-48"></span><h3><span class="section-number">3.3.3. </span>Keyword messages<a class="headerlink" href="#keyword-messages" title="Link to this heading">¶</a></h3>
<p>A <em>keyword message</em> has a receiver and one or more arguments. It is written as a receiver followed by a sequence of one or more keyword-argument pairs. The first keyword must begin with a lower case letter or underscore (‘<code class="docutils literal notranslate"><span class="pre">_</span></code>’); subsequent keywords must be capitalized. An initial underscore denotes that the operation is a <em>primitive</em>. A keyword message consists of the longest possible sequence of such keyword-argument pairs; the message selector is the concatenation of the keywords forming the message. Message selectors beginning with an underscore are reserved for <em>primitives</em> (<a class="reference internal" href="primitives.html#pp-primitives"><span class="std std-ref">Primitives</span></a>).</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">4</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">7</span>
</pre></div>
</div>
<p>is the single message <code class="docutils literal notranslate"><span class="pre">min:Max:</span></code> sent to <code class="docutils literal notranslate"><span class="pre">5</span></code> with arguments <code class="docutils literal notranslate"><span class="pre">4</span></code> and <code class="docutils literal notranslate"><span class="pre">7</span></code>, whereas</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">4</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">7</span>
</pre></div>
</div>
<p>involves two messages: first the message <code class="docutils literal notranslate"><span class="pre">max:</span></code> sent to <code class="docutils literal notranslate"><span class="pre">4</span></code> and taking <code class="docutils literal notranslate"><span class="pre">7</span></code> as its argument, and then the message <code class="docutils literal notranslate"><span class="pre">min:</span></code> sent to <code class="docutils literal notranslate"><span class="pre">5</span></code>, taking the result of (<code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">max:</span> <span class="pre">7</span></code>) as its argument.</p>
<p><em>Associativity</em>. Keyword messages associate from right to left, so</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">6</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">7</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">8</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">9</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">10</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">11</span>
</pre></div>
</div>
<p>is interpreted as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="nb">min</span><span class="p">:</span> <span class="p">(</span><span class="mi">6</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">7</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">8</span> <span class="n">Max</span><span class="p">:</span> <span class="p">(</span><span class="mi">9</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">10</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<p>The association order and capitalization requirements are intended to reduce the number of parentheses necessary in Self code. For example, taking the minimum of two slots <code class="docutils literal notranslate"><span class="pre">m</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code> and storing the result into a data slot i may be written as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="p">:</span> <span class="n">m</span> <span class="nb">min</span><span class="p">:</span> <span class="n">n</span>
</pre></div>
</div>
<p><em>Precedence</em>. Keyword messages have the lowest precedence. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="p">:</span> <span class="mi">5</span> <span class="n">factorial</span> <span class="o">+</span> <span class="n">pi</span> <span class="n">sine</span>
</pre></div>
</div>
<p>is interpreted as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="p">:</span> <span class="p">((</span><span class="mi">5</span> <span class="n">factorial</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">pi</span> <span class="n">sine</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="implicit-receiver-messages">
<span id="pp-implicit-receiver"></span><span id="index-51"></span><h3><span class="section-number">3.3.4. </span>Implicit-receiver messages<a class="headerlink" href="#implicit-receiver-messages" title="Link to this heading">¶</a></h3>
<p>Unary, binary, and keyword messages are frequently written without an explicit receiver. Such messages use the current receiver (<code class="docutils literal notranslate"><span class="pre">self</span></code>) as the implied receiver. The method lookup, however, begins at the current activation object rather than the current receiver (see <a class="reference internal" href="#pp-methods"><span class="std std-ref">Methods</span></a> for details on activation objects). Thus, a message sent explicitly to <code class="docutils literal notranslate"><span class="pre">self</span></code> is <em>not</em> equivalent to an implicit-receiver send because the former won’t search local slots before searching the receiver. Explicitly sending messages to <code class="docutils literal notranslate"><span class="pre">self</span></code> is considered bad style.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">factorial</span>        <span class="p">(</span><span class="n">implicit</span><span class="o">-</span><span class="n">receiver</span> <span class="n">unary</span> <span class="n">message</span><span class="p">)</span>
<span class="o">+</span> <span class="mi">3</span>              <span class="p">(</span><span class="n">implicit</span><span class="o">-</span><span class="n">receiver</span> <span class="n">binary</span> <span class="n">message</span><span class="p">)</span>
<span class="nb">max</span><span class="p">:</span> <span class="mi">5</span>           <span class="p">(</span><span class="n">implicit</span><span class="o">-</span><span class="n">receiver</span> <span class="n">keyword</span> <span class="n">message</span><span class="p">)</span>
<span class="mi">1</span> <span class="o">+</span> <span class="n">power</span><span class="p">:</span> <span class="mi">3</span>     <span class="p">(</span><span class="n">parsed</span> <span class="k">as</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">power</span><span class="p">:</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>Accesses to slots of the receiver (local or inherited) are also achieved by implicit message sends to <code class="docutils literal notranslate"><span class="pre">self</span></code>. For an assignable data slot named <code class="docutils literal notranslate"><span class="pre">t</span></code>, the message <code class="docutils literal notranslate"><span class="pre">t</span></code> returns the contents, and <code class="docutils literal notranslate"><span class="pre">t:</span> <span class="pre">17</span></code> puts <code class="docutils literal notranslate"><span class="pre">17</span></code> into the slot.</p>
</section>
<section id="resending-messages">
<span id="index-53"></span><span id="index-52"></span><h3><span class="section-number">3.3.5. </span>Resending messages<a class="headerlink" href="#resending-messages" title="Link to this heading">¶</a></h3>
<p>A <em>resend</em> allows an overridding method to invoke the overridden method. Directed resends allow ambiguities among overridden methods to be resolved by constraining the lookup to search a single parent slot. Both resends and directed resends may change the name of the message being sent from the name of the current method, and may pass different arguments than the arguments passed to the current method. The receiver of a resend or a directed resend must be the implicit receiver.</p>
<p>Intuitively, resend is similar to Smalltalk’s <code class="docutils literal notranslate"><span class="pre">super</span></code> send and CLOS’ <code class="docutils literal notranslate"><span class="pre">call-next-method</span></code>.</p>
<p>A resend is written as an implicit-receiver message with the reserved word <code class="docutils literal notranslate"><span class="pre">resend</span></code>, a period, and the message name. No whitespace may separate <code class="docutils literal notranslate"><span class="pre">resend</span></code>, the period, and the message name.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resend</span><span class="o">.</span><span class="n">display</span>
<span class="n">resend</span><span class="o">.+</span> <span class="mi">5</span>
<span class="n">resend</span><span class="o">.</span><span class="n">min</span><span class="p">:</span> <span class="mi">17</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">23</span>
</pre></div>
</div>
<p>A <em>directed resend</em> constrains the resend through a specified parent. It is written similar to a normal resend, but replaces <code class="docutils literal notranslate"><span class="pre">resend</span></code> with the name of the parent slot through which the resend is directed.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">listParent</span><span class="o">.</span><span class="n">height</span>
<span class="n">intParent</span><span class="o">.</span><span class="n">min</span><span class="p">:</span> <span class="mi">17</span> <span class="n">Max</span><span class="p">:</span> <span class="mi">23</span>
</pre></div>
</div>
<p>Only implicit-receiver messages may be delegated via a resend or a directed resend <a class="footnote-reference brackets" href="#f9" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a>.</p>
</section>
<section id="message-lookup-semantics">
<span id="pp-langref-message-lookup"></span><span id="index-54"></span><h3><span class="section-number">3.3.6. </span>Message lookup semantics<a class="headerlink" href="#message-lookup-semantics" title="Link to this heading">¶</a></h3>
<p>This section describes the semantics of message lookups in Self. In addition to an informal textual description, the lookup semantics are presented in pseudo-code using the following notation:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>s.name</p></td>
<td><p>The name of slot s.</p></td>
</tr>
<tr class="row-even"><td><p>s.contents</p></td>
<td><p>The object contained in slot s.</p></td>
</tr>
<tr class="row-odd"><td><p>s.isParent</p></td>
<td><p>True iff s is a parent slot.</p></td>
</tr>
<tr class="row-even"><td><p>{s ε obj | pred(s)}</p></td>
<td><p>The set of all slots of object obj that satisfy predicate pred.</p></td>
</tr>
<tr class="row-odd"><td><p>| S |</p></td>
<td><p>The cardinality of set S.</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>The message sending semantics are decomposed into the following functions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>send(rec, sel, args)</p></td>
<td><p>The message send function (<a class="reference internal" href="#pp-mesage-send"><span class="std std-ref">Message send</span></a>).</p></td>
</tr>
<tr class="row-even"><td><p>lookup(obj, rec, sel, V)</p></td>
<td><p>The lookup algorithm (<a class="reference internal" href="#pp-lookup-algorithm"><span class="std std-ref">The lookup algorithm</span></a>).</p></td>
</tr>
<tr class="row-odd"><td><p>undirected_resend(…)</p></td>
<td><p>The undirected message resend function (<a class="reference internal" href="#pp-undirected-resend"><span class="std std-ref">Undirected Resend</span></a>).</p></td>
</tr>
<tr class="row-even"><td><p>directed_resend(…)</p></td>
<td><p>The directed message resend function (<a class="reference internal" href="#pp-directed-resend"><span class="std std-ref">Directed Resend</span></a>).</p></td>
</tr>
<tr class="row-odd"><td><p>eval(rec, M, args)</p></td>
<td><p>The slot evaluation function as described informally throughout <a class="reference internal" href="#pp-langref-code"><span class="std std-ref">Code</span></a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
</section>
<section id="message-send">
<span id="pp-mesage-send"></span><h3><span class="section-number">3.3.7. </span>Message send<a class="headerlink" href="#message-send" title="Link to this heading">¶</a></h3>
<p>There are two kinds of message sends: a <em>primitive send</em> has a selector beginning with an underscore (‘<code class="docutils literal notranslate"><span class="pre">_</span></code>’) and calls the corresponding primitive operation. Primitives are predefined functions provided by the implementation. A <em>normal send</em> does a lookup to obtain the target slot; if the lookup was successful, the slot is subsequently evaluated. If the slot contains a data object, then the data object is simply returned. If the slot contains the assignment primitive, the argument of the message is stored in the corresponding data slot. Finally, if the slot contains a method, an activation is created and run as described in <a class="reference internal" href="#pp-methods"><span class="std std-ref">Methods</span></a>.</p>
<p>If the lookup fails, the lookup error is handled in an implementation-defined manner; typically, a message indicating the type of error is sent to the object which could not handle the message.</p>
<p>The function <em>send(rec, sel, args)</em> is defined as follows:</p>
<dl>
<dt><strong>Input</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rec</span></code>, the receiver of the message</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sel</span></code>, the message selector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">args</span></code>, the actual arguments</div>
</div>
</dd>
<dt><strong>Output</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">res</span></code>, the result object</div>
</div>
</dd>
</dl>
<p><strong>Algorithm</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>if begins_with_underscore(sel)
then invoke_primitive(rec, sel, args)               “primitive call”
else M ← lookup(rec, sel, Ø)                        “do the lookup”
    case
        | M | = 0: error: message not understood
        | M | = 1: res ← eval(rec, M, args)         “see §2.1”
        | M | &gt; 1: error: ambiguous message send
    end
end
return res
</pre></div>
</div>
</section>
<section id="the-lookup-algorithm">
<span id="pp-lookup-algorithm"></span><span id="index-55"></span><h3><span class="section-number">3.3.8. </span>The lookup algorithm<a class="headerlink" href="#the-lookup-algorithm" title="Link to this heading">¶</a></h3>
<p>The lookup algorithm recursively traverses the inheritance graph, which can be an arbitrary graph (including cyclic graphs). No object is searched twice along any single path. The search begins in the object itself and then continues to search every parent. Parent slots are not evaluated during the lookup. That is, if a parent slot contains an object with code, the code will not be executed; the object will merely be searched for matching slots.</p>
<p>The function <em>lookup(obj, sel, V)</em> is defined as follows:</p>
<dl>
<dt><strong>Input</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">obj</span></code>, the object being searched for matching slots</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sel</span></code>, the message selector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">V</span></code>, the set of objects already visited along this path</div>
</div>
</dd>
<dt><strong>Output</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">M</span></code>, the set of matching slots</div>
</div>
</dd>
</dl>
<p><strong>Algorithm</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>if obj ε V
then M ← Ø                                                  “cycle detection”
else M ← {s ε obj | s.name = sel}                           “try local slots”
    if M = Ø then M ← parent_lookup(obj, sel, V) end        “try parent slots”
end
return M
</pre></div>
</div>
<p>Where <em>parent_lookup(obj, sel, V)</em> is defined as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>P ← {s ε obj | s.isParent}                  “all parents”
M ← υ lookup(s.contents, sel, V υ {obj})    “recursively search parents”
   sεP
return M
</pre></div>
</div>
</section>
<section id="undirected-resend">
<span id="pp-undirected-resend"></span><h3><span class="section-number">3.3.9. </span>Undirected Resend<a class="headerlink" href="#undirected-resend" title="Link to this heading">¶</a></h3>
<p>An undirected resend ignores the sending method holder (the object containing the currently running method) and continues with its parents.</p>
<p>The function <em>undirected_resend(rec, smh, sel, args)</em> is defined as follows:</p>
<dl>
<dt><strong>Input</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rec</span></code>, the receiver of the message</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">smh</span></code>, the sending method holder</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sel</span></code>, the message selector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">args</span></code>, the actual arguments</div>
</div>
</dd>
<dt><strong>Output</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">res</span></code>, the result object</div>
</div>
</dd>
</dl>
<p><strong>Algorithm</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>M ← parent_lookup(smh, sel, Ø)                    “do the lookup”
case
    | M | = 0: error: message not understood
    | M | = 1: res ← eval(rec, M, args)           “see §2.1”
    | M | &gt; 1: error: ambiguous message send
end
return res
</pre></div>
</div>
</section>
<section id="directed-resend">
<span id="pp-directed-resend"></span><h3><span class="section-number">3.3.10. </span>Directed Resend<a class="headerlink" href="#directed-resend" title="Link to this heading">¶</a></h3>
<p>A directed resend looks only in one slot in the sending method holder.</p>
<p>The function <em>directed_resend(rec, smh, del, sel, args)</em> is defined as follows:</p>
<dl>
<dt><strong>Input</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rec</span></code>, the receiver of the message</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">smh</span></code>, the sending method holder</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">del</span></code>, the name of the delegatee</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sel</span></code>, the message selector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">args</span></code>, the actual arguments</div>
</div>
</dd>
<dt><strong>Output</strong>:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">res</span></code>, the result object</div>
</div>
</dd>
</dl>
<p><strong>Algorithm</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>D ← {s ε smh | s.name = del}                     “find delegatee”
if | D | = 0 then error: missing delegatee       “one or none”
M ← lookup(smh.del, sel, Ø)                      “do the lookup”
case
    | M | = 0: error: message not understood
    | M | = 1: res ← eval(rec, M, args)          “see §2.1”
    | M | &gt; 1: error: ambiguous message send
end
return res
</pre></div>
</div>
</section>
</section>
<section id="lexical-elements">
<h2><span class="section-number">3.4. </span>Lexical elements<a class="headerlink" href="#lexical-elements" title="Link to this heading">¶</a></h2>
<p>This chapter describes the lexical structure of Self programs — how sequences of characters in Self source code are grouped into lexical tokens. In contrast to syntactic elements described by productions in the rest of this document, the elements of lexical EBNF productions may not be separated by whitespace, i.e. there may not be whitespace within a lexical token. Tokens are formed from the longest sequence of characters possible. Whitespace may separate any two tokens and must separate tokens that would be treated as one token otherwise.</p>
<section id="character-set">
<span id="index-56"></span><h3><span class="section-number">3.4.1. </span>Character set<a class="headerlink" href="#character-set" title="Link to this heading">¶</a></h3>
<p>Self programs are written using the following characters:</p>
<ul>
<li><p><em>Letters</em>. The fifty-two upper and lower case letters:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz</span></code></p>
</div></blockquote>
</li>
<li><p><em>Digits</em>. The ten numeric digits:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">0123456789</span></code></p>
</div></blockquote>
</li>
<li><p><em>Whitespace</em>. The formatting characters: space, horizontal tab (ASCII HT), newline (NL), carriage return (CR), vertical tab (VT), backspace (BS), and form feed (FF). (Comments are also treated as whitespace.)</p></li>
<li><p><em>Graphic characters</em>. The 32 non-alphanumeric characters:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">!&#64;#$%^&amp;*()_-+=|\~‘{}[]:;&quot;’&lt;&gt;,.?/</span></code></p>
</div></blockquote>
</li>
</ul>
</section>
<section id="index-60">
<span id="index-59"></span><span id="index-58"></span><span id="index-57"></span><span id="identifiers"></span><h3><span class="section-number">3.4.2. </span>Identifiers<a class="headerlink" href="#index-60" title="Link to this heading">¶</a></h3>
<p>An <em>identifier</em> is a sequence of letters, digits, and underscores (‘_’) beginning with a lowercase letter or an underscore. Case is significant: <code class="docutils literal notranslate"><span class="pre">apoint</span></code> is not the same as <code class="docutils literal notranslate"><span class="pre">aPoint</span></code>.</p>
<p>Productions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>small-letter</p></td>
<td><p>→</p></td>
<td><p>‘a’ | ‘b’ | … | ‘z’</p></td>
</tr>
<tr class="row-even"><td><p>cap-letter</p></td>
<td><p>→</p></td>
<td><p>‘A’ | ‘B’ | … | ‘Z’</p></td>
</tr>
<tr class="row-odd"><td><p>letter</p></td>
<td><p>→</p></td>
<td><p>small-letter | cap-letter</p></td>
</tr>
<tr class="row-even"><td><p>identifier</p></td>
<td><p>→</p></td>
<td><p>(small-letter | ‘_’) {letter | digit | ‘_’}</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">_IntAdd</span> <span class="pre">cloud9</span> <span class="pre">m</span> <span class="pre">a_point</span></code></p>
</div></blockquote>
<p>The two identifiers <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">resend</span></code> are reserved. Identifiers beginning with underscores are reserved for primitives.</p>
</section>
<section id="keywords">
<span id="pp-keywords"></span><span id="index-61"></span><h3><span class="section-number">3.4.3. </span>Keywords<a class="headerlink" href="#keywords" title="Link to this heading">¶</a></h3>
<p>Keywords are used as slot names and as message names. They consist of an identifier or a capitalized identifier followed by a colon (‘:’).</p>
<p>Productions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>small-keyword</p></td>
<td><p>→</p></td>
<td><p>identifier ‘:’</p></td>
</tr>
<tr class="row-even"><td><p>cap-keyword</p></td>
<td><p>→</p></td>
<td><p>cap-letter {letter | digit | ‘_’} ‘:’</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">at:</span> <span class="pre">Put:</span> <span class="pre">_IntAdd:</span></code></p>
</div></blockquote>
</section>
<section id="arguments">
<span id="index-62"></span><h3><span class="section-number">3.4.4. </span>Arguments<a class="headerlink" href="#arguments" title="Link to this heading">¶</a></h3>
<p>A colon followed by an identifier denotes an <em>argument</em> slot name.</p>
<p>Productions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>arg-name</p></td>
<td><p>→</p></td>
<td><p>‘:’ identifier</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">:name</span></code></div>
</div>
</div></blockquote>
</section>
<section id="operators">
<span id="index-63"></span><h3><span class="section-number">3.4.5. </span>Operators<a class="headerlink" href="#operators" title="Link to this heading">¶</a></h3>
<p>An <em>operator</em> consists of a sequence of one or more of the following characters:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">!</span> <span class="pre">&#64;</span> <span class="pre">#</span> <span class="pre">$</span> <span class="pre">%</span> <span class="pre">^</span> <span class="pre">&amp;</span> <span class="pre">*</span> <span class="pre">-</span> <span class="pre">+</span> <span class="pre">=</span> <span class="pre">~</span> <span class="pre">/</span> <span class="pre">?</span> <span class="pre">&lt;</span> <span class="pre">&gt;</span> <span class="pre">,</span> <span class="pre">;</span> <span class="pre">|</span> <span class="pre">‘</span> <span class="pre">\</span></code></div>
</div>
</div></blockquote>
<p>Two sequences are reserved and are not operators:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">|</span> <span class="pre">^</span></code></div>
</div>
</div></blockquote>
<p>Productions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>op-char</p></td>
<td><p>→</p></td>
<td><p>‘!’ | ‘&#64;’ | ‘#’ | ‘$’ | ‘%’ | ‘^’ | ‘&amp;’ | ‘*’ | ‘-’ | ‘+’ | ‘=’ | ‘~’ | ‘/’ | ‘?’ | ‘&lt;’ | ‘&gt;’ | ‘,’ | ‘;’ | ‘|’ | ‘‘’ | ‘\’</p></td>
</tr>
<tr class="row-even"><td><p>operator</p></td>
<td><p>→</p></td>
<td><p>op-char {op-char}</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">-</span> <span class="pre">&amp;&amp;</span> <span class="pre">\|\|</span> <span class="pre">&lt;-&gt;</span> <span class="pre">%</span> <span class="pre">#</span> <span class="pre">&#64;</span> <span class="pre">^</span></code></div>
</div>
</div></blockquote>
</section>
<section id="numbers">
<span id="index-65"></span><span id="index-64"></span><h3><span class="section-number">3.4.6. </span>Numbers<a class="headerlink" href="#numbers" title="Link to this heading">¶</a></h3>
<p>Integer literals are written as a sequence of digits, optionally prefixed with a minus sign and/or a
base <a class="footnote-reference brackets" href="#f10" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a>. No whitespace is allowed between a minus sign and the digit sequence <a class="footnote-reference brackets" href="#f11" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a>. Real constants may
be either written in fixed-point or exponential form.</p>
<p>Integers may be written using bases from 2 to 36. For bases greater than ten, the characters ‘<em>a</em>’
through ‘<em>z</em>’ (case insensitive) represent digit values 10 through 35. The default base is decimal. A
non-decimal number is prefixed by its base value, specified as a decimal number followed by either
‘<em>r</em>’ or ‘<em>R</em>’.</p>
<p>Real numbers may be written in decimal only. The exponent of a floating-point format number indicates
multiplication of the mantissa by 10 raised to the exponent power; i.e.,</p>
<blockquote>
<div><p>nnnnEddd = nnnn × 10 <sup>ddd</sup></p>
</div></blockquote>
<p>A number with a digit that is not appropriate for the base will cause a lexical error, as will an integer
constant that is too large to be represented. If the absolute value of a real constant is too large
or too small to be represented, the value of the constant will be ± infinity or zero, respectively.</p>
<p>Productions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>number</p></td>
<td><p>→</p></td>
<td><p>[ ‘-’ ] (integer | real)</p></td>
</tr>
<tr class="row-even"><td><p>integer</p></td>
<td><p>→</p></td>
<td><p>[base] general-digit {general-digit}</p></td>
</tr>
<tr class="row-odd"><td><p>real</p></td>
<td><p>→</p></td>
<td><p>fixed-point | float</p></td>
</tr>
<tr class="row-even"><td><p>fixed-point</p></td>
<td><p>→</p></td>
<td><p>decimal ‘.’ decimal</p></td>
</tr>
<tr class="row-odd"><td><p>float</p></td>
<td><p>→</p></td>
<td><p>decimal [ ‘.’ decimal ] (‘e’ | ‘E’) [ ‘+’ | ‘-’ ] decimal</p></td>
</tr>
<tr class="row-even"><td><p>general-digit</p></td>
<td><p>→</p></td>
<td><p>digit | letter</p></td>
</tr>
<tr class="row-odd"><td><p>decimal</p></td>
<td><p>→</p></td>
<td><p>digit {digit}</p></td>
</tr>
<tr class="row-even"><td><p>base</p></td>
<td><p>→</p></td>
<td><p>decimal (‘r’ | ‘R’)</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">123</span> <span class="pre">16r27fe</span> <span class="pre">1272.34e+15</span> <span class="pre">1e10</span></code></p>
</div></blockquote>
</section>
<section id="strings">
<span id="index-68"></span><span id="index-67"></span><span id="index-66"></span><h3><span class="section-number">3.4.7. </span>Strings<a class="headerlink" href="#strings" title="Link to this heading">¶</a></h3>
<p>String constants are enclosed in single quotes (‘’’). With the exception of single quotes and escape
sequences introduced by a backslash (‘\’), all characters (including formatting characters like
newline and carriage return) lying between the delimiting single quotes are included in the string <a class="footnote-reference brackets" href="#f12" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></a>.</p>
<p>To allow single quotes to appear in a string and to allow non-printing control characters in a string
to be indicated more visibly, Self provides C-like escape sequences:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>\t</p></td>
<td><p>tab</p></td>
<td><p>\b</p></td>
<td><p>backspace</p></td>
<td><p>\n</p></td>
<td><p>newline</p></td>
</tr>
<tr class="row-even"><td><p>\f</p></td>
<td><p>form feed</p></td>
<td><p>\r</p></td>
<td><p>carriage return</p></td>
<td><p>\v</p></td>
<td><p>vertical tab</p></td>
</tr>
<tr class="row-odd"><td><p>\a</p></td>
<td><p>alert (bell)</p></td>
<td><p>\0</p></td>
<td><p>null character</p></td>
<td><p>\ \</p></td>
<td><p>backslash</p></td>
</tr>
<tr class="row-even"><td><p>\’</p></td>
<td><p>single quote</p></td>
<td><p>\”</p></td>
<td><p>double quote</p></td>
<td><p>\?</p></td>
<td><p>question mark</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>A backslash followed by an ‘x’, ‘d’, or ‘o’ specifies the character with the corresponding numeric
encoding in the ASCII character set:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>\xnn</p></td>
<td><p>hexadecimal escape</p></td>
</tr>
<tr class="row-even"><td><p>\dnnn</p></td>
<td><p>decimal escape</p></td>
</tr>
<tr class="row-odd"><td><p>\onnn</p></td>
<td><p>octal escape</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>There must be exactly two hexadecimal digits for hexadecimal character escapes, and exactly three
digits for decimal and octal character escapes. Illegal hexadecimal, decimal, and octal numbers, as
well as character escapes specifying ASCII values greater than 255 will cause a lexical error.</p>
<p>For example, the following characters all denote the carriage return character (ASCII code 13):</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>\r</p></td>
<td><p>\x0d</p></td>
<td><p>\d013</p></td>
<td><p>\o015</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>A long string may be broken into multiple lines by preceding each newline with a backslash. Such
escaped newlines are ignored during formation of the string constant.</p>
<p>A backslash followed by any other character than those listed above will cause a lexical error.</p>
<p>Productions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>string</p></td>
<td><p>→</p></td>
<td><p>‘’’ { normal-char | escape-char } ‘’’</p></td>
</tr>
<tr class="row-even"><td><p>normal-char</p></td>
<td><p>→</p></td>
<td><p>any character except ‘\’ and ‘’’</p></td>
</tr>
<tr class="row-odd"><td><p>escape-char</p></td>
<td><p>→</p></td>
<td><p>‘\t’ | ‘\b’ | ‘\n’ | ‘\f’ | ‘\r’ | ‘\v’ | ‘\a’ | ‘\0’ | ‘\ \’ | ‘\’’ | ‘\”’ | ‘\?’ | numeric-escape</p></td>
</tr>
<tr class="row-even"><td><p>numeric-escape</p></td>
<td><p>→</p></td>
<td><p>‘\x’ general-digit general-digit | ( ‘\d’ | ‘\o’ ) digit digit digit</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
</section>
<section id="comments">
<h3><span class="section-number">3.4.8. </span>Comments<a class="headerlink" href="#comments" title="Link to this heading">¶</a></h3>
<p>Comments are delimited by double quotes (‘”’). Double quotes may not themselves be embedded
in the body of a comment. All characters (including formatting characters like newline and carriage
return) are part of the body of a comment.</p>
<p>Productions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>comment</p></td>
<td><p>→</p></td>
<td><p>‘”’ { comment-char } ‘”’</p></td>
</tr>
<tr class="row-even"><td><p>comment-char</p></td>
<td><p>→</p></td>
<td><p>any character except ‘”’</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&quot;this</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">comment&quot;</span></code></p>
</div></blockquote>
<p class="rubric" id="index-103"><span id="index-102"></span><span id="index-101"></span><span id="index-100"></span><span id="index-99"></span><span id="index-98"></span><span id="index-97"></span><span id="index-96"></span><span id="index-95"></span><span id="index-94"></span><span id="index-93"></span><span id="index-92"></span><span id="index-91"></span><span id="index-90"></span><span id="index-89"></span><span id="index-88"></span><span id="index-87"></span><span id="index-86"></span><span id="index-85"></span><span id="index-84"></span><span id="index-83"></span><span id="index-82"></span><span id="index-81"></span><span id="index-80"></span><span id="index-79"></span><span id="index-78"></span><span id="index-77"></span><span id="index-76"></span><span id="index-75"></span><span id="index-74"></span><span id="index-73"></span><span id="index-72"></span><span id="index-71"></span><span id="index-70"></span><span id="index-69"></span>Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>If you wish to use the empty vertical bar notation to create an empty object, note that the parser currently requires a space between the vertical bars.</p>
</aside>
<aside class="footnote brackets" id="f2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>But in that case make sure you put a space after the period, otherwise you will get an obscure error message from the parser.</p>
</aside>
<aside class="footnote brackets" id="f3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>All block objects have the same parent, an object containing the shared behavior for blocks</p>
</aside>
<aside class="footnote brackets" id="f4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>In the user interface a read/write slot is depicted as a single slot with a colon labelling the button used to access the value of the slot; the assignment slot is not shown, to save screen space. In contrast, a read-only slot has an equals sign on the button.</p>
</aside>
<aside class="footnote brackets" id="f5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">5</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">nil</span></code> is a predefined object provided by the implementation. It is intended to indicate “not a useful object.”</p>
</aside>
<aside class="footnote brackets" id="f6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">6</a><span class="fn-bracket">]</span></span>
<p>Although a block may be assigned to a slot at any time, it is often not useful to do so: evaluating the slot may result in an error because the activation record for the block’s lexically enclosing scope will have returned; see <a class="reference internal" href="#pp-langref-blocks"><span class="std std-ref">Blocks</span></a>.</p>
</aside>
<aside class="footnote brackets" id="f7" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">7</a><span class="fn-bracket">]</span></span>
<p>The current programming environment expects a slot annotation to start with one of a number of keywords, including <code class="docutils literal notranslate"><span class="pre">Category:</span></code>, <code class="docutils literal notranslate"><span class="pre">Comment:</span></code>, and <code class="docutils literal notranslate"><span class="pre">ModuleInfo:</span></code>. See the programming environment manual for more details.</p>
</aside>
<aside class="footnote brackets" id="f8" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">8</a><span class="fn-bracket">]</span></span>
<p>In order to simplify the presentation, this grammar is ambiguous; precedence and associativity rules are used to resolve the ambiguities.</p>
</aside>
<aside class="footnote brackets" id="f9" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">9</a><span class="fn-bracket">]</span></span>
<p>General delegation for explicit receiver messages is supported through primitives in the implementation (see Appendix 9.8).</p>
</aside>
<aside class="footnote brackets" id="f10" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">10</a><span class="fn-bracket">]</span></span>
<p>Unlike Smalltalk, integer literals are limited in range to smallInts.</p>
</aside>
<aside class="footnote brackets" id="f11" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id12">11</a><span class="fn-bracket">]</span></span>
<p>In situations where parsing the minus sign as part of the number would cause a parse error (for example, in the expression a-1), the minus is interpreted as a binary message (a - 1).</p>
</aside>
<aside class="footnote brackets" id="f12" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id13">12</a><span class="fn-bracket">]</span></span>
<p>When typing strings in, the graphical user interface accepts multi-line strings, but the character-based read-evalprint loop does not.</p>
</aside>
<aside class="footnote brackets" id="f13" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>13<span class="fn-bracket">]</span></span>
<p>In order to simplify the presentation, this grammar is ambiguous; precedence and associativity rules are used to resolve the ambiguities.</p>
</aside>
<aside class="footnote brackets" id="f14" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">14</a><span class="fn-bracket">]</span></span>
<p>Heterogeneous binary messages have no associativity; homogeneous binary messages associate left-to-right.</p>
</aside>
</aside>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="selfwrld.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">4. </span>The Self World</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="build.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">2. </span>Building the Self system</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Russell Allen (Ed.)
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">3. Language Reference</a><ul>
<li><a class="reference internal" href="#objects">3.1. Objects</a><ul>
<li><a class="reference internal" href="#syntax">3.1.1. Syntax</a></li>
<li><a class="reference internal" href="#data-objects">3.1.2. Data objects</a></li>
<li><a class="reference internal" href="#the-assignment-primitive">3.1.3. The assignment primitive</a></li>
<li><a class="reference internal" href="#objects-with-code">3.1.4. Objects with code</a></li>
<li><a class="reference internal" href="#code">3.1.5. Code</a></li>
<li><a class="reference internal" href="#methods">3.1.6. Methods</a></li>
<li><a class="reference internal" href="#blocks">3.1.7. Blocks</a></li>
<li><a class="reference internal" href="#returns">3.1.8. Returns</a></li>
<li><a class="reference internal" href="#construction-of-object-literals">3.1.9. Construction of object literals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#slot-descriptors">3.2. Slot descriptors</a><ul>
<li><a class="reference internal" href="#read-only-slots">3.2.1. Read-only slots</a></li>
<li><a class="reference internal" href="#read-write-slots">3.2.2. Read/write slots</a></li>
<li><a class="reference internal" href="#slots-containing-methods">3.2.3. Slots containing methods</a></li>
<li><a class="reference internal" href="#parent-slots">3.2.4. Parent slots</a></li>
<li><a class="reference internal" href="#annotations">3.2.5. Annotations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expressions">3.3. Expressions</a><ul>
<li><a class="reference internal" href="#unary-messages">3.3.1. Unary messages</a></li>
<li><a class="reference internal" href="#binary-messages">3.3.2. Binary messages</a></li>
<li><a class="reference internal" href="#keyword-messages">3.3.3. Keyword messages</a></li>
<li><a class="reference internal" href="#implicit-receiver-messages">3.3.4. Implicit-receiver messages</a></li>
<li><a class="reference internal" href="#resending-messages">3.3.5. Resending messages</a></li>
<li><a class="reference internal" href="#message-lookup-semantics">3.3.6. Message lookup semantics</a></li>
<li><a class="reference internal" href="#message-send">3.3.7. Message send</a></li>
<li><a class="reference internal" href="#the-lookup-algorithm">3.3.8. The lookup algorithm</a></li>
<li><a class="reference internal" href="#undirected-resend">3.3.9. Undirected Resend</a></li>
<li><a class="reference internal" href="#directed-resend">3.3.10. Directed Resend</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lexical-elements">3.4. Lexical elements</a><ul>
<li><a class="reference internal" href="#character-set">3.4.1. Character set</a></li>
<li><a class="reference internal" href="#index-60">3.4.2. Identifiers</a></li>
<li><a class="reference internal" href="#keywords">3.4.3. Keywords</a></li>
<li><a class="reference internal" href="#arguments">3.4.4. Arguments</a></li>
<li><a class="reference internal" href="#operators">3.4.5. Operators</a></li>
<li><a class="reference internal" href="#numbers">3.4.6. Numbers</a></li>
<li><a class="reference internal" href="#strings">3.4.7. Strings</a></li>
<li><a class="reference internal" href="#comments">3.4.8. Comments</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options%EF%B9%96v=db884f6e.js"></script>
    <script src="_static/doctools%EF%B9%96v=9a2dae69.js"></script>
    <script src="_static/sphinx_highlight%EF%B9%96v=dc90522c.js"></script>
    <script src="_static/scripts/furo%EF%B9%96v=5fa4622c.js"></script>
    </body>
</html>