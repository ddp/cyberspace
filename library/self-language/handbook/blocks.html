<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="4.4. Numbers and Time" href="numbers.html" /><link rel="prev" title="4.2. The Roots of Behavior" href="roots.html" />

    <!-- Generated with Sphinx 8.0.2 and Furo 2024.08.06 -->
        <title>4.3. Blocks, Booleans, and Control Structures - Self Handbook 2024.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments%EF%B9%96v=a746c00c.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo%EF%B9%96v=354aac6f.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions%EF%B9%96v=302659d7.css" />
    
    


<style>body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Self Handbook 2024.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Self Handbook 2024.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">2. Building the Self system</a></li>
<li class="toctree-l1"><a class="reference internal" href="langref.html">3. Language Reference</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="selfwrld.html">4. The Self World</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 4. The Self World</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="worldorg.html">4.1. World Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="roots.html">4.2. The Roots of Behavior</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">4.3. Blocks, Booleans, and Control Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="numbers.html">4.4. Numbers and Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="collections.html">4.5. Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="pairs.html">4.6. Pairs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mirrors.html">4.7. Mirrors</a></li>
<li class="toctree-l2"><a class="reference internal" href="messages.html">4.8. Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="processes.html">4.9. Processes and Concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="foreign.html">4.10. Foreign Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="unix.html">4.11. I/O and Unix</a></li>
<li class="toctree-l2"><a class="reference internal" href="oddball.html">4.12. Other Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="lowlevel.html">4.13. How to use the low-level interrupt facilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="textdebug.html">4.14. Using the textual debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">4.15. Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="progguid.html">5. A Guide to Programming Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="howtoprg.html">6. How to Program in Self</a></li>
<li class="toctree-l1"><a class="reference internal" href="morphic.html">7. Morphic: The Self User Interface Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="vmref.html">8. Virtual Machine Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="ref.html">9. References</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="appendices.html">10. Appendices</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 10. Appendices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">10.1. Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="lexicaloverview.html">10.2. Lexical overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntaxoverview.html">10.3. Syntax overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="builtintypes.html">10.4. Built-in types</a></li>
<li class="toctree-l2"><a class="reference internal" href="usefulselectors.html">10.5. Useful Selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="menus.html">10.6. Every Menu Item in the Programming Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitor.html">10.7. The system monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="primitives.html">10.8. Primitives</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="extras.html">11. Extras</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 11. Extras</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ui1.html">11.1. The Original Self UI</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/blocks.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="blocks-booleans-and-control-structures">
<h1><span class="section-number">4.3. </span>Blocks, Booleans, and Control Structures<a class="headerlink" href="#blocks-booleans-and-control-structures" title="Link to this heading">¶</a></h1>
<p>A <em>block</em> is a special kind of object containing a sequence of statements. When a block is evaluated
by being sent an acceptable <code class="docutils literal notranslate"><span class="pre">value</span></code> message, its statements are executed in the context of the current
activation of the method in which the block is declared. This allows the statements in the block
to access variables local to the block’s enclosing method and any enclosing blocks in that method.
(This set of variables comprises the lexical scope of the block.) It also means that within the block,
<code class="docutils literal notranslate"><span class="pre">self</span></code> refers to the receiver of the message that activated the method, not to the block object itself.
A return statement in a block causes a return from the block’s enclosing method. (See chapter <a class="reference internal" href="langref.html#pp-langref"><span class="std std-ref">Language Reference</span></a>
- <a class="reference internal" href="langref.html"><span class="doc">Language Reference</span></a> for a more thorough discussion of block semantics.)</p>
<p>A block can take an arbitrary number of arguments and can have its own local variables, as well as
having access to the local variables of its enclosing method. The statements in the block are executed
when the block is sent a message of the form <code class="docutils literal notranslate"><span class="pre">“value[:{With:}]”</span></code>, where the number of colons
in the message is at least the same as the number of arguments the block takes (extra
arguments are ignored, but it is an error to provide too few). For example, the following block takes
two arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">|</span> <span class="p">:</span><span class="n">arg1</span><span class="o">.</span> <span class="p">:</span><span class="n">arg2</span> <span class="o">|</span> <span class="n">arg1</span> <span class="o">+</span> <span class="n">arg2</span> <span class="p">]</span>
</pre></div>
</div>
<p>and can be evaluated by sending it the message <code class="docutils literal notranslate"><span class="pre">value:With:</span></code> to produce the sum of its arguments.
Blocks are used to implement all control structures in Self and allow the programmer to
easily extend the system with customized control structures. In fact, all control stuctures in Self
except message sends, returns, and VM error handling are implemented using blocks.</p>
<section id="booleans-and-conditionals">
<h2><span class="section-number">4.3.1. </span>Booleans and Conditionals<a class="headerlink" href="#booleans-and-conditionals" title="Link to this heading">¶</a></h2>
<p>The fundamental control structure is the conditional. In Self, the behavior of conditionals is defined
by two unique boolean objects, <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">false</span></code>. Boolean objects respond to the messages
<code class="docutils literal notranslate"><span class="pre">ifTrue:</span></code>, <code class="docutils literal notranslate"><span class="pre">ifFalse:</span></code>, <code class="docutils literal notranslate"><span class="pre">ifTrue:False:</span></code>, and <code class="docutils literal notranslate"><span class="pre">ifFalse:True:</span></code> by evaluating the appropriate argument
block. For example, <code class="docutils literal notranslate"><span class="pre">true</span></code> implements <code class="docutils literal notranslate"><span class="pre">ifTrue:False:</span></code> as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ifTrue</span><span class="p">:</span> <span class="n">b1</span> <span class="kc">False</span><span class="p">:</span> <span class="n">b2</span> <span class="o">=</span> <span class="p">(</span> <span class="n">b1</span> <span class="n">value</span> <span class="p">)</span>
</pre></div>
</div>
<p>That is, when <code class="docutils literal notranslate"><span class="pre">true</span></code> is sent <code class="docutils literal notranslate"><span class="pre">ifTrue:False:</span></code>, it evaluates the first block and ignores the second.
For example, the following expression evaluates to the absolute value of x:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="n">ifTrue</span><span class="p">:</span> <span class="p">[</span> <span class="n">x</span> <span class="n">negate</span> <span class="p">]</span> <span class="kc">False</span><span class="p">:</span> <span class="p">[</span> <span class="n">x</span> <span class="p">]</span>
</pre></div>
</div>
<p>The booleans also define behavior for the logical operations <code class="docutils literal notranslate"><span class="pre">AND</span> <span class="pre">(&amp;&amp;),</span> <span class="pre">OR</span> <span class="pre">(||),</span> <span class="pre">EXCLUSIVE-OR</span>
<span class="pre">(^^)</span></code>, and <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">(not)</span></code>. Because the binary boolean operators all send value to their argument when
necessary, they can also be used for “short-circuit” evaluation by supplying a block, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">maxByte</span> <span class="n">pred</span><span class="p">]</span> <span class="n">ifTrue</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span>
</pre></div>
</div>
<p>Module: boolean</p>
</section>
<section id="loops">
<h2><span class="section-number">4.3.2. </span>Loops<a class="headerlink" href="#loops" title="Link to this heading">¶</a></h2>
<p>The various idioms for constructing loops in Self are best illustrated by example.
Here is an endless loop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="o">...</span> <span class="p">]</span> <span class="n">loop</span>
</pre></div>
</div>
<p>Here are two loops that test for their termination condition at the beginning of the loop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="n">proceed</span> <span class="p">]</span> <span class="n">whileTrue</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="p">]</span>
<span class="p">[</span> <span class="n">quit</span> <span class="p">]</span> <span class="n">whileFalse</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="p">]</span>
</pre></div>
</div>
<p>In each case, the block that receives the message repeatedly evaluates itself and, if the termination
condition is not yet met, evaluates the argument block. The value returned by both loop expressions
is <code class="docutils literal notranslate"><span class="pre">nil</span></code>.</p>
<p>It is also possible to put the termination test at the end of the loop, ensuring that the loop body is
executed at least once:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="o">...</span> <span class="p">]</span> <span class="n">untilTrue</span><span class="p">:</span> <span class="p">[</span> <span class="n">quit</span> <span class="p">]</span>
<span class="p">[</span> <span class="o">...</span> <span class="p">]</span> <span class="n">untilFalse</span><span class="p">:</span> <span class="p">[</span> <span class="n">proceed</span> <span class="p">]</span>
</pre></div>
</div>
<p>Here is a loop that exits from the middle when quit becomes true:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">|</span> <span class="p">:</span><span class="n">exit</span> <span class="o">|</span> <span class="o">...</span> <span class="n">quit</span> <span class="n">ifTrue</span><span class="p">:</span> <span class="n">exit</span> <span class="o">...</span> <span class="p">]</span> <span class="n">loopExit</span>
</pre></div>
</div>
<p>For the incurably curious: the parameter to the user’s block, supplied by the <code class="docutils literal notranslate"><span class="pre">loopExit</span></code> method, is simply a block that
does a return from the <code class="docutils literal notranslate"><span class="pre">loopExit</span></code> method. Thus, the loop terminates when <code class="docutils literal notranslate"><span class="pre">exit</span> <span class="pre">value</span></code> is evaluated. The constructs
<code class="docutils literal notranslate"><span class="pre">loopExitValue</span></code>, <code class="docutils literal notranslate"><span class="pre">exit</span></code>, and <code class="docutils literal notranslate"><span class="pre">exitValue</span></code> are implemented in a similar manner.</p>
<p>The value returned by the overall <code class="docutils literal notranslate"><span class="pre">[...]</span> <span class="pre">loopExit</span></code> expression is <code class="docutils literal notranslate"><span class="pre">nil</span></code>. Here is a loop expression
that exits and evaluates to a value determined by the programmer when quit becomes true:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">|</span> <span class="p">:</span><span class="n">exit</span> <span class="o">|</span> <span class="o">...</span> <span class="n">quit</span> <span class="n">ifTrue</span><span class="p">:</span> <span class="p">[</span> <span class="n">exit</span> <span class="n">value</span><span class="p">:</span> <span class="n">expr</span> <span class="p">]</span> <span class="p">]</span> <span class="n">loopExitValue</span>
</pre></div>
</div>
<p>Module: block</p>
</section>
<section id="block-exits">
<h2><span class="section-number">4.3.3. </span>Block Exits<a class="headerlink" href="#block-exits" title="Link to this heading">¶</a></h2>
<p>It is sometimes convenient to exit a block early, without executing its remaining statements. The
following constructs support this behavior:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">|</span> <span class="p">:</span><span class="n">exit</span> <span class="o">|</span> <span class="o">...</span> <span class="n">quit</span> <span class="n">ifTrue</span><span class="p">:</span> <span class="n">exit</span> <span class="o">...</span> <span class="p">]</span> <span class="n">exit</span>
<span class="p">[</span><span class="o">|</span> <span class="p">:</span><span class="n">exit</span> <span class="o">|</span> <span class="o">...</span> <span class="n">quit</span> <span class="n">ifTrue</span><span class="p">:</span> <span class="p">[</span> <span class="n">exit</span> <span class="n">value</span><span class="p">:</span> <span class="n">expr</span> <span class="p">]</span> <span class="o">...</span> <span class="p">]</span> <span class="n">exitValue</span>
</pre></div>
</div>
<p>The first expression evaluates to nil if the block exits early; the second allows the programmer to
define the expression’s value when the block exits early. Note: These constructs should not be confused
with their looping counterparts <code class="docutils literal notranslate"><span class="pre">loopExit</span></code> and <code class="docutils literal notranslate"><span class="pre">loopExitValue</span></code>.</p>
<p>Module: block</p>
</section>
<section id="other-block-behavior">
<h2><span class="section-number">4.3.4. </span>Other Block Behavior<a class="headerlink" href="#other-block-behavior" title="Link to this heading">¶</a></h2>
<p>Blocks have some other useful behavior:</p>
<blockquote>
<div><ul class="simple">
<li><p>One can determine the time in milliseconds required to execute a block using various ways of measuring time using the messages <code class="docutils literal notranslate"><span class="pre">userTime</span></code>, <code class="docutils literal notranslate"><span class="pre">systemTime</span></code>, <code class="docutils literal notranslate"><span class="pre">cpuTime</span></code>, and <code class="docutils literal notranslate"><span class="pre">realTime</span></code>.</p></li>
<li><p>One can profile the execution of a block using the messages <code class="docutils literal notranslate"><span class="pre">profile</span></code> and <code class="docutils literal notranslate"><span class="pre">flatProfile</span></code>. <code class="docutils literal notranslate"><span class="pre">profile</span></code> prints out the source level call graph annotated with call site and timing information   whereas <code class="docutils literal notranslate"><span class="pre">flatProfile</span></code> prints out a flat profile sorted by module.</p></li>
<li><p>The message <code class="docutils literal notranslate"><span class="pre">countSends</span></code> will collect lookup statistics during a block execution.</p></li>
</ul>
</div></blockquote>
<p>Any object that inherits from the lobby can be passed to a method that expects a block; behavior in <code class="docutils literal notranslate"><span class="pre">defaultBehavior</span></code> makes the object behave like a block that evaluates to that object.</p>
<p>Module: block</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="numbers.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">4.4. </span>Numbers and Time</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="roots.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">4.2. </span>The Roots of Behavior</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Russell Allen (Ed.)
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">4.3. Blocks, Booleans, and Control Structures</a><ul>
<li><a class="reference internal" href="#booleans-and-conditionals">4.3.1. Booleans and Conditionals</a></li>
<li><a class="reference internal" href="#loops">4.3.2. Loops</a></li>
<li><a class="reference internal" href="#block-exits">4.3.3. Block Exits</a></li>
<li><a class="reference internal" href="#other-block-behavior">4.3.4. Other Block Behavior</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options%EF%B9%96v=db884f6e.js"></script>
    <script src="_static/doctools%EF%B9%96v=9a2dae69.js"></script>
    <script src="_static/sphinx_highlight%EF%B9%96v=dc90522c.js"></script>
    <script src="_static/scripts/furo%EF%B9%96v=5fa4622c.js"></script>
    </body>
</html>