<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>PLOT: Enumeration Types</title></head><body><banner><center><h1>Programming Language for Old Timers</h1><br>by David A. Moon<br>February 2006 .. September 2008<br></center><br>Comments and criticisms to dave underscore moon atsign alum dot mit dot edu.<br><hr><br><P align=center><A HREF="page-55.html">Previous page</A>&nbsp;&nbsp;&nbsp;<A HREF="index.html">Table of Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="page-57.html">Next page</A></P><BR><h2>Enumeration Types</h2><P>Traditionally Lisp-like languages have just used symbols (simple-names in PLOT) torepresent enumeration types.  However, if you wanted to define enumeration typeswith type checking, you could easily add support for Java-style enumeration typesusing macros.<P>This would allow writing code like:<PRE>defenum color  red  blue  greendefenum fancy-color extends: color  pink  turqoise  tealdef f(c is color) ....def f(i is integer) f(fancy-color(i))</PRE><P>The following macro is sufficient:<PRE>defmacro defenum ?classname is name [ extends: ?superclassname is name ]                 { ^ ?choice is name }+ =&gt;  def choices-name = name(classname + "-values", classname)  def constructor = name("%make-" + classname, classname)  def indices = range(0, length(choice) - 1)  def classdef = if superclassname                    `defclass ?classname constructor: ?constructor(name, index)                                         is ?superclassname(name, index)`                  else                    `defclass ?classname constructor: ?constructor(name, index)                       name is name = name                       index is integer = index`  `do     ?classdef     { def ?choice = ?constructor(#?choice, ?indices) &amp; ^ }*     def ?choices-name = list( { ?choice &amp;, }* )     def ?classname(index is integer)       ?choices-name[index]`</PRE><P>This might be done a little differently if PLOT supported metaclasses.  The listof enumeration values might be kept in a slot of the class instead of in aseparate definition with a conventional name suffixed with "-value".<P><P><BR><P align=center><A HREF="page-55.html">Previous page</A>&nbsp;&nbsp;&nbsp;<A HREF="index.html">Table of Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="page-57.html">Next page</A></P><BR><br></body></html>