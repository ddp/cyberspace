<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>PLOT: Expression Syntax</title></head><body><banner><center><h1>Programming Language for Old Timers</h1><br>by David A. Moon<br>February 2006 .. September 2008<br></center><br>Comments and criticisms to dave underscore moon atsign alum dot mit dot edu.<br><hr><br><P align=center><A HREF="page-26.html">Previous page</A>&nbsp;&nbsp;&nbsp;<A HREF="index.html">Table of Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="page-28.html">Next page</A></P><BR><h2>Expression Syntax</h2><P>The syntax of expressions can be explained notionally as:<P><PRE>defsyntax expression  ?lhs is unit { ~^ ?:infix-operator ?rhs is unit | ~^ ?:infix-macro ... }* =&gt; ...defparser unit  { ?:prefix-operator }* { ?:variable | ?:literal | ?:macro-call | ?:expression } =&gt; ...</PRE><P>However, it can't really be defined this way because operator precedence andassociativity must be used to resolve how the infix-operators and units in anexpression roll up into invocations, and to resolve the infinite recursion ofexpression -&gt; unit -&gt; expression.  The definition shown above is ambiguous.<P>Note that because of the infix/prefix operator ambiguity the syntax does notallow two expressions in a row, except when separated by a newline.  Hencethe ~^ in expression syntax, which means no newline is allowed here.<P>Unlike many languages, any name (whether punctuation or not) can be defined as an operator.There is no restriction to a built-in set of operators such as +, -, etc.<P>The syntactic types used but not defined above are as follows.  All of thesetypes are in the compiler module.<P><TABLE cellspacing="20"><col width="25%" align="left" valign="top"/><col/><TR><TD align="left" valign="top">infix-operator</TD><TD>a name with a visible constant definitionthat is an operator that permits infix calls.</TD></TR><TR><TD align="left" valign="top">prefix-operator</TD><TD>a name with a visible constant definitionthat is an operator that permits prefix calls.</TD></TR><TR><TD align="left" valign="top">variable</TD><TD>a name that is not punctuation and is notvisibly defined as an operator or macro,or else a \ followed by any name (including punctuation) or string.We say "variable" although often this will have a fixeddefinition, i.e. does not allow its value to be changedby assignment.</TD></TR><TR><TD align="left" valign="top">literal</TD><TD>a self-quoting literal number, character, or string.</TD></TR><TR><TD align="left" valign="top">macro-call</TD><TD>a name with a visible constant definitionthat is either a macro or an operator that is a prefix macro,followed by the idiosyncratic syntax parsed by that macro.</TD></TR><TR><TD align="left" valign="top">infix-macro</TD><TD>a name with a visible constant definitionthat is an operator that is an infix macro.  The ...in the defsyntax stands for the idiosyncratic syntax parsedby that macro when called with the left-hand-side and a token stream.</TD></TR></TABLE><P>Some expressions are informally called "statements."  There is no differencebetween statements and other expressions in where they can appear in programs.Like any expression, a statement returns one or more values when executed.It is just a convenient classification, especially for expressions that arecustomarily executed for their side-effects rather than their value.<P><P><BR><P align=center><A HREF="page-26.html">Previous page</A>&nbsp;&nbsp;&nbsp;<A HREF="index.html">Table of Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="page-28.html">Next page</A></P><BR><br></body></html>