%!PS-Adobe-3.0
%%BoundingBox: 24 24 571 818
%%Title: Enscript Output
%%For: Derrell Piper
%%Creator: GNU Enscript 1.6.6
%%CreationDate: Fri Jan  9 12:07:50 2026
%%Orientation: Portrait
%%Pages: (atend)
%%DocumentMedia: A4 595 842 0 () ()
%%DocumentNeededResources: (atend)
%%EndComments
%%BeginProlog
%%BeginResource: procset Enscript-Prolog 1.6 6
%
% Procedures.
%

/_S {	% save current state
  /_s save def
} def
/_R {	% restore from saved state
  _s restore
} def

/S {	% showpage protecting gstate
  gsave
  showpage
  grestore
} bind def

/MF {	% fontname newfontname -> -	make a new encoded font
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  % insert only valid encoding vectors
  encoding_vector length 256 eq {
    newfont /Encoding encoding_vector put
  } if

  newfontname newfont definefont pop
} def

/MF_PS { % fontname newfontname -> -	make a new font preserving its enc
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  newfontname newfont definefont pop
} def

/SF { % fontname width height -> -	set a new font
  /height exch def
  /width exch def

  findfont
  [width 0 0 height 0 0] makefont setfont
} def

/SUF { % fontname width height -> -	set a new user font
  /height exch def
  /width exch def

  /F-gs-user-font MF
  /F-gs-user-font width height SF
} def

/SUF_PS { % fontname width height -> -	set a new user font preserving its enc
  /height exch def
  /width exch def

  /F-gs-user-font MF_PS
  /F-gs-user-font width height SF
} def

/M {moveto} bind def
/s {show} bind def

/Box {	% x y w h -> -			define box path
  /d_h exch def /d_w exch def /d_y exch def /d_x exch def
  d_x d_y  moveto
  d_w 0 rlineto
  0 d_h rlineto
  d_w neg 0 rlineto
  closepath
} def

/bgs {	% x y height blskip gray str -> -	show string with bg color
  /str exch def
  /gray exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    gray setgray
    fill
  grestore
  x y M str s
} def

/bgcs { % x y height blskip red green blue str -> -  show string with bg color
  /str exch def
  /blue exch def
  /green exch def
  /red exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    red green blue setrgbcolor
    fill
  grestore
  x y M str s
} def

% Highlight bars.
/highlight_bars {	% nlines lineheight output_y_margin gray -> -
  gsave
    setgray
    /ymarg exch def
    /lineheight exch def
    /nlines exch def

    % This 2 is just a magic number to sync highlight lines to text.
    0 d_header_y ymarg sub 2 sub translate

    /cw d_output_w cols div def
    /nrows d_output_h ymarg 2 mul sub lineheight div cvi def

    % for each column
    0 1 cols 1 sub {
      cw mul /xp exch def

      % for each rows
      0 1 nrows 1 sub {
        /rn exch def
        rn lineheight mul neg /yp exch def
        rn nlines idiv 2 mod 0 eq {
	  % Draw highlight bar.  4 is just a magic indentation.
	  xp 4 add yp cw 8 sub lineheight neg Box fill
	} if
      } for
    } for

  grestore
} def

% Line highlight bar.
/line_highlight {	% x y width height gray -> -
  gsave
    /gray exch def
    Box gray setgray fill
  grestore
} def

% Column separator lines.
/column_lines {
  gsave
    .1 setlinewidth
    0 d_footer_h translate
    /cw d_output_w cols div def
    1 1 cols 1 sub {
      cw mul 0 moveto
      0 d_output_h rlineto stroke
    } for
  grestore
} def

% Column borders.
/column_borders {
  gsave
    .1 setlinewidth
    0 d_footer_h moveto
    0 d_output_h rlineto
    d_output_w 0 rlineto
    0 d_output_h neg rlineto
    closepath stroke
  grestore
} def

% Do the actual underlay drawing
/draw_underlay {
  ul_style 0 eq {
    ul_str true charpath stroke
  } {
    ul_str show
  } ifelse
} def

% Underlay
/underlay {	% - -> -
  gsave
    0 d_page_h translate
    d_page_h neg d_page_w atan rotate

    ul_gray setgray
    ul_font setfont
    /dw d_page_h dup mul d_page_w dup mul add sqrt def
    ul_str stringwidth pop dw exch sub 2 div ul_h_ptsize -2 div moveto
    draw_underlay
  grestore
} def

/user_underlay {	% - -> -
  gsave
    ul_x ul_y translate
    ul_angle rotate
    ul_gray setgray
    ul_font setfont
    0 0 ul_h_ptsize 2 div sub moveto
    draw_underlay
  grestore
} def

% Page prefeed
/page_prefeed {		% bool -> -
  statusdict /prefeed known {
    statusdict exch /prefeed exch put
  } {
    pop
  } ifelse
} def

% Wrapped line markers
/wrapped_line_mark {	% x y charwith charheight type -> -
  /type exch def
  /h exch def
  /w exch def
  /y exch def
  /x exch def

  type 2 eq {
    % Black boxes (like TeX does)
    gsave
      0 setlinewidth
      x w 4 div add y M
      0 h rlineto w 2 div 0 rlineto 0 h neg rlineto
      closepath fill
    grestore
  } {
    type 3 eq {
      % Small arrows
      gsave
        .2 setlinewidth
        x w 2 div add y h 2 div add M
        w 4 div 0 rlineto
        x w 4 div add y lineto stroke

        x w 4 div add w 8 div add y h 4 div add M
        x w 4 div add y lineto
	w 4 div h 8 div rlineto stroke
      grestore
    } {
      % do nothing
    } ifelse
  } ifelse
} def

% EPSF import.

/BeginEPSF {
  /b4_Inc_state save def    		% Save state for cleanup
  /dict_count countdictstack def	% Count objects on dict stack
  /op_count count 1 sub def		% Count objects on operand stack
  userdict begin
  /showpage { } def
  0 setgray 0 setlinecap
  1 setlinewidth 0 setlinejoin
  10 setmiterlimit [ ] 0 setdash newpath
  /languagelevel where {
    pop languagelevel
    1 ne {
      false setstrokeadjust false setoverprint
    } if
  } if
} bind def

/EndEPSF {
  count op_count sub { pos } repeat	% Clean up stacks
  countdictstack dict_count sub { end } repeat
  b4_Inc_state restore
} bind def

% Check PostScript language level.
/languagelevel where {
  pop /gs_languagelevel languagelevel def
} {
  /gs_languagelevel 1 def
} ifelse
%%EndResource
%%BeginResource: procset Enscript-Encoding-88591 1.6 6
/encoding_vector [
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclam       	/quotedbl     	/numbersign   	
/dollar       	/percent      	/ampersand    	/quoteright   	
/parenleft    	/parenright   	/asterisk     	/plus         	
/comma        	/hyphen       	/period       	/slash        	
/zero         	/one          	/two          	/three        	
/four         	/five         	/six          	/seven        	
/eight        	/nine         	/colon        	/semicolon    	
/less         	/equal        	/greater      	/question     	
/at           	/A            	/B            	/C            	
/D            	/E            	/F            	/G            	
/H            	/I            	/J            	/K            	
/L            	/M            	/N            	/O            	
/P            	/Q            	/R            	/S            	
/T            	/U            	/V            	/W            	
/X            	/Y            	/Z            	/bracketleft  	
/backslash    	/bracketright 	/asciicircum  	/underscore   	
/quoteleft    	/a            	/b            	/c            	
/d            	/e            	/f            	/g            	
/h            	/i            	/j            	/k            	
/l            	/m            	/n            	/o            	
/p            	/q            	/r            	/s            	
/t            	/u            	/v            	/w            	
/x            	/y            	/z            	/braceleft    	
/bar          	/braceright   	/tilde        	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclamdown   	/cent         	/sterling     	
/currency     	/yen          	/brokenbar    	/section      	
/dieresis     	/copyright    	/ordfeminine  	/guillemotleft	
/logicalnot   	/hyphen       	/registered   	/macron       	
/degree       	/plusminus    	/twosuperior  	/threesuperior	
/acute        	/mu           	/paragraph    	/bullet       	
/cedilla      	/onesuperior  	/ordmasculine 	/guillemotright	
/onequarter   	/onehalf      	/threequarters	/questiondown 	
/Agrave       	/Aacute       	/Acircumflex  	/Atilde       	
/Adieresis    	/Aring        	/AE           	/Ccedilla     	
/Egrave       	/Eacute       	/Ecircumflex  	/Edieresis    	
/Igrave       	/Iacute       	/Icircumflex  	/Idieresis    	
/Eth          	/Ntilde       	/Ograve       	/Oacute       	
/Ocircumflex  	/Otilde       	/Odieresis    	/multiply     	
/Oslash       	/Ugrave       	/Uacute       	/Ucircumflex  	
/Udieresis    	/Yacute       	/Thorn        	/germandbls   	
/agrave       	/aacute       	/acircumflex  	/atilde       	
/adieresis    	/aring        	/ae           	/ccedilla     	
/egrave       	/eacute       	/ecircumflex  	/edieresis    	
/igrave       	/iacute       	/icircumflex  	/idieresis    	
/eth          	/ntilde       	/ograve       	/oacute       	
/ocircumflex  	/otilde       	/odieresis    	/divide       	
/oslash       	/ugrave       	/uacute       	/ucircumflex  	
/udieresis    	/yacute       	/thorn        	/ydieresis    	
] def
%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Courier
/HFpt_w 10 def
/HFpt_h 10 def
/Courier-Bold /HF-gs-font MF
/HF /HF-gs-font findfont [HFpt_w 0 0 HFpt_h 0 0] makefont def
/Courier /F-gs-font MF
/F-gs-font 10 10 SF
/#copies 1 def
% Pagedevice definitions:
gs_languagelevel 1 gt {
  <<
    /PageSize [595 842] 
  >> setpagedevice
} if
/d_page_w 547 def
/d_page_h 794 def
/d_header_x 0 def
/d_header_y 794 def
/d_header_w 547 def
/d_header_h 0 def
/d_footer_x 0 def
/d_footer_y 0 def
/d_footer_w 547 def
/d_footer_h 0 def
/d_output_w 547 def
/d_output_h 794 def
/cols 1 def
%%EndSetup
%%Page: (1) 1
%%BeginPageSetup
_S
24 24 translate
/pagenum 1 def
/fname (rfc-037-node-roles.txt) def
/fdir (.) def
/ftail (rfc-037-node-roles.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 781 M
(RFC-037: Node Roles and Capabilities) s
5 759 M
(Status: Draft) s
5 748 M
(Date: January 2026) s
5 737 M
(Author: Derrell Piper <ddp@eludom.net>) s
5 726 M
(Implementation: spki/scheme/vault.scm, cyberspace-repl) s
5 704 M
(------------------------------------------------------------------------------) s
5 682 M
(Abstract) s
5 660 M
(This RFC defines functional roles for nodes in a Library of Cyberspace confederation base) s
5 649 M
(d on compute, storage, network, and security capabilities. Roles determine what operation) s
5 638 M
(s a node can perform and how it participates in the distributed system.) s
5 616 M
(------------------------------------------------------------------------------) s
5 594 M
(Terminology) s
5 572 M
(Realm: A node's place in cyberspace. A realm encompasses:) s
5 561 M
(- The node's vault \(local content-addressed object store\)) s
5 550 M
(- The node's principal \(Ed25519 identity\)) s
5 539 M
(- The node's capabilities \(hardware, network, security\)) s
5 528 M
(- The node's objects \(what it stores and serves\)) s
5 506 M
(A realm is local-first and sovereign. The node controls what to share, who to trust, what) s
5 495 M
( to replicate. When nodes federate, their realms overlap - objects flow between them acco) s
5 484 M
(rding to trust relationships.) s
5 462 M
(The hardware manifest stored at .vault/node-hardware declares what kind of place this rea) s
5 451 M
(lm occupies in cyberspace.) s
5 429 M
(------------------------------------------------------------------------------) s
5 407 M
(Motivation) s
5 385 M
(RFC-010 \(Federation Protocol\) defines trust relationships between peers \(publisher, subsc) s
5 374 M
(riber, peer\). However, it does not address functional capabilities - what operations each) s
5 363 M
( node can actually perform based on its hardware and network constraints.) s
5 341 M
(A Raspberry Pi on a solar-powered satellite uplink has different capabilities than a rack) s
5 330 M
(-mounted server in a datacenter. The system should:) s
5 308 M
(1. Self-assess - Nodes should know their own capabilities) s
5 297 M
(2. Declare - Nodes should advertise their role to peers) s
5 286 M
(3. Adapt - Operations should degrade gracefully based on available roles) s
5 275 M
(4. Persist - Role assignments should survive restarts) s
5 253 M
(------------------------------------------------------------------------------) s
5 231 M
(Node Roles) s
5 209 M
(Role Hierarchy) s
5 187 M
(`) s
5 176 M
(                    \342\\224\\214\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224) s
5 165 M
(\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\220) s
5 154 M
(                    \342\\224\\202 COORDINATOR \342\\224\\202  Byzantine consensus, threshold signi) s
5 143 M
(ng) s
5 132 M
(                    \342\\224\\202   \(rare\)    \342\\224\\202  Always-on, high compute) s
5 121 M
(                    \342\\224\\224\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\254) s
5 110 M
(\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\230) s
5 99 M
(                           \342\\224\\202) s
5 88 M
(              \342\\224\\214\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342) s
5 77 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\274\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342) s
5 66 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\220) s
5 55 M
(              \342\\226\274            \342\\226\274            \342\\226\274) s
5 44 M
(       \342\\224\\214\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342) s
5 33 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\220 \342\\224\\214\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224) s
5 22 M
(\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\220 \342\\224\\214\342\\224\\200\342) s
5 11 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200) s
_R
S
%%Page: (2) 2
%%BeginPageSetup
_S
24 24 translate
/pagenum 2 def
/fname (rfc-037-node-roles.txt) def
/fdir (.) def
/ftail (rfc-037-node-roles.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 781 M
(\342\\224\\220) s
5 770 M
(       \342\\224\\202   FULL    \342\\224\\202 \342\\224\\202  WITNESS  \342\\224\\202 \342\\224\\202 ARCHIVER  \342) s
5 759 M
(\\224\\202) s
5 748 M
(       \342\\224\\202   NODE    \342\\224\\202 \342\\224\\202           \342\\224\\202 \342\\224\\202           \342) s
5 737 M
(\\224\\202) s
5 726 M
(       \342\\224\\224\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\254\342\\224\\200\342\\224\\200\342) s
5 715 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\230 \342\\224\\224\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224) s
5 704 M
(\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\230 \342\\224\\224\342\\224\\200\342) s
5 693 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200) s
5 682 M
(\342\\224\\230) s
5 671 M
(             \342\\224\\202) s
5 660 M
(             \342\\226\274) s
5 649 M
(       \342\\224\\214\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342) s
5 638 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\220) s
5 627 M
(       \342\\224\\202   EDGE    \342\\224\\202  Read-only, mobile, intermittent) s
5 616 M
(       \342\\224\\224\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342\\224\\200\342) s
5 605 M
(\\224\\200\342\\224\\200\342\\224\\200\342\\224\\230) s
5 594 M
(`) s
5 572 M
(Role Definitions) s
5 550 M
(| Role | Compute | Storage | Network | Operations |) s
5 539 M
(|------|---------|---------|---------|------------|) s
5 528 M
(| coordinator | High | Medium | Always-on | Byzantine consensus, threshold signing, key c) s
5 517 M
(eremony |) s
5 506 M
(| full | Medium | High | Reliable | All vault operations, replication origin |) s
5 495 M
(| witness | Low | High | Intermittent | Passive storage, hash verification, audit |) s
5 484 M
(| archiver | Low | Maximum | Batch | Cold storage, offline preservation |) s
5 473 M
(| edge | Minimal | Minimal | Sporadic | Read-only sync, mobile access |) s
5 451 M
(Capability Requirements) s
5 429 M
(`scheme) s
5 418 M
(\(node-role-capabilities) s
5 407 M
(  \(coordinator) s
5 396 M
(    \(compute    \(min-cores 4\) \(min-ram-gb 8\)\)) s
5 385 M
(    \(storage    \(min-gb 100\) \(type ssd\)\)) s
5 374 M
(    \(network    \(uptime 0.99\) \(latency-ms 50\)\)) s
5 363 M
(    \(security   \(hsm optional\) \(secure-enclave optional\)\)\)) s
5 341 M
(  \(full) s
5 330 M
(    \(compute    \(min-cores 2\) \(min-ram-gb 4\)\)) s
5 319 M
(    \(storage    \(min-gb 500\) \(type any\)\)) s
5 308 M
(    \(network    \(uptime 0.95\) \(latency-ms 200\)\)) s
5 297 M
(    \(security   \(signing-key required\)\)\)) s
5 275 M
(  \(witness) s
5 264 M
(    \(compute    \(min-cores 1\) \(min-ram-gb 1\)\)) s
5 253 M
(    \(storage    \(min-gb 100\) \(type any\)\)) s
5 242 M
(    \(network    \(uptime 0.50\) \(latency-ms 1000\)\)) s
5 231 M
(    \(security   \(verify-key required\)\)\)) s
5 209 M
(  \(archiver) s
5 198 M
(    \(compute    \(min-cores 1\) \(min-ram-gb 512mb\)\)) s
5 187 M
(    \(storage    \(min-gb 1000\) \(type cold\)\)) s
5 176 M
(    \(network    \(uptime 0.10\) \(batch-ok #t\)\)) s
5 165 M
(    \(security   \(verify-key required\) \(offline-ok #t\)\)\)) s
5 143 M
(  \(edge) s
5 132 M
(    \(compute    \(min-cores 1\) \(min-ram-gb 256mb\)\)) s
5 121 M
(    \(storage    \(min-gb 1\) \(type any\)\)) s
5 110 M
(    \(network    \(uptime 0.01\) \(latency-ms 5000\)\)) s
5 99 M
(    \(security   \(read-only #t\)\)\)\)) s
5 88 M
(`) s
5 66 M
(------------------------------------------------------------------------------) s
5 44 M
(Role Detection) s
5 22 M
(Automatic Probing) s
_R
S
%%Page: (3) 3
%%BeginPageSetup
_S
24 24 translate
/pagenum 3 def
/fname (rfc-037-node-roles.txt) def
/fdir (.) def
/ftail (rfc-037-node-roles.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 781 M
(`scheme) s
5 770 M
(\(define \(node-probe-capabilities\)) s
5 759 M
(  "Probe local system capabilities") s
5 748 M
(  `\(\(compute) s
5 737 M
(     \(cores ,\(get-cpu-cores\)\)) s
5 726 M
(     \(ram-gb ,\(get-ram-gb\)\)) s
5 715 M
(     \(load-avg ,\(get-load-average\)\)\)) s
5 704 M
(    \(storage) s
5 693 M
(     \(available-gb ,\(get-available-storage\)\)) s
5 682 M
(     \(type ,\(detect-storage-type\)\)\)) s
5 671 M
(    \(network) s
5 660 M
(     \(latency-ms ,\(probe-network-latency\)\)) s
5 649 M
(     \(bandwidth-mbps ,\(estimate-bandwidth\)\)) s
5 638 M
(     \(type ,\(detect-network-type\)\)\)  ; ethernet, wifi, cellular, satellite) s
5 627 M
(    \(security) s
5 616 M
(     \(signing-key ,\(has-signing-key?\)\)) s
5 605 M
(     \(verify-key ,\(has-verify-key?\)\)) s
5 594 M
(     \(hsm ,\(has-hsm?\)\)\)\)\)) s
5 583 M
(`) s
5 561 M
(Role Assignment) s
5 539 M
(`scheme) s
5 528 M
(\(define \(node-assign-role capabilities\)) s
5 517 M
(  "Assign role based on probed capabilities") s
5 506 M
(  \(let \(\(compute \(assq 'compute capabilities\)\)) s
5 495 M
(        \(storage \(assq 'storage capabilities\)\)) s
5 484 M
(        \(network \(assq 'network capabilities\)\)\)) s
5 473 M
(    \(cond) s
5 462 M
(     ;; Coordinator: high everything) s
5 451 M
(     \(\(and \(>= \(get-cores compute\) 4\)) s
5 440 M
(           \(>= \(get-ram compute\) 8\)) s
5 429 M
(           \(<= \(get-latency network\) 50\)\)) s
5 418 M
(      'coordinator\)) s
5 396 M
(     ;; Full node: medium compute, high storage) s
5 385 M
(     \(\(and \(>= \(get-cores compute\) 2\)) s
5 374 M
(           \(>= \(get-storage storage\) 500\)\)) s
5 363 M
(      'full\)) s
5 341 M
(     ;; Archiver: low compute, massive storage, batch network) s
5 330 M
(     \(\(and \(>= \(get-storage storage\) 1000\)) s
5 319 M
(           \(eq? \(get-network-type network\) 'batch\)\)) s
5 308 M
(      'archiver\)) s
5 286 M
(     ;; Witness: low compute, decent storage) s
5 275 M
(     \(\(>= \(get-storage storage\) 100\)) s
5 264 M
(      'witness\)) s
5 242 M
(     ;; Edge: everything else) s
5 231 M
(     \(else 'edge\)\)\)\)) s
5 220 M
(`) s
5 198 M
(------------------------------------------------------------------------------) s
5 176 M
(Role Declaration) s
5 154 M
(Local Configuration) s
5 132 M
(`scheme) s
5 121 M
(;; ~/.cyberspace/node-role) s
5 110 M
(\(node-config) s
5 99 M
(  \(role witness\)                    ; Declared role) s
5 88 M
(  \(auto-detect #f\)                  ; Don't override with probed) s
5 77 M
(  \(capabilities                     ; Known constraints) s
5 66 M
(    \(network \(type satellite\)) s
5 55 M
(             \(latency-ms 600\)) s
5 44 M
(             \(bandwidth-mbps 100\)\)\)\)) s
5 33 M
(`) s
5 11 M
(Role Announcement) s
_R
S
%%Page: (4) 4
%%BeginPageSetup
_S
24 24 translate
/pagenum 4 def
/fname (rfc-037-node-roles.txt) def
/fdir (.) def
/ftail (rfc-037-node-roles.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(`scheme) s
5 759 M
(\(define \(node-announce-role\)) s
5 748 M
(  "Announce role to federation peers") s
5 737 M
(  \(let \(\(role \(node-current-role\)\)) s
5 726 M
(        \(caps \(node-probe-capabilities\)\)) s
5 715 M
(        \(key \(vault-config 'signing-key\)\)\)) s
5 704 M
(    \(when key) s
5 693 M
(      \(let \(\(announcement) s
5 682 M
(             `\(node-role-announcement) s
5 671 M
(               \(principal ,\(get-vault-principal key\)\)) s
5 660 M
(               \(role ,role\)) s
5 649 M
(               \(capabilities ,caps\)) s
5 638 M
(               \(timestamp ,\(current-seconds\)\)\)\)\)) s
5 627 M
(        ;; Sign and broadcast) s
5 616 M
(        \(federation-broadcast) s
5 605 M
(         \(sign-announcement announcement key\)\)\)\)\)\)) s
5 594 M
(`) s
5 572 M
(------------------------------------------------------------------------------) s
5 550 M
(Role-Based Operation Constraints) s
5 528 M
(Operation Matrix) s
5 506 M
(| Operation | coordinator | full | witness | archiver | edge |) s
5 495 M
(|-----------|-------------|------|---------|----------|------|) s
5 484 M
(| seal-commit | | | | | |) s
5 473 M
(| seal-release | | | | | |) s
5 462 M
(| seal-archive | | | | | |) s
5 451 M
(| seal-restore | | | | | |) s
5 440 M
(| seal-publish | | | | | |) s
5 429 M
(| seal-subscribe | | | | | |) s
5 418 M
(| seal-synchronize | | | | | |) s
5 407 M
(| seal-verify | | | | | |) s
5 396 M
(| threshold-sign | | | | | |) s
5 385 M
(| byzantine-vote | | | | | |) s
5 374 M
(| key-ceremony | | | | | |) s
5 363 M
(| audit-append | | | | | |) s
5 352 M
(| audit-verify | | | | | |) s
5 330 M
(Graceful Degradation) s
5 308 M
(`scheme) s
5 297 M
(\(define \(node-can-perform? operation\)) s
5 286 M
(  "Check if current role permits operation") s
5 275 M
(  \(let \(\(role \(node-current-role\)\)) s
5 264 M
(        \(required \(operation-required-role operation\)\)\)) s
5 253 M
(    \(role-permits? role required\)\)\)) s
5 231 M
(\(define \(role-permits? actual required\)) s
5 220 M
(  "Check role hierarchy") s
5 209 M
(  \(let \(\(hierarchy '\(coordinator full witness archiver edge\)\)\)) s
5 198 M
(    \(<= \(list-index hierarchy actual\)) s
5 187 M
(        \(list-index hierarchy required\)\)\)\)) s
5 176 M
(`) s
5 154 M
(------------------------------------------------------------------------------) s
5 132 M
(Starlink Considerations) s
5 110 M
(Per RFC-016, the system is optimized for satellite links:) s
5 88 M
(`scheme) s
5 77 M
(\(node-config) s
5 66 M
(  \(role witness\)) s
5 55 M
(  \(network) s
5 44 M
(    \(type satellite\)) s
5 33 M
(    \(provider starlink\)) s
5 22 M
(    \(characteristics) s
5 11 M
(      \(latency-ms 20-40\)           ; Low-earth orbit) s
_R
S
%%Page: (5) 5
%%BeginPageSetup
_S
24 24 translate
/pagenum 5 def
/fname (rfc-037-node-roles.txt) def
/fdir (.) def
/ftail (rfc-037-node-roles.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 781 M
(      \(bandwidth-mbps 100-200\)     ; Bursty) s
5 770 M
(      \(jitter high\)                ; Variable) s
5 759 M
(      \(uptime 0.95\)                ; Weather dependent) s
5 748 M
(      \(data-cap none\)\)\)\)           ; Unlimited for now) s
5 726 M
(;; Satellite-optimized behavior) s
5 715 M
(\(define satellite-mode) s
5 704 M
(  '\(\(batch-sync #t\)                ; Aggregate operations) s
5 693 M
(    \(lazy-pull #t\)                 ; Don't fetch eagerly) s
5 682 M
(    \(compress-always #t\)           ; Minimize transfer) s
5 671 M
(    \(retry-aggressive #t\)          ; Handle drops) s
5 660 M
(    \(heartbeat-interval 300\)\)\)     ; 5 min, not seconds) s
5 649 M
(`) s
5 627 M
(Role Implications for Satellite Nodes) s
5 605 M
(- coordinator: Generally NOT suitable for satellite \(latency too variable for consensus\)) s
5 594 M
(- full: Marginal \(can work with lazy clustering\)) s
5 583 M
(- witness: IDEAL \(passive, tolerates latency\)) s
5 572 M
(- archiver: IDEAL \(batch operations\)) s
5 561 M
(- edge: IDEAL \(intermittent by design\)) s
5 539 M
(------------------------------------------------------------------------------) s
5 517 M
(Implementation) s
5 495 M
(REPL Commands) s
5 473 M
(`scheme) s
5 462 M
(;; Probe and display capabilities) s
5 451 M
(\(node-probe\)) s
5 429 M
(;; Show current role) s
5 418 M
(\(node-role\)) s
5 396 M
(;; Set role explicitly) s
5 385 M
(\(node-role 'witness\)) s
5 363 M
(;; Check if operation permitted) s
5 352 M
(\(node-can? 'threshold-sign\)) s
5 330 M
(;; Announce role to peers) s
5 319 M
(\(node-announce\)) s
5 308 M
(`) s
5 286 M
(Persistence) s
5 264 M
(Role configuration stored in the realm:) s
5 253 M
(`) s
5 242 M
(~/.cyberspace/node-role      ; User override \(global\)) s
5 231 M
(.vault/node-role             ; Realm-specific role) s
5 220 M
(.vault/node-hardware         ; Hardware manifest \(auto-refreshed\)) s
5 209 M
(`) s
5 187 M
(The hardware manifest is automatically updated on REPL startup, declaring the realm's cap) s
5 176 M
(abilities to federated peers.) s
5 154 M
(Audit Trail) s
5 132 M
(Role changes are auditable events:) s
5 121 M
(`scheme) s
5 110 M
(\(audit-entry) s
5 99 M
(  \(type node-role-change\)) s
5 88 M
(  \(timestamp 1736280000\)) s
5 77 M
(  \(from edge\)) s
5 66 M
(  \(to witness\)) s
5 55 M
(  \(reason "Storage expanded"\)) s
5 44 M
(  \(actor #${principal}\)\)) s
5 33 M
(`) s
5 11 M
(------------------------------------------------------------------------------) s
_R
S
%%Page: (6) 6
%%BeginPageSetup
_S
24 24 translate
/pagenum 6 def
/fname (rfc-037-node-roles.txt) def
/fdir (.) def
/ftail (rfc-037-node-roles.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Security Considerations) s
5 748 M
(Role Spoofing) s
5 726 M
(A node could claim a higher role than its capabilities warrant. Mitigations:) s
5 704 M
(1. Capability proofs: Require benchmark results) s
5 693 M
(2. Peer validation: Other nodes can challenge claims) s
5 682 M
(3. Reputation: Track role fulfillment history) s
5 671 M
(4. Threshold trust: Multiple witnesses needed) s
5 649 M
(Role Downgrade Attacks) s
5 627 M
(An attacker could force nodes to operate at lower roles:) s
5 605 M
(1. Signed role declarations: Can't forge) s
5 594 M
(2. Local override: Node controls own role) s
5 583 M
(3. Audit trail: Role changes are logged) s
5 561 M
(------------------------------------------------------------------------------) s
5 539 M
(References) s
5 517 M
(1. RFC-010: Federation Protocol) s
5 506 M
(2. RFC-011: Byzantine Consensus) s
5 495 M
(3. RFC-016: Lazy Clustering) s
5 484 M
(4. RFC-017: Security Considerations) s
5 462 M
(------------------------------------------------------------------------------) s
5 440 M
(Changelog) s
5 418 M
(- 2026-01-07 - Initial draft) s
_R
S
%%Trailer
%%Pages: 6
%%DocumentNeededResources: font Courier-Bold Courier 
%%EOF
