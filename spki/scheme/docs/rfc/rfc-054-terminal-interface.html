<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RFC-054: Terminal Interface Conventions</title>
  <link rel="stylesheet" href="rfc.css">
</head>
<body>
<h1>RFC-054: Terminal Interface Conventions</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>The terminal is for operators. This RFC specifies visual conventions for the Cyberspace REPL: box drawing, tree displays, prompts, color usage, and output formatting. Consistency aids muscle memory.</p>
</section>
<section>
<h2>1. The Operator Interface</h2>
<p>The Cyberspace REPL is for hackers, admins, and operators—people who think in terms of data structures. This interface is deliberately different from the "normie" GUI interface (RFC-053).</p>
<pre>
               CYBERSPACE
                    |
       +------------+------------+
       |                         |
  +----v-----+              +----v-----+
  | Terminal |              | Friendly |
  |   (cs)   | &lt;- this RFC  |   Door   |
  +----------+              +----------+
</pre>
</section>
<section>
<h2>2. Box Drawing</h2>
<h3>2.1 Unicode Box Characters</h3>
<p>Boxes use ASCII characters for web compatibility, Unicode in terminals:</p>
<pre>
+  corner/tee/cross
|  vertical line
-  horizontal line
</pre>
<p>Double-line boxes use = and # for emphasis:</p>
<pre>
#  corner
|  vertical
=  horizontal
</pre>
<h3>2.2 Box Construction Pattern</h3>
<p>Use closures to encapsulate box state:</p>
<pre class="language-scheme">
(define (make-box title w)
  "Create a box drawing closure with given title and width"
  (let ((title-padded (string-append " " title " "))
         (title-len (string-length title-padded))
         (left-pad (quotient (- w title-len) 2))
         (right-pad (- w title-len left-pad))
         (header (string-append "+" (make-string left-pad #\-)
                               title-padded
                               (make-string right-pad #\-) "+\n"))
         (footer (string-append "+" (make-string w #\-) "+\n")))
    (lambda (cmd . args)
      (case cmd
        ((header) header)
        ((footer) footer)
        ((line) (let ((content (if (null? args) "" (car args)))
                       (pad (- w (string-length content) 2)))
                  (string-append "| " content
                                (make-string (max 0 pad) #\space)
                                " |\n")))))))
</pre>
<h3>2.3 Standard Box Widths</h3>
<table>
<tr><th>Context </th><th>Width </th><th>Usage </th></tr>
<tr><td>Compact </td><td>40 </td><td>Small status displays </td></tr>
<tr><td>Standard </td><td>50 </td><td>Most dialogs </td></tr>
<tr><td>Wide </td><td>65 </td><td>Detailed information </td></tr>
</table>
</section>
<section>
<h2>3. Tree Display</h2>
<h3>3.1 Tree Characters</h3>
<pre>
+-  branch with more siblings
+-  final branch (last item)
|   vertical continuation
</pre>
<h3>3.2 Tree Example</h3>
<pre>
hostname - up 3d 12:45:03
+- 10 cores, 64GB, Apple M4
+- 192.168.1.100 / 2001:db8::1...
+- vault: .vault/ (keys) (audit)
</pre>
<h3>3.3 Multi-level Trees</h3>
<pre>
vault (49 objects)
+- archives (3)
|  +- cyberspace-v0.59.tar.gz
+- keys (2)
|  +- starlight - Ed25519
|  +- macmini - Ed25519
+- releases (5)
   +- v0.59 (signed)
</pre>
</section>
<section>
<h2>4. Prompt</h2>
<h3>4.1 Default Prompt</h3>
<p>The default prompt is a simple colon with trailing space:</p>
<pre>
:
</pre>
<p>This echoes the Newton's soup browser prompt.</p>
<h3>4.2 Prompt Variants</h3>
<table>
<tr><th>Context </th><th>Prompt </th><th>Usage </th></tr>
<tr><td>Normal </td><td>:  </td><td>Default </td></tr>
<tr><td>Continuation </td><td>&gt;  </td><td>Multi-line input </td></tr>
<tr><td>Debug </td><td>[n]:  </td><td>In debugger at frame n </td></tr>
</table>
</section>
<section>
<h2>5. Color and Emphasis</h2>
<h3>5.1 VT100 Codes</h3>
<p>Use ANSI/VT100 escape sequences sparingly:</p>
<pre class="language-scheme">
(define vt100-bold    "\x1b[1m")
(define vt100-dim     "\x1b[2m")
(define vt100-normal  "\x1b[0m")
(define vt100-red     "\x1b[31m")
(define vt100-green   "\x1b[32m")
(define vt100-yellow  "\x1b[33m")
(define vt100-blue    "\x1b[34m")
</pre>
<h3>5.2 When to Use Color</h3>
<ul>
<li>Green: Success, completion (✓)</li>
<li>Red: Error, failure (✗)</li>
<li>Yellow: Warning, attention needed</li>
<li>Blue: Informational highlights</li>
<li>Dim: Secondary information</li>
<li>Bold: Headers, important values</li>
</ul>
<h3>5.3 Principle</h3>
<p>Color is enhancement, not information. All output MUST be readable without color (plain terminal, logging, piped output).</p>
</section>
<section>
<h2>6. Status Symbols</h2>
<h3>6.1 Checkmarks and Crosses</h3>
<pre>
[ok]  Success
[!!]  Failure
*     Bullet point
-&gt;    Arrow, implies
</pre>
<h3>6.2 Inline Separators</h3>
<p>For separating items in compact displays (session stats, status lines):</p>
<pre>
-  dash separator
|  pipe (more intrusive)
v  down (bytes/data in)
^  up (bytes/data out)
</pre>
<p>Example session summary:</p>
<pre>
Session: 4m 24s - 2 syncs - 3 seals - v1.2K ^856B
</pre>
<h3>6.3 Sparklines</h3>
<p>For activity visualization over time, eight ASCII levels:</p>
<pre>
 ._,-~=+#
</pre>
<p>Map to normalized data:</p>
<pre class="language-scheme">
(define sparkline-chars '#(" " "." "_" "," "-" "~" "=" "+" "#"))
</pre>
</section>
</body>
</html>
