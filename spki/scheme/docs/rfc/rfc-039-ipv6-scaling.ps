%!PS-Adobe-3.0
%%Creator: groff version 1.23.0
%%CreationDate: Sun Jan 11 13:27:09 2026
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%+ font Courier
%%DocumentSuppliedResources: procset grops 1.23 0
%%Pages: 10
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.23 0
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
% The ASCII code of the space character.
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
% name size font SF -
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
% name a c d font MF -
/MF{
findfont
[5 2 roll
0 3 1 roll % b
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
% Enable manual feed.
% MANUAL -
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
% Guess the page length.
% This assumes that the imageable area is vertically centered on the page.
% PLG - length
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
% BP -
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
DEFS/BPhook known{DEFS begin BPhook end}if
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
% centerx centery radius startangle endangle DA -
/DA{
newpath arcn stroke
}bind def
% x y SN - x' y'
% round a position to nearest (pixel + (.25,.25))
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
% endx endy startx starty DL -
% we round the endpoints of the line, so that parallel horizontal
% and vertical lines will appear even
/DL{
SN
moveto
SN
lineto stroke
}bind def
% centerx centery radius DC -
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
%  width height centerx centery DE -
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
% these are for splines
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
% fill the last path
% r g b Fr -
/Fr{
setrgbcolor fill
}bind def
% c m y k Fk -
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
% g Fg -
/Fg{
setgray fill
}bind def
% fill with the "current color"
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
% new_font_name encoding_vector old_font_name RE -
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne
2 index/UniqueID ne
and
{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
% hpos vpos EBEGIN -
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
% llx lly newwid wid newht ht newllx newlly PBEGIN -
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
% set the graphics state to default values
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
%
%  Any included setpagedevice should be ignored.
%  See: http://www.w-beer.de/doc/ps/.
%
/setpagedevice{}def
mark
}bind def
/PEND{
cleartomark
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
%%IncludeResource: font Times-Roman
%%IncludeResource: font Courier
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Courier@0 ENC0/Courier RE/Times-Roman@0 ENC0/Times-Roman RE
/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Bold@0 SF(RFC-039: Scaling Ar)204.054 123 Q(chitectur)-.216
E 3(ef)-.216 G(or IPv6)-3.3 E/F1 10/Times-Italic@0 SF(Libr)260.85 159 Q
(ary of Cyber)-.15 E(space)-.1 E/F2 10/Times-Roman@0 SF(2026)296 177 Q
F1(ABSTRA)282.535 213 Q(CT)-.3 E/F3 10/Times-Bold@0 SF 2.5(1. Abstract)
72 261 R F2 .163(This RFC de\214nes the architectural changes required \
to scale Cyberspace from a git-back)72 276.6 R .162
(ed prototype to a nati)-.1 F .462 -.15(ve d)-.25 H(is-).15 E(trib)72
288.6 Q .717
(uted system capable of operating at IPv6 scale \(billions of realms, e)
-.2 F .717(xabytes of content\). Git becomes an e)-.15 F(xport)-.15 E
(format; the v)72 300.6 Q(ault becomes the source of truth.)-.25 E F3
2.5(2. T)72 324.6 R(erminology)-.92 E F2 .599(Realm: A node')72 340.2 R
3.099(sp)-.55 G .599(lace in c)-3.099 F .598(yberspace - its v)-.15 F
.598(ault, principal, capabilities, and objects. Each realm is so)-.25 F
-.15(ve)-.15 G .598(reign: local-).15 F(\214rst, controlled by its oper\
ator. Realms federate by choice, sharing objects according to trust rel\
ationships.)72 352.2 Q -1.11(Va)72 367.8 S .128
(ult: The local content-addressed object store \(.v)1.11 F .129
(ault/\). The v)-.25 F .129(ault IS the realm')-.25 F 2.629(ss)-.55 G
.129(torage - all objects, catalogs, audit)-2.629 F
(trails, and con\214guration li)72 379.8 Q .3 -.15(ve h)-.25 H(ere.).15
E 1.443(Principal: A node')72 395.4 R 3.943(sc)-.55 G 1.443
(ryptographic identity \(Ed25519 public k)-3.943 F -.15(ey)-.1 G 1.442
(\). The principal identi\214es the realm to peers and).15 F
(signs its objects.)72 407.4 Q .213(At IPv6 scale, c)72 423 R .213
(yberspace consists of billions of realms, each occup)-.15 F .214
(ying its o)-.1 F .214(wn address space, each so)-.25 F -.15(ve)-.15 G
.214(reign, each).15 F(choosing what to share and with whom.)72 435 Q F3
2.5(3. Moti)72 459 R -.1(va)-.1 G(tion).1 E F2 .257(Git serv)72 474.6 R
.257(ed as an e)-.15 F .257(xcellent prototype substrate: - Content-add\
ressed objects \(proof of concept\) - Merkle tree inte)-.15 F(grity)-.15
E(\(v)72 486.6 Q
(alidates the model\) - Ubiquitous tooling \(bootstrap adoption\))-.25 E
.284(Git cannot scale to IPv6: - Full history on e)72 502.2 R -.15(ve)
-.25 G .285(ry clone - Repository as replication unit \(too coarse\) - \
SHA-1 \(crypto-).15 F(graphically brok)72 514.2 Q(en\) - No nati)-.1 E
.3 -.15(ve f)-.25 H(ederation or disco).15 E -.15(ve)-.15 G(ry - Mer).15
E(ge semantics are wrong model)-.18 E
(The internet has 2^128 addresses. Cyberspace should use them.)72 529.8
Q F3 2.5(4. Design)72 553.8 R(Principles)2.5 E/F4 8/Courier@0 SF
(1. Objects, not repositories)108 571.8 Q(2. Pull, not push)108 583.8 Q
(3. Lazy, not eager)108 595.8 Q(4. Local-first, federate-second)108
607.8 Q(5. Trust math, not infrastructure)108 619.8 Q F3 2.5
(5. Content-Addr)72 637.8 R(essed Object Stor)-.18 E(e)-.18 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(5.1. Storage)72 84 R(Model)2.5 E/F2 8/Courier@0 SF(.vault/)108 102 Q
(objects/)117.6 114 Q 14.4(sha512-a1b2c3.../ #)127.2 126 R
(First 8 chars as directory)4.8 E 14.4(a1b2c3d4e5f6... #)136.8 138 R
(Full hash as filename \(S-expression\))4.8 E(catalog/)117.6 150 Q 33.6
(manifest.sexp #)127.2 162 R(Vault catalog object)4.8 E 48(bloom.sexp #)
127.2 174 R(Bloom filter object)4.8 E 57.6(indices/ #)127.2 186 R
(Secondary index objects)4.8 E(by-signer.sexp)136.8 198 Q(by-type.sexp)
136.8 210 Q(chunks/)117.6 222 Q 38.4(sha512-xxxx/ #)127.2 234 R
(Chunked large objects)4.8 E(audit/)117.6 246 Q 52.8(head.sexp #)127.2
258 R(Current audit chain head)4.8 E 67.2(chain/ #)127.2 270 R
(Audit entries \(hash-addressed\))4.8 E F1 2.5(5.2. Object)72 288 R -.25
(Fo)2.5 G(rmat).25 E F2(\(cyberspace-object)108 306 Q(\(version 1\))
117.6 318 Q(\(type blob|tree|manifest|cert|audit\))117.6 330 Q
(\(size 1048576\))117.6 342 Q(\(compression zstd|none\))117.6 354 Q
(\(hash "sha512:a1b2c3..."\))117.6 366 Q
(\(chunks \("sha512:..." "sha512:..." ...\)\))117.6 378 Q 4.8(;I)9.6 G
4.8(fc)-4.8 G(hunked)-4.8 E(\(signature "ed25519:..."\))117.6 390 Q
(\(timestamp 1736300000\)\))117.6 402 Q F1 2.5(5.3. Chunking)72 420 R
(Strategy)2.5 E F0(Lar)72 435.6 Q(ge objects split at content-de\214ned\
 boundaries \(Rabin \214ngerprinting\):)-.18 E F2
(Target chunk: 64 KB \(Starlink-optimized\))108 453.6 Q(Min chunk:)108
465.6 Q(16 KB)19.2 E(Max chunk:)108 477.6 Q(256 KB)14.4 E(Benefits:)108
501.6 Q 4.8(-D)117.6 513.6 S(eduplication across objects)-4.8 E 4.8(-P)
117.6 525.6 S(artial sync \(fetch only missing chunks\))-4.8 E 4.8(-R)
117.6 537.6 S(esumable transfers)-4.8 E 4.8(-E)117.6 549.6 S
(fficient diff)-4.8 E F1 2.5(5.4. Hash)72 567.6 R(Function)2.5 E F2
(SHA-512 everywhere.)108 585.6 Q
(Not SHA-256: We have the bits, use them.)108 609.6 Q
(Not SHA-1: Broken.)108 621.6 Q(Not BLAKE3: Less analyzed, marginal spe\
ed gain irrelevant at network latency.)108 633.6 Q(SHA-512 is:)108 657.6
Q 4.8(-F)117.6 669.6 S(IPS certified \(GovCloud path\))-4.8 E 4.8(-5)
117.6 681.6 S 4.8(0y)-4.8 G(ears of cryptanalysis)-4.8 E 4.8(-H)117.6
693.6 S(ardware accelerated)-4.8 E 4.8(-A)117.6 705.6 S
(lready in use \(audit trail, signatures\))-4.8 E 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(6. Catalog)72 84 R(and Query)2.5 E F0
(The soup IS the catalog. No SQL. Objects are S-e)72 99.6 Q
(xpressions, queries are pattern matching.)-.15 E F1 2.5(6.1. The)72
123.6 R(Soup Query Model)2.5 E/F2 8/Courier@0 SF
(;; Find objects by pattern)108 141.6 Q(\(soup-query)108 153.6 Q
('\(cyberspace-object)117.6 165.6 Q(\(type blob\))127.2 177.6 Q
(\(signer "ed25519:alice..."\))127.2 189.6 Q 110.4(?rest\)\) ;)127.2
201.6 R(Match any object signed by Alice)4.8 E
(;; Find by hash \(direct lookup\))108 225.6 Q
(\(soup-fetch "sha512:a1b2c3..."\))108 237.6 Q 4.8(;O)19.2 G
(\(1\) content-addressed)-4.8 E(;; Find by type)108 261.6 Q
(\(soup-query '\(cyberspace-object \(type cert\) ?rest\)\))108 273.6 Q
(;; Find by time range)108 297.6 Q(\(soup-query-range)108 309.6 Q
(type: 'audit)117.6 321.6 Q(from: 1736000000)117.6 333.6 Q 9.6
(to: 1736100000\))117.6 345.6 R
(;; Cursor-based iteration for large result sets)108 369.6 Q
(\(soup-cursor)108 381.6 Q('\(cyberspace-object \(type ?\) ?rest\))117.6
393.6 Q(batch: 100\))117.6 405.6 Q F1 2.5(6.2. Object)72 423.6 R
(Catalog)2.5 E F0
(The catalog is itself an object in the soup - a manifest of what the v)
72 439.2 Q(ault contains:)-.25 E F2(\(vault-catalog)108 457.2 Q
(\(version 1\))117.6 469.2 Q(\(realm "ed25519:principal..."\))117.6
481.2 Q(\(object-count 150000\))117.6 493.2 Q(\(types)117.6 505.2 Q
(\(blob 100000\))127.2 517.2 Q(\(tree 30000\))127.2 529.2 Q
(\(cert 15000\))127.2 541.2 Q(\(audit 5000\)\))127.2 553.2 Q
(\(bloom-filter #${...}\))117.6 565.2 Q 4.8(;F)52.8 G
(ast existence check)-4.8 E(\(updated 1736400000\)\))117.6 577.2 Q F1
2.5(6.3. Bloom)72 595.2 R(Filter)2.5 E 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R -.15(Fa)72 84 S(st e)
.15 E(xistence check before netw)-.15 E(ork round-trip:)-.1 E/F1 8
/Courier@0 SF(\(define \(soup-maybe-contains? hash\))108 102 Q
("Check bloom filter - false means definitely not, true means maybe")
117.6 114 Q(\(let \(\(catalog \(soup-fetch-catalog\)\)\))117.6 126 Q
(\(bloom-test \(catalog-bloom catalog\) hash\)\)\))127.2 138 Q
(;; Bloom parameters)108 162 Q(\(bloom-filter)108 174 Q
(\(capacity 10000000\))117.6 186 Q 4.8(;1)67.2 G(0M objects)-4.8 E
(\(false-positive 0.001\))117.6 198 Q 4.8(;0)52.8 G(.1% FP rate)-4.8 E
(\(bits #${...}\)\))117.6 210 Q/F2 10/Times-Bold@0 SF 2.5(6.4. A)72 228
R(udit T)-.5 E(rail)-.74 E F0
(The audit trail is a hash-chain of objects in the soup:)72 243.6 Q F1
(\(audit-entry)108 261.6 Q(\(sequence 12345\))117.6 273.6 Q
(\(timestamp 1736300000\))117.6 285.6 Q(\(lamport 67890\))117.6 297.6 Q
(\(actor "ed25519:subject..."\))117.6 309.6 Q
(\(action \(read "sha512:object..."\)\))117.6 321.6 Q
(\(previous "sha512:prev-entry..."\))117.6 333.6 Q 4.8(;C)9.6 G
(hain link)-4.8 E(\(signature "ed25519:auditor..."\)\))117.6 345.6 Q
(;; Query audit by walking the chain)108 369.6 Q
(\(define \(audit-query actor from-seq\))108 381.6 Q
("Walk audit chain, filter by actor")117.6 393.6 Q(\(soup-chain-walk)
117.6 405.6 Q(start: \(audit-head\))127.2 417.6 Q
(filter: \(lambda \(entry\))127.2 429.6 Q
(\(equal? \(entry-actor entry\) actor\)\))175.2 441.6 Q
(from: from-seq\)\))127.2 453.6 Q F2 2.5(6.5. Secondary)72 471.6 R
(Indices)2.5 E F0 -.15(Fo)72 487.2 S 2.5(rq).15 G(ueries that can')-2.5
E 2.5(tu)-.18 G(se content-addressing, the soup maintains lightweight i\
ndices as objects:)-2.5 E F1(\(soup-index)108 505.2 Q
(\(name "by-signer"\))117.6 517.2 Q(\(key-type principal\))117.6 529.2 Q
(\(entries)117.6 541.2 Q
(\(\("ed25519:alice..." \("sha512:obj1" "sha512:obj2" ...\)\))127.2
553.2 Q(\("ed25519:bob..." \("sha512:obj3" "sha512:obj4" ...\)\)\)\)\))
132 565.2 Q(\(soup-index)108 589.2 Q(\(name "by-type"\))117.6 601.2 Q
(\(key-type symbol\))117.6 613.2 Q(\(entries)117.6 625.2 Q
(\(\(blob \("sha512:..." "sha512:..." ...\)\))127.2 637.2 Q
(\(cert \("sha512:..." "sha512:..." ...\)\))132 649.2 Q
(\(audit \("sha512:..." "sha512:..." ...\)\)\)\)\))132 661.2 Q F0
(Indices are reb)72 679.2 Q(uilt on demand, not authoritati)-.2 E .3
-.15(ve - t)-.25 H(he soup is truth.).15 E F2 2.5(7. Disco)72 703.2 R
-.1(ve)-.1 G(ry and Routing).1 E 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(7.1. Realm)72 84 R(Identity)2.5 E F0
(Each realm has a principal \(Ed25519 public k)72 99.6 Q -.15(ey)-.1 G
(\). This IS its identity:).15 E/F2 8/Courier@0 SF(\(realm-identity)108
117.6 Q(\(principal "ed25519:a1b2c3..."\))117.6 129.6 Q 120
(\(addresses ;)117.6 141.6 R(Where to reach this realm)4.8 E
(\(ipv6 "2001:db8::1" port: 7777\))127.2 153.6 Q
(\(ipv4 "192.0.2.1" port: 7777\))127.2 165.6 Q 4.8(;L)24 G(egacy)-4.8 E
(\(onion "xxxx.onion" port: 7777\)\))127.2 177.6 Q 4.8(;T)9.6 G(or)-4.8
E(\(role witness\))117.6 189.6 Q
(\(capabilities \(storage-gb 1000\) \(bandwidth-mbps 100\)\))117.6 201.6
Q(\(signature "ed25519:..."\)\))117.6 213.6 Q F1 2.5(7.2. P)72 231.6 R
(eer Disco)-.2 E -.1(ve)-.1 G(ry).1 E F0(Bootstrap:)72 247.2 Q F2
(\(bootstrap-peers)108 265.2 Q
(\("ed25519:official1..." "bootstrap.cyberspace.org"\))117.6 277.2 Q
(\("ed25519:official2..." "bootstrap2.cyberspace.org"\)\))117.6 289.2 Q
F0(Gossip Protocol:)72 307.2 Q F2
(1. Realm joins, contacts bootstrap peer)108 325.2 Q
(2. Receives partial peer list \(random subset\))108 337.2 Q
(3. Contacts those peers, exchanges lists)108 349.2 Q
(4. Epidemic spread: O\(log n\) rounds to reach all realms)108 361.2 Q
(5. Periodic refresh \(every 5 min on Starlink-friendly schedule\))108
373.2 Q F0(Distrib)72 391.2 Q(uted Hash T)-.2 E(able \(Future\):)-.8 E
F2(Kademlia-style routing:)108 409.2 Q 4.8(-X)117.6 421.2 S
(OR distance metric on principal hashes)-4.8 E 4.8(-O)117.6 433.2 S
(\(log n\) lookups)-4.8 E 4.8(-R)117.6 445.2 S
(ealms responsible for nearby hash ranges)-4.8 E 4.8(-N)117.6 457.2 S
(atural load balancing)-4.8 E F1 2.5(7.3. Content)72 475.2 R(Disco)2.5 E
-.1(ve)-.1 G(ry).1 E F2(;; "Who has this hash?")108 493.2 Q
(\(content-locate "sha512:a1b2c3..."\))108 505.2 Q
(;; Returns list of peers claiming to have it:)108 529.2 Q
(\(\("ed25519:peer1..." \(latency-ms 50\) \(role full\)\))108 541.2 Q
(\("ed25519:peer2..." \(latency-ms 200\) \(role witness\)\))112.8 553.2
Q(\("ed25519:peer3..." \(latency-ms 600\) \(role archiver\)\)\))112.8
565.2 Q(;; Fetch from best candidate)108 589.2 Q
(\(content-fetch "sha512:a1b2c3..." from: "ed25519:peer1..."\))108 601.2
Q F1 2.5(8. T)72 619.2 R(ransport Pr)-.74 E(otocol)-.18 E 2.5
(8.1. End-to-End)72 643.2 R(Encryption)2.5 E 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R(All netw)72 84 Q
(ork traf)-.1 E(\214c is encrypted. The OS and netw)-.25 E
(ork are not trusted.)-.1 E/F1 8/Courier@0 SF(\(cyberspace-message)108
102 Q(\(version 1\))117.6 114 Q(\(from "ed25519:sender..."\))117.6 126 Q
(\(to "ed25519:recipient..."\))117.6 138 Q 4.8(;O)38.4 G 4.8(rb)-4.8 G
(roadcast key)-4.8 E(\(ephemeral "x25519:..."\))117.6 150 Q 4.8(;O)52.8
G(ne-time key \(PFS\))-4.8 E(\(nonce #${24-bytes}\))117.6 162 Q 4.8(;R)
72 G(andom nonce)-4.8 E(\(ciphertext #${...}\))117.6 174 Q 4.8(;N)72 G
(aCl box: X25519 + XSalsa20-Poly1305)-4.8 E
(\(signature "ed25519:..."\)\))117.6 186 Q 4.8(;S)43.2 G
(ign the ciphertext)-4.8 E F0 2.894
(Encryption scheme: NaCl crypto_box \(libsodium\) - K)72 204 R 3.193
-.15(ey a)-.25 H 2.893(greement: X25519 \(Curv).15 F 2.893
(e25519 ECDH\) - Cipher:)-.15 F(XSalsa20-Poly1305 - Perfect forw)72 216
Q(ard secrec)-.1 E(y: ephemeral k)-.15 E -.15(ey)-.1 G 2.5(sp).15 G
(er message)-2.5 E(Decrypted payload:)72 231.6 Q F1(\(plaintext-payload)
108 249.6 Q(\(type request|response|announce|gossip\))117.6 261.6 Q
(\(nonce 12345678\))117.6 273.6 Q 4.8(;R)91.2 G(eplay protection)-4.8 E
(\(timestamp 1736300000\))117.6 285.6 Q(\(body ...\)\))117.6 297.6 Q F0
(Broadcast messages use a shared group k)72 315.6 Q .3 -.15(ey o)-.1 H
2.5(ra).15 G(re signed-only \(announcements of public objects\).)-2.5 E
/F2 10/Times-Bold@0 SF 2.5(8.2. W)72 339.6 R(ir)-.18 E 2.5(eF)-.18 G
(ormat \(Encrypted\))-2.75 E F1(;; Sender encrypts)108 357.6 Q
(\(define \(seal-message payload recipient-pubkey sender-keypair\))108
369.6 Q(\(let \(\(ephemeral \(x25519-keypair\)\))117.6 381.6 Q(\(shared\
 \(x25519-shared \(ephemeral-secret ephemeral\) recipient-pubkey\)\))
151.2 393.6 Q(\(nonce \(random-bytes 24\)\))151.2 405.6 Q
(\(ciphertext \(crypto-box payload nonce shared\)\)\))151.2 417.6 Q
(`\(cyberspace-message)127.2 429.6 Q(\(version 1\))136.8 441.6 Q
(\(from ,\(keypair-public sender-keypair\)\))136.8 453.6 Q
(\(to ,recipient-pubkey\))136.8 465.6 Q
(\(ephemeral ,\(ephemeral-public ephemeral\)\))136.8 477.6 Q
(\(nonce ,nonce\))136.8 489.6 Q(\(ciphertext ,ciphertext\))136.8 501.6 Q
(\(signature ,\(sign-message ciphertext sender-keypair\)\)\)\)\))136.8
513.6 Q(;; Recipient decrypts)108 537.6 Q
(\(define \(open-message msg recipient-keypair\))108 549.6 Q
(\(let \(\(shared \(x25519-shared \(keypair-secret recipient-keypair\))
117.6 561.6 Q(\(message-ephemeral msg\)\)\))261.6 573.6 Q
(\(plaintext \(crypto-box-open \(message-ciphertext msg\))151.2 585.6 Q
(\(message-nonce msg\))285.6 597.6 Q(shared\)\)\))285.6 609.6 Q
(\(and \(verify-signature msg \(message-from msg\)\))127.2 621.6 Q
(plaintext\)\)\))151.2 633.6 Q 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(8.3. Request)72 84 R -.34(Ty)2.5 G(pes).34 E/F2 8/Courier@0 SF
(;; Existence check)108 102 Q
(\(have? \("sha512:..." "sha512:..." ...\)\))108 114 Q(;; Response: \(h\
ave \("sha512:..." "sha512:..."\) missing \("sha512:..."\)\))108 126 Q
(;; Fetch object)108 150 Q(\(fetch "sha512:..."\))108 162 Q
(;; Response: \(object ...\))108 174 Q(;; Fetch chunk range)108 198 Q
(\(fetch-chunks "sha512:..." start: 5 count: 10\))108 210 Q
(;; Response: \(chunks ...\))108 222 Q(;; Peer list exchange)108 246 Q
(\(peers? limit: 50\))108 258 Q(;; Response: \(peers ...\))108 270 Q
(;; Announce new content)108 294 Q
(\(announce \("sha512:..." "sha512:..."\)\))108 306 Q
(;; Response: \(ack\))108 318 Q F1 2.5(8.4. T)72 336 R
(ransport Bindings)-.74 E F2 19.2(Native: UDP/IPv6,)108 354 R
(port 7777 \(primary\))4.8 E 9.6(Fallback: TCP/IPv6,)108 366 R
(port 7777 \(firewalls\))4.8 E 19.2(Legacy: TCP/IPv4,)108 378 R
(port 7777 \(transition\))4.8 E 14.4(Stealth: Tor)108 390 R
(onion service \(censorship resistance\))4.8 E 14.4(Offline: USB)108 402
R(drive, file copy \(sneakernet\))4.8 E 19.2(Export: Git)108 414 R
(bundle \(GitHub compatibility\))4.8 E F1 2.5(8.5. Starlink)72 432 R
(Optimization)2.5 E F2(\(transport-config)108 450 Q(\(mode satellite\))
117.6 462 Q(\(batch-window-ms 500\))117.6 474 Q 4.8(;A)38.4 G
(ggregate small messages)-4.8 E(\(chunk-size-kb 64\))117.6 486 Q 4.8(;M)
52.8 G(atch MTU)-4.8 E(\(retry-strategy exponential\))117.6 498 Q
(\(max-in-flight 10\))117.6 510 Q 4.8(;P)52.8 G(arallelism)-4.8 E
(\(keepalive-sec 300\)\))117.6 522 Q 4.8(;5m)43.2 G(in, not 30 sec)-4.8
E F1 2.5(9. Synchr)72 540 R(onization Pr)-.18 E(otocol)-.18 E 2.5
(9.1. Lazy)72 564 R(Sync \(Default\))2.5 E F2(Node A)108 582 Q(Node B)
144 E 168(||)122.4 594 S(|----\(have? [h1, h2, h3]\)---------->|)122.4
606 Q(|<---\(have [h1, h3] missing [h2]\)---|)122.4 618 Q
(|----\(fetch h2\)-------------------->|)122.4 630 Q
(|<---\(object h2 ...\)----------------|)122.4 642 Q 168(||)122.4 654 S
(No coordination. No locks. No leader.)108 678 Q 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(9.2. Crdt-Style)72 84 R(Con)2.5 E -.1(ve)-.4 G -.1(rg).1 G(ence).1 E
F0(Objects are immutable and content-addressed. No con\215icts possible\
 at object le)72 99.6 Q -.15(ve)-.25 G(l.).15 E 3.178(Manifests \(colle\
ctions of objects\) use: - Lamport timestamps for ordering - Last-write\
r)72 115.2 R 3.179(-wins with principal)-.2 F(tiebreak)72 127.2 Q
(er - Or: union \(add-only sets\))-.1 E/F2 8/Courier@0 SF(\(manifest)108
145.2 Q(\(name "library"\))117.6 157.2 Q
(\(version \(lamport 42\) \(principal "ed25519:..."\)\))117.6 169.2 Q
(\(entries)117.6 181.2 Q(\("rfc-001" "sha512:..."\))127.2 193.2 Q
(\("rfc-002" "sha512:..."\))127.2 205.2 Q(...\)\))127.2 217.2 Q F1 2.5
(9.3. Merkle)72 235.2 R(Sync)2.5 E F0(Ef)72 250.8 Q(\214cient dif)-.25 E
2.5(ff)-.25 G(or lar)-2.5 E(ge manifests:)-.18 E F2(root)151.2 268.8 Q
19.2(/\\)146.4 280.8 S 24(h1 h2)136.8 292.8 R -4.8 9.6(/\\ /\\)132 304.8
T 19.2(ab)127.2 316.8 S 19.2(cd)-9.6 G(Exchange root hash.)108 340.8 Q
(If different, recurse on children.)108 352.8 Q
(O\(log n\) round trips to find diff.)108 364.8 Q F1 2.5(10. F)72 382.8
R(ederation at Scale)-.25 E 2.5(10.1. Cluster)72 406.8 R -.92(To)2.5 G
(pology).92 E F2<e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2
e2e2e2e2e2e2e2e2e2e2e2e2>204 424.8 Q 43.2<e243>204 436.8 S
(OORDINATOR CLUSTER)-43.2 E<e2>43.2 E 9.6<e228>204 448.8 S
(3-7 nodes, Byzantine consensus\))-9.6 E<e2>14.4 E<e2e2e2e2e2e2e2e2e2e2
e2e2e2e2e2e2e2e2ace2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2>204 460.8 Q
<e2>285.6 472.8 Q<e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2
e2bce2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2e2>156 484.8 Q
124.8<e2e2e2>156 496.8 S 57.6<e2e2e2e2e2e2e2bce2e2e2e2e2e220e2e2e2e2e2e2
e2e2bce2e2e2e2e2e220e2e2e2e2e2e2e2e2bce2e2e2e2e2e2>127.2 508.8 R 14.4
<e246>127.2 520.8 S 14.4(ULL \342)-14.4 F 14.4<e246>62.4 G 19.2
(ULL \342)-14.4 F 19.2<e246>62.4 G 14.4(ULL \342)-19.2 F 9.6<e24e>127.2
532.8 S 14.4(ODES \342)-9.6 F 14.4<e24e>62.4 G 14.4(ODES \342)-14.4 F
14.4<e24e>62.4 G 14.4(ODES \342)-14.4 F 57.6<e2e2e2e2e2e2e2ace2e2e2e2e2
e220e2e2e2e2e2e2e2ace2e2e2e2e2e2e220e2e2e2e2e2e2e2ace2e2e2e2e2e2e2>127.2
544.8 R -120 120<e2e220e2>156 556.8 T 57.6<e2e2e2e2e2e2e2bce2e2e2e2e2e2
20e2e2e2e2e2e2e2bce2e2e2e2e2e2e220e2e2e2e2e2e2e2bce2e2e2e2e2e2e2>127.2
568.8 R 4.8<e257>127.2 580.8 S(ITNESSES \342)-4.8 E 4.8<e257>62.4 G 4.8
(ITNESSES \342)-4.8 F 4.8<e257>62.4 G 4.8(ITNESSES \342)-4.8 F 4.8<e241>
127.2 592.8 S(RCHIVERS \342)-4.8 E 4.8<e241>62.4 G 4.8(RCHIVERS \342)
-4.8 F 4.8<e241>62.4 G 4.8(RCHIVERS \342)-4.8 F 14.4<e245>127.2 604.8 S
9.6(DGES \342)-14.4 F 14.4<e245>62.4 G 14.4(DGES \342)-14.4 F 14.4<e245>
62.4 G 14.4(DGES \342)-14.4 F 57.6<e2e2e2e2e2e2e2e2e2e2e2e2e220e2e2e2e2
e2e2e2e2e2e2e2e2e2e220e2e2e2e2e2e2e2e2e2e2e2e2e2e2>127.2 616.8 R
(Coordinators: Rare, high-capability realms, run consensus)108 640.8 Q
(Full: Common realms, replicate everything, serve content)108 652.8 Q
(Witnesses: Abundant realms, verify and store, passive sync)108 664.8 Q
(Archivers: Cold storage realms, batch sync)108 676.8 Q
(Edges: Read-only realms, intermittent, mobile)108 688.8 Q 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(10.2. P)72 84 R(artition T)-.1 E(olerance)-.92 E/F2 8/Courier@0 SF(\
Network splits \342 clusters diverge \342 clusters converge on reconnec\
t)108 102 Q(No data loss \(content-addressed\))108 126 Q
(No conflicts \(immutable objects\))108 138 Q
(Audit trails merge \(union of entries, Lamport ordering\))108 150 Q
(Manifests resolve \(LWW or union based on type\))108 162 Q F1 2.5
(11. Git)72 180 R(as Export F)2.5 E(ormat)-.25 E 2.5(11.1. The)72 204 R
-.74(Tr)2.5 G(ansition).74 E F2(Phase 1 \(Now\):)108 222 Q
(Git is source of truth, vault is cache)28.8 E(Phase 2 \(Next\):)108 234
Q(Vault is source of truth, git is export)24 E(Phase 3 \(Future\):)108
246 Q(Git optional, purely for GitHub presence)14.4 E F1 2.5
(11.2. Export)72 264 R(Pr)2.5 E(ocess)-.18 E F2(\(git-export)108 282 Q
(from: ".vault")117.6 294 Q(to: "/tmp/cyberspace-export")117.6 306 Q
(format: 'git-repo\))117.6 318 Q
(;; Creates standard git repo from vault contents)108 342 Q
(;; For publishing to GitHub, GitLab, etc.)108 354 Q F1 2.5
(11.3. Import)72 372 R(Pr)2.5 E(ocess)-.18 E F2(\(git-import)108 390 Q
(from: "https://github.com/ddp/cyberspace.git")117.6 402 Q
(to: ".vault"\))117.6 414 Q
(;; Extracts objects from git, stores in vault)108 438 Q
(;; Discards git history, keeps content)108 450 Q F1 2.5(12. Security)72
468 R(at Scale)2.5 E 2.5(12.1. Sybil)72 492 R(Resistance)2.5 E F0
(Problem: Attack)72 507.6 Q(er creates man)-.1 E 2.5(yf)-.15 G(ak)-2.6 E
2.5(en)-.1 G(odes to dominate netw)-2.5 E(ork.)-.1 E(Mitig)72 523.2 Q
.164(ations: 1. Stak)-.05 F .163(e-weighted v)-.1 F .163
(oting \(not proof-of-w)-.2 F .163(ork, just reputation\) 2. W)-.1 F
.163(eb of trust - ne)-.8 F 2.663(wn)-.25 G .163(odes introduced by)
-2.663 F -.15(ex)72 535.2 S .751(isting trusted nodes 3. Rate limiting \
- bound resources per principal 4. Coordinator consensus - Byzantine-re\
sis-).15 F(tant core)72 547.2 Q F1 2.5(12.2. Eclipse)72 571.2 R
(Attack Resistance)2.5 E F0(Problem: Attack)72 586.8 Q
(er isolates a node by controlling all its peers.)-.1 E(Mitig)72 602.4 Q
.682(ations: 1. Di)-.05 F -.15(ve)-.25 G .681(rse bootstrap - multiple \
independent entry points 2. Random peer selection - can').15 F 3.181(tp)
-.18 G .681(redict who)-3.181 F(you')72 614.4 Q .014
(ll connect to 3. Peer rotation - periodically reconnect to ne)-.1 F
2.514(wp)-.25 G .014(eers 4. Out-of-band v)-2.514 F .014
(eri\214cation - publish peer lists)-.15 F(via DNS, blockchain, etc.)72
626.4 Q F1 2.5(12.3. Denial)72 650.4 R(of Ser)2.5 E(vice)-.1 E F0
(Problem: Attack)72 666 Q(er \215oods netw)-.1 E(ork with junk.)-.1 E
(Mitig)72 681.6 Q .15(ations: 1. Proof of w)-.05 F .149(ork on announce\
ments \(small, CPU cost\) 2. Rate limiting per principal 3. Reputation \
scor)-.1 F(-)-.2 E(ing - misbeha)72 693.6 Q
(ving peers deprioritized 4. Content v)-.2 E
(alidation - reject malformed objects immediately)-.25 E 0 Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-039 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(13. Implementation)72 84 R(Phases)2.5 E 2.5(13.1. Phase)72 108 R
(1: Nati)2.5 E .2 -.1(ve O)-.1 H(bject Stor).1 E(e)-.18 E F0 6.5<8349>72
123.6 S(mplement .v)-6.5 E(ault/objects/ storage)-.25 E 6.5<8353>72
139.2 S(oup catalog and query)-6.5 E 6.5<834b>72 154.8 S(eep git for de)
-6.75 E -.15(ve)-.25 G(lopment w).15 E(ork\215o)-.1 E(w)-.25 E F1 2.5
(13.2. Phase)72 182.4 R(2: Local-First Sync)2.5 E F0 6.5<8344>72 198 S
(irect node-to-node protocol - ha)-6.5 E -.15(ve)-.2 G
(?/fetch message types).15 E 6.5<8355>72 213.6 S
(DP transport with TCP f)-6.5 E(allback)-.1 E F1 2.5(13.3. Phase)72
241.2 R(3: Disco)2.5 E -.1(ve)-.1 G(ry).1 E F0 6.5<8347>72 256.8 S
(ossip peer e)-6.5 E(xchange)-.15 E 6.5<8342>72 272.4 S(ootstrap nodes)
-6.5 E 6.5<8342>72 288 S(loom \214lters for content location)-6.5 E F1
2.5(13.4. Phase)72 315.6 R(4: Scale T)2.5 E(esting)-.92 E F0 6.5<8331>72
331.2 S(00 nodes - 1000 nodes - 10000 nodes)-6.5 E 6.5<834d>72 346.8 S
(easure: latenc)-6.5 E 1.3 -.65(y, c)-.15 H(on).65 E -.15(ve)-.4 G -.18
(rg).15 G(ence time, bandwidth).18 E F1 2.5(13.5. Phase)72 374.4 R
(5: Git Depr)2.5 E(ecation)-.18 E F0 6.5<8356>72 390 S
(ault as source of truth)-7.61 E 6.5<8347>72 405.6 S(it e)-6.5 E
(xport for compatibility)-.15 E 6.5<8352>72 421.2 S(emo)-6.5 E .3 -.15
(ve g)-.15 H(it dependenc).15 E 2.5(yf)-.15 G(rom core operations)-2.5 E
F1 2.5(14. Metrics)72 448.8 R(and Monitoring)2.5 E/F2 8/Courier@0 SF
(\(node-metrics\))108 466.8 Q(;; Returns:)108 478.8 Q
(\(\(objects-stored 150000\))108 490.8 Q(\(objects-size-gb 50\))112.8
502.8 Q(\(peers-known 500\))112.8 514.8 Q(\(peers-connected 20\))112.8
526.8 Q(\(sync-lag-seconds 30\))112.8 538.8 Q(\(bandwidth-in-mbps 10\))
112.8 550.8 Q(\(bandwidth-out-mbps 5\))112.8 562.8 Q
(\(requests-per-second 100\))112.8 574.8 Q(\(errors-per-second 0.1\)\))
112.8 586.8 Q F1 2.5(15. Refer)72 604.8 R(ences)-.18 E F0 .922(1. RFC-0\
10: Federation Protocol 2. RFC-016: Lazy Clustering 3. RFC-037: Node Ro\
les and Capabilities 4. May-)72 620.4 R(mounk)72 632.4 Q -.15(ov)-.1 G
2.855(,P)-.5 G 2.855(.\()-2.855 G .355(2002\). Kademlia: A Peer)-2.855 F
.355(-to-peer Information System 5. Rabin, M. \(1981\). Fingerprinting \
by Random)-.2 F(Polynomials 6. IPFS Whitepaper \(2014\) 7. Shapiro, M. \
\(2011\). Con\215ict-Free Replicated Data T)72 644.4 Q(ypes)-.8 E F1 2.5
(16. Changelog)72 668.4 R F0 6.5<8332>72 684 S(026-01-07)-6.5 E 6.5
<8349>72 699.6 S(nitial draft)-6.5 E 0 Cg EP
%%Trailer
end
%%EOF
