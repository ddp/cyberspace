<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RFC-009: Library Directory System</title>
  <link rel="stylesheet" href="rfc.css">
</head>
<body>
<h1>RFC-009: Library Directory System</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>This RFC specifies the Library Directory System for the Library of Cyberspace: a searchable catalog of research papers with natural language queries, fuzzy matching, and beautiful output. Finding knowledge should be delightful.</p>
</section>
<section>
<h2>E Pluribus Unum</h2>
<pre>
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“š Cyberspace Library Directory                               â•‘
â•‘  Finding knowledge should be joyful                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</pre>
</section>
<section>
<h2>Motivation</h2>
<p>The Library of Cyberspace contains 421+ research papers spanning 50 years of computing history. Without a catalog:</p>
<ul>
<li>Discoverability: How to find Lamport's clock paper?</li>
<li>Connections: What relates to SPKI?</li>
<li>Context: When was this written? By whom?</li>
</ul>
<p>The Directory System provides:</p>
<p>1. Natural language search - "papers by Lampson about protection" 2. Multi-index access - By author, topic, year, collection 3. Fuzzy matching - "Lamp" finds Lampson and Lamport 4. Beautiful output - Unicode, emoji, formatted results 5. S-expression export - Machine-readable catalogs</p>
</section>
<section>
<h2>Data Model</h2>
<h3>Document Record</h3>
<pre class="language-scheme">
(define-record-type &lt;document&gt;
  (make-document title authors year topics file-path
                 collection source-url description)
  document?
  (title document-title)
  (authors document-authors)      ; List of strings
  (year document-year)            ; Integer or #f
  (topics document-topics)        ; List of strings
  (file-path document-file-path)
  (collection document-collection)
  (source-url document-source-url)
  (description document-description))
</pre>
<h3>Collection Record</h3>
<pre class="language-scheme">
(define-record-type &lt;collection&gt;
  (make-collection name path documents description)
  collection?
  (name collection-name)
  (path collection-path)
  (documents collection-documents)  ; List of documents
  (description collection-description))
</pre>
<h3>Library Record</h3>
<pre class="language-scheme">
(define-record-type &lt;library&gt;
  (make-library collections documents
                author-index topic-index year-index collection-index)
  library?
  (collections library-collections)
  (documents library-documents)
  (author-index library-author-index)     ; Hash table
  (topic-index library-topic-index)       ; Hash table
  (year-index library-year-index)         ; Hash table
  (collection-index library-collection-index))
</pre>
</section>
<section>
<h2>Index System</h2>
<p>Four hash table indexes for O(1) lookup:</p>
<pre>
author-index:     "Lamport" â†’ [doc1, doc2, doc5, ...]
topic-index:      "cryptography" â†’ [doc3, doc7, doc12, ...]
year-index:       1978 â†’ [doc1, doc4, ...]
collection-index: "lampson" â†’ &lt;collection&gt;
</pre>
<h3>Building Indexes</h3>
<pre class="language-scheme">
(define (build-author-index documents)
  (let ((index (make-hash-table equal?)))
    (for-each
      (lambda (doc)
        (for-each
          (lambda (author)
            (hash-table-update!/default
              index
              (normalize-author author)
              (lambda (docs) (cons doc docs))
              '()))
          (document-authors doc)))
      documents)
    index))
</pre>
</section>
<section>
<h2>Query Interface</h2>
<h3>Natural Language Parsing</h3>
<pre class="language-scheme">
(parse-query "papers by Lampson about protection")
;; =&gt; (query (author "Lampson") (topic "protection"))

(parse-query "from 1978")
;; =&gt; (query (year 1978))

(parse-query "SPKI certificates")
;; =&gt; (query (topic "SPKI") (topic "certificates"))
</pre>
<p>Recognized Patterns: - by &lt;name&gt; â†’ author search - about &lt;topic&gt; â†’ topic search - from &lt;year&gt; â†’ year search - in &lt;collection&gt; â†’ collection filter - Bare words â†’ topic search</p>
<h3>Fuzzy Matching</h3>
<pre class="language-scheme">
(fuzzy-match "Lamp" author-list)
;; =&gt; ("Lampson" "Lamport")

(fuzzy-match "crypto" topic-list)
;; =&gt; ("cryptography" "cryptographic" "encryption")
</pre>
<p>Matching strategies: 1. Exact match (highest priority) 2. Case-insensitive match 3. Prefix match 4. Substring match</p>
<h3>Query Functions</h3>
<pre class="language-scheme">
(find-by-author library "Lampson")
(find-by-topic library "SPKI")
(find-by-year library 1978)
(find-by-collection library "lampson")
(find-related library document)
</pre>
</section>
<section>
<h2>REPL Interface</h2>
<h3>Interactive Session</h3>
<pre>
$ csi -s directory-repl.scm

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“š Cyberspace Library Directory                               â•‘
â•‘  "E Pluribus Unum" - Finding knowledge should be joyful        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Loaded 312 documents from 18 collections
Type 'help' for search tips, 'quit' to exit

ğŸ“– &gt; papers by Rivest

ğŸ“š Found 3 documents:

 [1] SDSI: A Simple Distributed Security Infrastructure
     ğŸ‘¤ R. Rivest, B. Lampson
     ğŸ“… 1996  ğŸ“ lampson

 [2] SPKI Certificate Theory
     ğŸ‘¤ C. Ellison, B. Frantz, B. Lampson, R. Rivest, ...
     ğŸ“… 1999  ğŸ“ lampson

ğŸ“– &gt; about SPKI

ğŸ“š Found 8 documents:
...

ğŸ“– &gt; stats

Library Statistics:
  ğŸ“š Documents: 312
  ğŸ“ Collections: 18
  ğŸ‘¤ Authors: 245
  ğŸ·ï¸ Topics: 89
  ğŸ“… Years: 1971-2024

ğŸ“– &gt; quit
Happy exploring! ğŸ“šâœ¨
</pre>
<h3>Commands</h3>
<table>
<tr><th>Command </th><th>Description </th></tr>
<tr><td>help </td><td>Show search tips </td></tr>
<tr><td>stats </td><td>Library statistics </td></tr>
<tr><td>collections </td><td>List all collections </td></tr>
<tr><td>authors </td><td>Show author index </td></tr>
<tr><td>topics </td><td>Show topic index </td></tr>
<tr><td>years </td><td>Show year distribution </td></tr>
<tr><td>quit </td><td>Exit REPL </td></tr>
</table>
</section>
<section>
<h2>INDEX.md Parser</h2>
<p>Each collection contains an INDEX.md with paper listings:</p>
<pre class="language-markdown">
# Lampson Collection

Butler Lampson's papers on protection, capability systems, and distributed computing.

## Papers

1. Protection (1971)
   - Author: Butler Lampson
   - Topics: capability, protection, access control
   - Source: ACM Operating Systems Review

2. Hints for Computer System Design (1983)
   - Author: Butler Lampson
   - Topics: systems design, engineering
   - Source: ACM Operating Systems Review
</pre>
<h3>Parser Output</h3>
<pre class="language-scheme">
(parse-index-file "lampson/INDEX.md")
;; =&gt;
(collection
  (name "lampson")
  (description "Butler Lampson's papers...")
  (documents
    ((title "Protection")
     (authors "Butler Lampson")
     (year 1971)
     (topics "capability" "protection" "access control"))
    ...))
</pre>
</section>
<section>
<h2>Export Formats</h2>
<h3>S-expression Export</h3>
<pre class="language-scheme">
(export-to-sexp library "catalog.sexp")
</pre>
<p>Output:</p>
<pre class="language-scheme">
(library
  (metadata
    (document-count 312)
    (collection-count 18)
    (generated "2026-01-06"))
  (collections
    (collection
      (name "lampson")
      (documents
        (document
          (title "Protection")
          (authors ("Butler Lampson"))
          (year 1971)
          (topics ("capability" "protection")))
        ...))
    ...))
</pre>
<h3>HTML Export</h3>
<pre class="language-scheme">
(export-to-html library "catalog.html")
</pre>
<p>Generates browsable web catalog with: - Alphabetical author index - Topic tag cloud - Year timeline - Search functionality</p>
<h3>Markdown Export</h3>
<pre class="language-scheme">
(export-to-markdown library "catalog.md")
</pre>
<p>Documentation-friendly format for README files.</p>
</section>
<section>
<h2>Design Philosophy</h2>
<h3>Super Nice and Helpful</h3>
<ul>
<li>Natural language understanding</li>
<li>Fuzzy matching catches typos</li>
<li>Suggestions for empty results</li>
<li>Encouraging prompts</li>
</ul>
<h3>Beautiful Output</h3>
<ul>
<li>Unicode box drawing (â•”â•â•â•â•—)</li>
<li>Emoji visual markers (ğŸ“– ğŸ“š ğŸ‘¤ ğŸ“…)</li>
<li>Consistent formatting</li>
<li>Progressive disclosure</li>
</ul>
<h3>Hone In On What You Need</h3>
<ul>
<li>Multi-strategy search</li>
<li>Progressive filtering</li>
<li>Cross-references</li>
<li>Related paper discovery</li>
</ul>
</section>
<section>
<h2>Security Considerations</h2>
<h3>No Execution</h3>
<p>The directory system is read-only: - Parses INDEX.md files (trusted) - No code execution - No network access - No file modification</p>
<h3>Path Traversal</h3>
<p>File paths validated: - Must be within library root - No .. components - Normalized before use</p>
</section>
<section>
<h2>Implementation Notes</h2>
<h3>Dependencies</h3>
<ul>
<li>srfi-1</li>
<li>List utilities - srfi-13</li>
<li>String utilities - srfi-69</li>
<li>Hash tables - chicken file</li>
<li>Directory scanning</li>
</ul>
<h3>Performance</h3>
<ul>
<li>Index building: O(N) documents</li>
<li>Query: O(1) hash lookup + O(M) result filtering</li>
<li>Fuzzy match: O(K) candidates</li>
</ul>
<h3>Extensibility</h3>
<p>Future enhancements: - Full-text search (PostScript/Text extraction) - Citation graph visualization - BibTeX export - Web API server - Semantic search with embeddings</p>
</section>
<section>
<h2>References</h2>
<p>1. Dublin Core Metadata Initiative 2. Library of Congress Subject Headings 3. BibTeX format specification 4. Unicode Standard for box drawing</p>
</section>
<section>
<h2>Changelog</h2>
<ul>
<li>2026-01-06</li>
<li>Initial specification</li>
</ul>
</section>
</body>
</html>
