%!PS-Adobe-3.0
%%Title: memo-059-lazy-discovery
%%Creator: Library of Cyberspace Memo Pipeline
%%Pages: (atend)
%%EndComments

/Courier findfont 10 scalefont setfont
/margin 72 def
/pagewidth 612 def
/pageheight 792 def
/leading 12 def
/topmargin pageheight margin sub def
/bottommargin margin def
/linewidth pagewidth margin 2 mul sub def
/ypos topmargin def
/pagenum 1 def

/newline {
  /ypos ypos leading sub def
  ypos bottommargin lt {
    showpage
    /pagenum pagenum 1 add def
    /ypos topmargin def
  } if
  margin ypos moveto
} def

margin topmargin moveto
(Memo 059: Lazy Discovery) show newline
() show newline
(Status: Draft) show newline
(Date: January 2026) show newline
(Author: Derrell Piper <ddp@archlinux.us>) show newline
() show newline
(------------------------------------------------------------------------) show newline
() show newline
(------------------------------------------------------------------------) show newline
(ABSTRACT) show newline
(------------------------------------------------------------------------) show newline
() show newline
(Defines a reactive layer for the weave where realms lazily discover) show newline
(changes forged elsewhere. Complements the active forge model with pubsub) show newline
(semantics over gossip.) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(1. MOTIVATION) show newline
(------------------------------------------------------------------------) show newline
() show newline
(The forge model requires active participation: realms compile, seal,) show newline
(sign, and gossip propagates results. But realms also need to know when) show newline
(peers have forged something new without polling.) show newline
() show newline
(Lazy discovery adds subscription semantics. Realms express interest; the) show newline
(weave notifies them. Pull when interested, ignore when not.) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(2. SUBSCRIPTION MODEL) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(2.1 Interest Expression) show newline
(-----------------------) show newline
() show newline
(Realms subscribe to change feeds:) show newline
() show newline
() show newline
(    \(subscribe realm: 'fluffy\)           ; all changes from fluffy) show newline
(    \(subscribe key: hash\)                 ; changes to specific object) show newline
(    \(subscribe topic: 'rfc\)               ; semantic topic) show newline
(    \(subscribe pattern: "spki/scheme/*"\) ; glob pattern) show newline
() show newline
(Subscriptions are SPKI certificates - signed expressions of interest) show newline
(that can be delegated and revoked.) show newline
() show newline
() show newline
(2.2 Notification Format) show newline
(-----------------------) show newline
() show newline
(Change notifications are lightweight:) show newline
() show newline
() show newline
(    \(change) show newline
(      \(realm fluffy\)) show newline
(      \(lamport 42\)) show newline
(      \(hash "sha512:..."\)) show newline
(      \(type sealed-archive\)) show newline
(      \(topic rfc\)) show newline
(      \(signature ...\)\)) show newline
() show newline
(Notifications announce existence, not content. Interested realms pull) show newline
(the object via normal gossip.) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(3. GOSSIP AS TALA) show newline
(------------------------------------------------------------------------) show newline
() show newline
(In Indian classical music, tala is the rhythmic cycle underlying the) show newline
(raga. Without tala, the melody has no structure. Without gossip, the) show newline
(weave has no coherence.) show newline
() show newline
(Gossip is the tala of cyberspace - the steady beat that carries forge) show newline
(and discovery alike. Realms may create in isolation, but the rhythm) show newline
(connects them.) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(4. GOSSIP INTEGRATION) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(4.1 Notification Propagation) show newline
(----------------------------) show newline
() show newline
(Change notifications piggyback on gossip protocol \(RFC-010\). They are) show newline
(small, signed, and expire:) show newline
() show newline
(  * Notifications included in gossip heartbeat) show newline
(  * TTL limits propagation \(default: 24 hours\)) show newline
(  * Deduplication by \(realm, lamport, hash\) tuple) show newline
() show newline
() show newline
(4.2 Request on Interest) show newline
(-----------------------) show newline
() show newline
(When a notification matches a subscription:) show newline
() show newline
() show newline
(    \(on-change notification) show newline
(      \(when \(matches-subscription? notification subscriptions\)) show newline
(        \(request-object \(change-hash notification\) \(change-realm notification\)\)\)\)) show newline
() show newline
(The request is lazy - realms may defer, batch, or ignore based on) show newline
(priority.) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(5. SUBSCRIPTION CERTIFICATES) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(5.1 Structure) show newline
(-------------) show newline
() show newline
() show newline
(    \(cert) show newline
(      \(issuer realm-key\)) show newline
(      \(subject subscription\)) show newline
(      \(validity \(not-after "2026-12-31"\)\)) show newline
(      \(delegate #f\)) show newline
(      \(signature ...\)\)) show newline
() show newline
(Subscriptions are first-class objects in the SPKI model. They can be) show newline
(stored in vaults, shared, and audited.) show newline
() show newline
() show newline
(5.2 Privacy Considerations) show newline
(--------------------------) show newline
() show newline
(Subscriptions reveal interest. Realms may:) show newline
() show newline
(  * Subscribe through intermediaries) show newline
(  * Use broad patterns to obscure specific interest) show newline
(  * Accept latency for privacy \(poll instead of subscribe\)) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(6. IMPLEMENTATION) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(6.1 Subscription Registry) show newline
(-------------------------) show newline
() show newline
() show newline
(    \(define *subscriptions* '\(\)\)) show newline
(    \(define \(subscribe #!key realm key topic pattern\)) show newline
(      "Register interest in changes.") show newline
(      \(let \(\(sub \(make-subscription realm: realm key: key) show newline
(                                    topic: topic pattern: pattern\)\)\)) show newline
(        \(set! *subscriptions* \(cons sub *subscriptions*\)\)) show newline
(        \(announce-subscription sub\)) show newline
(        sub\)\)) show newline
(    \(define \(unsubscribe sub\)) show newline
(      "Revoke interest.") show newline
(      \(set! *subscriptions* \(remove sub *subscriptions*\)\)) show newline
(      \(announce-revocation sub\)\)) show newline
() show newline
() show newline
(6.2 Change Emission) show newline
(-------------------) show newline
() show newline
() show newline
(    \(define \(emit-change object\)) show newline
(      "Announce a newly forged object.") show newline
(      \(let \(\(notification \(make-change-notification) show newline
(                            realm: *current-realm*) show newline
(                            lamport: \(lamport-time\)) show newline
(                            hash: \(object-hash object\)) show newline
(                            type: \(object-type object\)) show newline
(                            topic: \(object-topic object\)\)\)\)) show newline
(        \(sign-and-gossip notification\)\)\)) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(7. RELATIONSHIP TO FORGE) show newline
(------------------------------------------------------------------------) show newline
() show newline
(Lazy discovery complements, not replaces, the forge:) show newline
() show newline
() show newline
(    Forge:     Active. You create, you seal, you sign.) show newline
(    Discovery: Reactive. You express interest, you're notified.) show newline
(    Gossip:    Transport. Carries both forged objects and notifications.) show newline
() show newline
(The weave remains a system of forges. Lazy discovery is how forges hear) show newline
(about each other's work.) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(8. SECURITY CONSIDERATIONS) show newline
(------------------------------------------------------------------------) show newline
() show newline
(  * Notification spam: Rate limiting per realm \(RFC-032\)) show newline
(  * Subscription flooding: Quota on active subscriptions) show newline
(  * Privacy leakage: Subscriptions reveal interest graphs) show newline
(  * Replay attacks: Lamport ordering prevents stale notifications) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(REFERENCES) show newline
(------------------------------------------------------------------------) show newline
() show newline
(  [RFC-010, 2026] Federation Protocol) show newline
(  [RFC-012, 2026] Lamport Clocks) show newline
(  [RFC-032, 2026] Rate Limiting) show newline
(  [RFC-004, 2026] SPKI Authorization) show newline
() show newline
(------------------------------------------------------------------------) show newline

showpage
%%Trailer
%%Pages: pagenum
%%EOF
