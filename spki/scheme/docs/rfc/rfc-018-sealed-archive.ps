%!PS-Adobe-3.0
%%Creator: groff version 1.23.0
%%CreationDate: Fri Jan  9 11:49:19 2026
%%DocumentNeededResources: font Times-Roman
%%DocumentSuppliedResources: procset grops 1.23 0
%%Pages: 5
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.23 0
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
% The ASCII code of the space character.
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
% name size font SF -
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
% name a c d font MF -
/MF{
findfont
[5 2 roll
0 3 1 roll % b
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
% Enable manual feed.
% MANUAL -
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
% Guess the page length.
% This assumes that the imageable area is vertically centered on the page.
% PLG - length
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
% BP -
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
DEFS/BPhook known{DEFS begin BPhook end}if
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
% centerx centery radius startangle endangle DA -
/DA{
newpath arcn stroke
}bind def
% x y SN - x' y'
% round a position to nearest (pixel + (.25,.25))
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
% endx endy startx starty DL -
% we round the endpoints of the line, so that parallel horizontal
% and vertical lines will appear even
/DL{
SN
moveto
SN
lineto stroke
}bind def
% centerx centery radius DC -
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
%  width height centerx centery DE -
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
% these are for splines
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
% fill the last path
% r g b Fr -
/Fr{
setrgbcolor fill
}bind def
% c m y k Fk -
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
% g Fg -
/Fg{
setgray fill
}bind def
% fill with the "current color"
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
% new_font_name encoding_vector old_font_name RE -
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne
2 index/UniqueID ne
and
{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
% hpos vpos EBEGIN -
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
% llx lly newwid wid newht ht newllx newlly PBEGIN -
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
% set the graphics state to default values
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
%
%  Any included setpagedevice should be ignored.
%  See: http://www.w-beer.de/doc/ps/.
%
/setpagedevice{}def
mark
}bind def
/PEND{
cleartomark
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(RFC-018: Sealed Archi)72 12 Q .3 -.15(ve Fo)-.25
H(rmat).15 E(Status: Implemented Date: January 2026 Author: Derrell Pip\
er <ddp@eludom.net> Implementation: v)72 36 Q(ault.scm)-.25 E(---------\
---------------------------------------------------------------------)72
60 Q(Abstract)72 84 Q .238(This RFC speci\214es the Zstd+Age archi)72
108 R .538 -.15(ve f)-.25 H .237
(ormat for the Library of Cyberspace: a modern archi).15 F .537 -.15
(ve f)-.25 H .237(ormat combining).15 F(Zstd compression with Age encry\
ption, replacing gzip for cryptographic archi)72 120 Q -.15(ve)-.25 G
(s.).15 E(-------------------------------------------------------------\
-----------------)72 144 Q(Moti)72 168 Q -.25(va)-.25 G(tion).25 E
(The le)72 192 Q -.05(ga)-.15 G .3 -.15(cy c).05 H(ryptographic archi)
.15 E .3 -.15(ve f)-.25 H
(ormat uses gzip compression without encryption:).15 E 3.169(|A)72 216 S
.669(spect | gzip \(le)-3.169 F -.05(ga)-.15 G -.15(cy).05 G 3.169(\)|z)
.15 G .67(std + age | |--------|---------------|------------| | Compres\
sion speed | Slo)-3.169 F 3.17(w|F)-.25 G .67(ast \(parallel\) | |)-3.32
F .097(Compression ratio | Good | Better | | Encryption | None | Built-\
in \(age\) | | K)72 228 R .397 -.15(ey c)-.25 H .097
(ompatibility | N/A | X25519/Ed25519).15 F
(\(SPKI aligned\) | | Streaming | Y)72 240 Q(es | Y)-1 E(es |)-1 E(Wh)72
264 Q 2.5(yc)-.05 G(hange?)-2.5 E 1.061(1. Encryption at rest - Archi)72
288 R -.15(ve)-.25 G 3.561(sc).15 G 1.062(ontain potentially sensiti)
-3.561 F 1.362 -.15(ve d)-.25 H 1.062(ata 2. F).15 F 1.062
(aster compression - Zstd is 3-5x f)-.15 F 1.062(aster than)-.1 F 3.783
(gzip 3. Better ratios - Zstd typically achie)72 300 R -.15(ve)-.25 G
6.283(s1).15 G 3.783(0-20% better compression 4. K)-6.283 F 4.083 -.15
(ey a)-.25 H 3.783(lignment - Age uses).15 F(X25519/Ed25519, same curv)
72 312 Q 2.5(ef)-.15 G(amily as SPKI 5. P)-2.6 E
(arallel support - zstd -T0 uses all cores)-.15 E(---------------------\
---------------------------------------------------------)72 336 Q
(Speci\214cation)72 360 Q(Archi)72 384 Q .3 -.15(ve C)-.25 H
(reation Pipeline).15 E 2.5(`g)72 408 S(it archi)-2.5 E .3 -.15(ve | t)
-.25 H(ar --zstd | age -r <recipients> > archi).15 E -.15(ve)-.25 G
(.tar).15 E(.zst.age `)-.55 E(Or equi)72 432 Q -.25(va)-.25 G(lently: `\
 tar --zstd -cf - <\214les> | age -r <recipient1> -r <recipient2> > arc\
hi).25 E -.15(ve)-.25 G(.tar).15 E(.zst.age `)-.55 E(Archi)72 456 Q .3
-.15(ve R)-.25 H(estoration Pipeline).15 E 2.5(`a)72 480 S
(ge -d -i <identity> < archi)-2.5 E -.15(ve)-.25 G(.tar).15 E
(.zst.age | zstd -d | tar -xf - `)-.55 E(Manifest F)72 504 Q(ormat)-.15
E(`scheme \(sealed-archi)72 528 Q -.15(ve)-.25 G(\(v)77 540 Q
(ersion "1.0.0"\))-.15 E(\(format zstd-age\))77 552 Q(\(archi)77 564 Q
.3 -.15(ve ")-.25 H -.25(va).15 G(ult-1.0.0.archi).25 E -.15(ve)-.25 G
(.tar).15 E(.zst.age"\))-.55 E(\(compression zstd\))77 576 Q
(\(encryption age\))77 588 Q(\(recipients \("age1ql3z7hjy54pw3h)77 600 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E(w8zmrj2kg5sfn9aqmcac8p"\)\))-.1 E
(\(hash "sha512:..."\))77 612 Q(\(signature "ed25519:..."\)\))77 624 Q
(`)5 E(File Extensions)72 648 Q 3.108(|E)72 672 S .608
(xtension | Contents | |-----------|----------| | .archi)-3.108 F .908
-.15(ve | S)-.25 H(-e).15 E .608(xpression manifest | | .tar)-.15 F .609
(.zst.age | Encrypted, compressed)-.55 F(tarball |)72 684 Q
(Con\214guration)72 708 Q
(`scheme ;; Set age recipients for encryption \(v)72 732 Q
(ault-con\214g 'age-recipients)-.25 E('\("age1ql3z7hjy54pw3h)77 744 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E(w8zmrj2kg5sfn9aqmcac8p")-.1 E
("age1..."\)\))82 756 Q(;; Set age identity for decryption \(v)72 780 Q
(ault-con\214g 'age-identity "~/.con\214g/age/identity)-.25 E(.txt"\))
-.65 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(;; Set def)72 12 Q(ault archi)-.1 E .3 -.15
(ve f)-.25 H(ormat \(v).15 E(ault-con\214g 'archi)-.25 E -.15(ve)-.25 G
(-format 'zstd-age\) `).15 E(------------------------------------------\
------------------------------------)72 36 Q
(Performance Characteristics)72 60 Q(Compression)72 84 Q 2.5(`Z)72 108 S
(std def)-2.5 E(ault \(-3\):)-.1 E 5(Compression: ~400)77 120 R(MB/s)2.5
E(Decompression: ~800 MB/s)77 132 Q 20(Ratio: ~3:1)77 144 R
(\(typical source code\))2.5 E(Zstd parallel \(-T0\):)72 168 Q 5
(Compression: ~400)77 180 R(MB/s \303 cores)2.5 E
(Decompression: ~800 MB/s \303 cores)77 192 Q(Gzip comparison:)72 216 Q
5(Compression: ~30)77 228 R(MB/s)2.5 E(Decompression: ~200 MB/s)77 240 Q
20(Ratio: ~2.5:1)77 252 R(`)2.5 E(Encryption)72 276 Q 2.5(`A)72 300 S
(ge X25519:)-2.5 E 2.5(Encrypt: ~1)77 312 R(GB/s \(ChaCha20-Poly1305\))
2.5 E 2.5(Decrypt: ~1)77 324 R(GB/s)2.5 E -2.15 -.25(Ke y)77 336 T
(size: 32 bytes \(public\), 32 bytes \(pri)2.75 E -.25(va)-.25 G(te\))
.25 E(Age o)72 360 Q -.15(ve)-.15 G(rhead:).15 E 5(Header: ~200)77 372 R
(bytes per recipient)2.5 E(MA)77 384 Q 12.5(C: 16)-.4 F(bytes `)2.5 E
(Signature)72 408 Q 2.5(`E)72 432 S(d25519:)-2.5 E 10(Sign: ~10)77 444 R
<cebc73>2.5 E -1.11(Ve)77 456 S 5(rify: ~10)1.11 F<cebc73>2.5 E
(Signature: 64 bytes `)77 468 Q -.8(To)72 492 S(tal Pipeline).8 E 2.5
(`1)72 516 S 2.5(0M)-2.5 G 2.5(Ba)-2.5 G(rchi)-2.5 E -.15(ve)-.25 G(:)
.15 E(Compress \(zstd -T0\): ~25 ms)77 528 Q(Encrypt \(age\):)77 540 Q
(~10 ms)17.5 E(Hash \(SHA-512\):)77 552 Q(~1 ms)15 E(Sign \(Ed25519\):)
77 564 Q(~10 \316\274s)15 E -.8(To)77 576 S 35(tal: ~36).8 F(ms)2.5 E
(vs gzip le)72 600 Q -.05(ga)-.15 G -.15(cy).05 G(:).15 E
(Compress \(gzip\):)77 612 Q(~300 ms)12.5 E(Hash \(SHA-512\):)77 624 Q
(~1 ms)15 E(Sign \(Ed25519\):)77 636 Q(~10 \316\274s)15 E -.8(To)77 648
S 35(tal: ~301).8 F(ms)2.5 E(Speedup: ~8x `)72 672 Q(------------------\
------------------------------------------------------------)72 696 Q
(Security Model)72 720 Q(Encryption Layer \(Age\))72 744 Q 3.276(-A)72
768 S .776
(lgorithm: X25519 + ChaCha20-Poly1305 - Recipients: Multiple allo)-3.276
F .775(wed \(each can decrypt\) - F)-.25 F(orw)-.15 E .775(ard secrec)
-.1 F(y:)-.15 E(Ephemeral k)72 780 Q .3 -.15(ey p)-.1 H(er archi).15 E
.3 -.15(ve - A)-.25 H(uthenticity: Poly1305 MA).15 E(C)-.4 E 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Signature Layer \(SPKI\))72 12 Q 2.5(-A)72 36 S
(lgorithm: Ed25519 - Scope: Signs encrypted archi)-2.5 E .3 -.15(ve h)
-.25 H(ash - Non-repudiation: Signer cannot den).15 E 2.5(yc)-.15 G
(reating archi)-2.5 E -.15(ve)-.25 G -1.11(Ve)72 60 S
(ri\214cation Order)1.11 E .847(1. V)72 84 R .847
(erify signature - Before decryption \(f)-1.11 F .847(ail f)-.1 F .847
(ast on tampering\) 2. V)-.1 F .847(erify hash - Encrypted archi)-1.11 F
1.148 -.15(ve i)-.25 H(nte).15 E .848(grity 3. De-)-.15 F
(crypt - Only after signature v)72 96 Q
(eri\214ed 4. Extract - Only after successful decryption)-.15 E
(Threat Mitig)72 120 Q(ations)-.05 E 3.661(|T)72 144 S 1.161
(hreat | Mitig)-3.661 F 1.161(ation | |--------|------------| | Ea)-.05
F -.15(ve)-.2 G 1.16
(sdropping | Age encryption \(X25519 + ChaCha20\) | | T).15 F 1.16
(ampering |)-.8 F .174
(SHA-512 hash + Ed25519 signature | | Replay attacks | V)72 156 R .175
(ersion + timestamp in manifest | | K)-1.11 F .475 -.15(ey c)-.25 H .175
(ompromise | Multi-).15 F(ple recipients, k)72 168 Q .3 -.15(ey r)-.1 H
(otation | | Chosen cipherte).15 E(xt | Poly1305 authentication |)-.15 E
(----------------------------------------------------------------------\
--------)72 192 Q(Compatibility)72 216 Q(Age Identity T)72 240 Q(ypes)
-.8 E 2.5(`N)72 264 S(ati)-2.5 E .3 -.15(ve a)-.25 H(ge k).15 E .3 -.15
(ey a)-.1 H(ge1ql3z7hjy54pw3h).15 E(yww5ayyfg7zqgvc7w3j2el)-.05 E
(w8zmrj2kg5sfn9aqmcac8p)-.1 E(SSH k)72 288 Q .3 -.15(ey \()-.1 H
(age supports ssh-ed25519 and ssh-rsa\) ssh-ed25519 AAAA).15 E
(C3NzaC1lZDI1NTE5AAAAI...)-.4 E(GitHub k)72 312 Q .3 -.15(ey \()-.1 H
(via age-plugin-github or ssh\) github:username `).15 E
(Platform Support)72 336 Q 2.607(|P)72 360 S .107
(latform | zstd | age | |----------|------|-----| | macOS | Homebre)
-2.607 F 2.607(w|)-.25 G(Homebre)-.001 E 2.606(w||L)-.25 G .106
(inux | apt/yum | apt/yum or binary |)-2.606 F 2.5(|F)72 372 S
(reeBSD | pkg | pkg | | W)-2.5 E(indo)-.4 E
(ws | winget | winget or binary |)-.25 E -.15(Fa)72 396 S(llback).15 E
.34(If zstd or age una)72 420 R -.25(va)-.2 G .34(ilable, f).25 F .34
(all back to cryptographic format: `scheme \(if \(and \(command-e)-.1 F
.34(xists? "zstd"\) \(command-)-.15 F -.15(ex)72 432 S(ists? "age"\)\))
.15 E(\(seal-archi)82 444 Q .3 -.15(ve ve)-.25 H
(rsion format: 'zstd-age\)).15 E(\(seal-archi)82 456 Q .3 -.15(ve ve)
-.25 H(rsion format: 'cryptographic\)\) `).15 E(-----------------------\
-------------------------------------------------------)72 480 Q
(Implementation)72 504 Q(seal-archi)72 528 Q -.15(ve)-.25 G(-zstd-age)
.15 E(`scheme \(de\214ne \(seal-archi)72 552 Q -.15(ve)-.25 G
(-zstd-age v).15 E(ersion output\))-.15 E
("Create zstd-compressed, age-encrypted archi)77 564 Q .3 -.15(ve w)-.25
H(ith SPKI signature").15 E(\(let \(\(recipients \(v)77 588 Q
(ault-con\214g 'age-recipients\)\))-.25 E(\(signing-k)92 600 Q .3 -.15
(ey \()-.1 H -.25(va).15 G(ult-con\214g ').25 E(signing-k)-.55 E -.15
(ey)-.1 G(\)\)).15 E(\(encrypted-\214le \(sprintf "~a.tar)92 612 Q
(.zst.age" output\)\)\))-.55 E(;; Require recipients)82 636 Q
(\(unless \(pair? recipients\))82 648 Q
(\(error "No age recipients con\214gured"\)\))87 660 Q
(;; Build recipient ar)82 684 Q(gs: -r k)-.18 E -.15(ey)-.1 G 2.5(1-).15
G 2.5(rk)-2.5 G -.15(ey)-2.6 G 2.5(2.).15 G(..)-2.5 E
(\(let \(\(recipient-ar)82 696 Q(gs)-.18 E(\(string-join \(map \(lambda\
 \(r\) \(sprintf "-r ~a" r\)\) recipients\) " "\)\)\))99.5 708 Q
(;; Create archi)87 732 Q -.15(ve)-.25 G 2.5(:g).15 G(it archi)-2.5 E .3
-.15(ve | z)-.25 H(std | age).15 E(\(let \(\(temp-tar \(sprintf "/tmp/v)
87 744 Q(ault-~a.tar" v)-.25 E(ersion\)\)\))-.15 E
(\(run-command "git" "archi)92 756 Q -.15(ve)-.25 G 2.5("").15 G
(--pre\214x=v)-2.5 E(ault/")-.25 E(\(sprintf "--output=~a" temp-tar\) v)
124.5 768 Q(ersion\))-.15 E
(\(system \(sprintf "zstd -T0 -c ~a | age ~a > ~a")92 780 Q
(temp-tar recipient-ar)132 792 Q(gs encrypted-\214le\)\))-.18 E 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(\(delete-\214le temp-tar\)\))92 12 Q
(;; Sign the encrypted archi)87 36 Q -.15(ve)-.25 G(\(when signing-k)87
48 Q -.15(ey)-.1 G(\(let* \(\(archi)92 60 Q -.15(ve)-.25 G
(-bytes \(read-\214le-bytes encrypted-\214le\)\)).15 E(\(archi)109.5 72
Q -.15(ve)-.25 G(-hash \(sha512-hash archi).15 E -.15(ve)-.25 G
(-bytes\)\)).15 E(\(signature \(ed25519-sign signing-k)109.5 84 Q .3
-.15(ey a)-.1 H(rchi).15 E -.15(ve)-.25 G(-hash\)\)\)).15 E
(;; Write manifest)97 108 Q(\(with-output-to-\214le output)97 120 Q
(\(lambda \(\))102 132 Q(\(write `\(sealed-archi)107 144 Q -.15(ve)-.25
G(\(v)129.5 156 Q(ersion ,v)-.15 E(ersion\))-.15 E(\(format zstd-age\))
129.5 168 Q(\(archi)129.5 180 Q .3 -.15(ve ,)-.25 H(encrypted-\214le\))
.15 E(\(compression zstd\))129.5 192 Q(\(encryption age\))129.5 204 Q
(\(recipients ,recipients\))129.5 216 Q(\(hash ,\(blob->he)129.5 228 Q
2.5(xa)-.15 G(rchi)-2.5 E -.15(ve)-.25 G(-hash\)\)).15 E
(\(signature ,\(blob->he)129.5 240 Q 2.5(xs)-.15 G
(ignature\)\)\)\)\)\)\)\)\)\)\) `)-2.5 E(seal-restore-zstd-age)72 264 Q
(`scheme \(de\214ne \(seal-restore-zstd-age manifest v)72 288 Q(erify-k)
-.15 E .3 -.15(ey t)-.1 H(ar).15 E(get-dir identity\))-.18 E
("Restore zstd+age encrypted archi)77 300 Q -.15(ve)-.25 G(").15 E
(\(let \(\(v)77 324 Q(ersion \(cadr \(assq ')-.15 E -.15(ve)-.5 G
(rsion \(cdr manifest\)\)\)\)).15 E(\(archi)92 336 Q -.15(ve)-.25 G
(-\214le \(cadr \(assq 'archi).15 E .3 -.15(ve \()-.25 H
(cdr manifest\)\)\)\)).15 E(\(hash-he)92 348 Q 2.5(x\()-.15 G
(cadr \(assq 'hash \(cdr manifest\)\)\)\))-2.5 E(\(sig-he)92 360 Q 2.5
(x\()-.15 G(cadr \(assq ')-2.5 E(signature \(cdr manifest\)\)\)\))-.55 E
(\(id-\214le \(or identity \(v)92 372 Q
(ault-con\214g 'age-identity\)\)\)\))-.25 E(;; Require identity)82 396 Q
(\(unless id-\214le)82 408 Q(\(error "No age identity con\214gured"\)\))
87 420 Q(;; V)82 444 Q(erify signature \214rst \(before decryption\))
-1.11 E(\(when v)82 456 Q(erify-k)-.15 E -.15(ey)-.1 G(\(let* \(\(archi)
87 468 Q -.15(ve)-.25 G(-bytes \(read-\214le-bytes archi).15 E -.15(ve)
-.25 G(-\214le\)\)).15 E(\(archi)104.5 480 Q -.15(ve)-.25 G
(-hash \(sha512-hash archi).15 E -.15(ve)-.25 G(-bytes\)\)).15 E(\(e)
104.5 492 Q(xpected-hash \(he)-.15 E(x->blob hash-he)-.15 E(x\)\))-.15 E
(\(signature \(he)104.5 504 Q(x->blob sig-he)-.15 E(x\)\))-.15 E(\(pubk)
104.5 516 Q .3 -.15(ey \()-.1 H(read-k).15 E -.15(ey)-.1 G
(-from-\214le v).15 E(erify-k)-.15 E -.15(ey)-.1 G(\)\)\)).15 E
(\(unless \(equal? archi)92 540 Q -.15(ve)-.25 G(-hash e).15 E
(xpected-hash\))-.15 E(\(error "Archi)97 552 Q .3 -.15(ve h)-.25 H
(ash mismatch"\)\)).15 E(\(unless \(ed25519-v)92 576 Q(erify pubk)-.15 E
.3 -.15(ey a)-.1 H(rchi).15 E -.15(ve)-.25 G(-hash signature\)).15 E
(\(error "Signature v)97 588 Q(eri\214cation f)-.15 E(ailed"\)\)\)\))-.1
E(;; Decrypt and e)82 612 Q(xtract: age -d | zstd -d | tar -x)-.15 E
(\(system \(sprintf "age -d -i ~a < ~a | zstd -d | tar -xf - -C ~a")82
624 Q(id-\214le archi)122 636 Q -.15(ve)-.25 G(-\214le tar).15 E
(get-dir\)\)\)\) `)-.18 E(---------------------------------------------\
---------------------------------)72 660 Q(Usage Examples)72 684 Q
(Create Encrypted Archi)72 708 Q -.15(ve)-.25 G
(`scheme ;; Con\214gure recipients \(v)72 732 Q
(ault-con\214g 'age-recipients)-.25 E('\("age1ql3z7hjy54pw3h)77 744 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E(w8zmrj2kg5sfn9aqmcac8p"\)\))-.1 E .259
(;; Create archi)72 768 R .559 -.15(ve \()-.25 H(seal-archi).15 E .559
-.15(ve ")-.25 H .258(1.0.0" format: 'zstd-age\) ;; => v).15 F
(ault-1.0.0.archi)-.25 E .558 -.15(ve ;)-.25 H 2.758(;=).15 G 2.758(>v)
-2.758 G(ault-1.0.0.archi)-3.008 E -.15(ve)-.25 G(.tar).15 E(.zst.age)
-.55 E(`)72 780 Q 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Restore Encrypted Archi)72 12 Q -.15(ve)-.25 G
(`scheme ;; Con\214gure identity \(v)72 36 Q
(ault-con\214g 'age-identity "~/.con\214g/age/identity)-.25 E(.txt"\))
-.65 E(;; Restore with v)72 60 Q(eri\214cation \(seal-restore "v)-.15 E
(ault-1.0.0.archi)-.25 E -.15(ve)-.25 G(").15 E -.15(ve)107 72 S(rify-k)
.15 E -.15(ey)-.1 G 2.5(:").15 G(publisher)-2.5 E(.public")-.55 E(tar)
107 84 Q(get: "./restored"\) `)-.18 E(Command Line Equi)72 108 Q -.25
(va)-.25 G(lents).25 E 19.081(`bash Create git archi)72 132 R 19.382
-.15(ve -)-.25 H(-pre\214x=v).15 E 19.082(ault/ 1.0.0 |)-.25 F 19.082
(zstd -T0 |)26.582 F 19.082(age -r)26.582 F(age1ql3z7hjy54pw3h)72 144 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E 5(w8zmrj2kg5sfn9aqmcac8p >)-.1 F -.25(va)
2.5 G(ult-1.0.0.tar).25 E(.zst.age)-.55 E
(Restore age -d -i ~/.con\214g/age/identity)72 168 Q(.txt < v)-.65 E
(ault-1.0.0.tar)-.25 E(.zst.age |)-.55 E(zstd -d |)7.5 E(tar -xf - `)7.5
E(---------------------------------------------------------------------\
---------)72 192 Q(Migration)72 216 Q(From Cryptographic to Zstd-Age)72
240 Q(`scheme ;; Re-archi)72 264 Q .3 -.15(ve ex)-.25 H
(isting releases with ne).15 E 2.5(wf)-.25 G(ormat \(for)-2.5 E(-each)
-.2 E(\(lambda \(v)77 276 Q(ersion\))-.15 E(\(seal-archi)82 288 Q .3
-.15(ve ve)-.25 H(rsion format: 'zstd-age\)\)).15 E
(\(get-local-releases\)\) `)77 300 Q(Backw)72 324 Q(ard Compatibility)
-.1 E .438(Both formats can coe)72 348 R .438(xist. The manifest format\
 \214eld determines restoration method: - \(format cryptographic\) \342\
 seal-)-.15 F
(restore-cryptographic - \(format zstd-age\) \342 seal-restore-zstd-age)
72 360 Q(--------------------------------------------------------------\
----------------)72 384 Q(References)72 408 Q .481(1. Zstd - F)72 432 R
(acebook')-.15 E 2.981(sc)-.55 G .482
(ompression algorithm 2. Age - Modern encryption tool 3. RFC-006 - V)
-2.981 F .482(ault System Architec-)-1.11 F
(ture 4. RFC-004 - SPKI Authorization)72 444 Q(------------------------\
------------------------------------------------------)72 468 Q
(Changelog)72 492 Q 2.5(-2)72 516 S(026-01-06 - Initial speci\214cation)
-2.5 E(----------------------------------------------------------------\
--------------)72 540 Q 1.127(Implementation Status: Complete Compressi\
on: Zstd \(parallel\) Encryption: Age \(X25519 + ChaCha20-Poly1305\))72
564 R(Signature: Ed25519 \(SPKI\))72 576 Q 0 Cg EP
%%Trailer
end
%%EOF
