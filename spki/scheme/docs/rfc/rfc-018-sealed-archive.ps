%!PS-Adobe-3.0
%%Creator: groff version 1.23.0
%%CreationDate: Thu Jan  8 15:17:54 2026
%%DocumentNeededResources: font Times-Roman
%%DocumentSuppliedResources: procset grops 1.23 0
%%Pages: 6
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.23 0
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
% The ASCII code of the space character.
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
% name size font SF -
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
% name a c d font MF -
/MF{
findfont
[5 2 roll
0 3 1 roll % b
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
% Enable manual feed.
% MANUAL -
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
% Guess the page length.
% This assumes that the imageable area is vertically centered on the page.
% PLG - length
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
% BP -
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
DEFS/BPhook known{DEFS begin BPhook end}if
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
% centerx centery radius startangle endangle DA -
/DA{
newpath arcn stroke
}bind def
% x y SN - x' y'
% round a position to nearest (pixel + (.25,.25))
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
% endx endy startx starty DL -
% we round the endpoints of the line, so that parallel horizontal
% and vertical lines will appear even
/DL{
SN
moveto
SN
lineto stroke
}bind def
% centerx centery radius DC -
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
%  width height centerx centery DE -
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
% these are for splines
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
% fill the last path
% r g b Fr -
/Fr{
setrgbcolor fill
}bind def
% c m y k Fk -
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
% g Fg -
/Fg{
setgray fill
}bind def
% fill with the "current color"
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
% new_font_name encoding_vector old_font_name RE -
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne
2 index/UniqueID ne
and
{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
% hpos vpos EBEGIN -
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
% llx lly newwid wid newht ht newllx newlly PBEGIN -
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
% set the graphics state to default values
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
%
%  Any included setpagedevice should be ignored.
%  See: http://www.w-beer.de/doc/ps/.
%
/setpagedevice{}def
mark
}bind def
/PEND{
cleartomark
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(RFC-018: Sealed Archi)72 12 Q .3 -.15(ve Fo)-.25
H(rmat).15 E(Status: Implemented Date: January 2026 Author: Derrell Pip\
er ddp@eludom.net Implementation: v)72 36 Q(ault.scm)-.25 E(-----------\
-------------------------------------------------------------------)72
60 Q(Abstract)72 84 Q .238(This RFC speci\214es the Zstd+Age archi)72
108 R .538 -.15(ve f)-.25 H .237
(ormat for the Library of Cyberspace: a modern archi).15 F .537 -.15
(ve f)-.25 H .237(ormat combining).15 F(Zstd compression with Age encry\
ption, replacing gzip for cryptographic archi)72 120 Q -.15(ve)-.25 G
(s.).15 E(-------------------------------------------------------------\
-----------------)72 144 Q(Moti)72 168 Q -.25(va)-.25 G(tion).25 E
(The le)72 192 Q -.05(ga)-.15 G .3 -.15(cy c).05 H(ryptographic archi)
.15 E .3 -.15(ve f)-.25 H
(ormat uses gzip compression without encryption:).15 E 32.5(Aspect gzip)
77 216 R(\(le)2.5 E -.05(ga)-.15 G -.15(cy).05 G 7.5(\)z).15 G
(std + age)-7.5 E
(------------------- --------------- -------------------------------)77
228 Q(Compression speed)77 240 Q(Slo)7.5 E 30(wF)-.25 G
(ast \(parallel\))-30.15 E(Compression ratio)77 252 Q 27.5(Good Better)
7.5 F 22.5(Encryption None)77 264 R(Built-in \(age\))30 E -2.15 -.25
(Ke y)77 276 T 5(compatibility N/A)2.75 F
(X25519/Ed25519 \(SPKI aligned\))32.5 E 25(Streaming Y)77 288 R 30(es Y)
-1 F(es)-1 E(Wh)72 312 Q 2.5(yc)-.05 G(hange?)-2.5 E 3.283
(1. Encryption)72 336 R .784(at rest - Archi)3.283 F -.15(ve)-.25 G
3.284(sc).15 G .784(ontain potentially sensiti)-3.284 F 1.084 -.15(ve d)
-.25 H .784(ata 2.).15 F -.15(Fa)5.784 G .784
(ster compression - Zstd is 3-5x f).15 F .784(aster than)-.1 F 3.471
(gzip 3.)72 348 R 3.471(Better ratios - Zstd typically achie)8.471 F
-.15(ve)-.25 G 5.971(s1).15 G 3.471(0-20% better compression 4.)-5.971 F
-2.15 -.25(Ke y)8.47 H 3.47(alignment - Age uses)6.22 F
(X25519/Ed25519, same curv)72 360 Q 2.5(ef)-.15 G(amily as SPKI 5.)-2.6
E -.15(Pa)5 G(rallel support - zstd -T0 uses all cores).15 E(----------\
--------------------------------------------------------------------)72
384 Q(Speci\214cation)72 408 Q(Archi)72 432 Q .3 -.15(ve C)-.25 H
(reation Pipeline).15 E(git archi)82 456 Q .3 -.15(ve | t)-.25 H
(ar --zstd | age -r <recipients> > archi).15 E -.15(ve)-.25 G(.tar).15 E
(.zst.age)-.55 E(Or equi)72 480 Q -.25(va)-.25 G(lently:).25 E(tar --zs\
td -cf - <\214les> | age -r <recipient1> -r <recipient2> > archi)82 504
Q -.15(ve)-.25 G(.tar).15 E(.zst.age)-.55 E(Archi)72 528 Q .3 -.15(ve R)
-.25 H(estoration Pipeline).15 E(age -d -i <identity> < archi)82 552 Q
-.15(ve)-.25 G(.tar).15 E(.zst.age | zstd -d | tar -xf -)-.55 E
(Manifest F)72 576 Q(ormat)-.15 E(\(sealed-archi)82 600 Q -.15(ve)-.25 G
(\(v)87 612 Q(ersion "1.0.0"\))-.15 E(\(format zstd-age\))87 624 Q
(\(archi)87 636 Q .3 -.15(ve ")-.25 H -.25(va).15 G(ult-1.0.0.archi).25
E -.15(ve)-.25 G(.tar).15 E(.zst.age"\))-.55 E(\(compression zstd\))87
648 Q(\(encryption age\))87 660 Q(\(recipients \("age1ql3z7hjy54pw3h)87
672 Q(yww5ayyfg7zqgvc7w3j2el)-.05 E(w8zmrj2kg5sfn9aqmcac8p"\)\))-.1 E
(\(hash "sha512:..."\))87 684 Q(\(signature "ed25519:..."\)\))87 696 Q
(File Extensions)72 720 Q 12.5(Extension Contents)77 744 R
(-------------- -------------------------------)77 756 Q(.archi)77 768 Q
15.3 -.15(ve S)-.25 H(-e).15 E(xpression manifest)-.15 E(.tar)77 780 Q 5
(.zst.age Encrypted,)-.55 F(compressed tarball)2.5 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Con\214guration)72 12 Q
(;; Set age recipients for encryption)82 36 Q(\(v)82 48 Q
(ault-con\214g 'age-recipients)-.25 E('\("age1ql3z7hjy54pw3h)87 60 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E(w8zmrj2kg5sfn9aqmcac8p")-.1 E
("age1..."\)\))92 72 Q(;; Set age identity for decryption)82 96 Q(\(v)82
108 Q(ault-con\214g 'age-identity "~/.con\214g/age/identity)-.25 E
(.txt"\))-.65 E(;; Set def)82 132 Q(ault archi)-.1 E .3 -.15(ve f)-.25 H
(ormat).15 E(\(v)82 144 Q(ault-con\214g 'archi)-.25 E -.15(ve)-.25 G
(-format 'zstd-age\)).15 E(--------------------------------------------\
----------------------------------)72 168 Q(Performance Characteristics)
72 192 Q(Compression)72 216 Q(Zstd def)82 240 Q(ault \(-3\):)-.1 E 5
(Compression: ~400)87 252 R(MB/s)2.5 E(Decompression: ~800 MB/s)87 264 Q
20(Ratio: ~3:1)87 276 R(\(typical source code\))2.5 E
(Zstd parallel \(-T0\):)82 300 Q 5(Compression: ~400)87 312 R
(MB/s \303 cores)2.5 E(Decompression: ~800 MB/s \303 cores)87 324 Q
(Gzip comparison:)82 348 Q 5(Compression: ~30)87 360 R(MB/s)2.5 E
(Decompression: ~200 MB/s)87 372 Q 20(Ratio: ~2.5:1)87 384 R(Encryption)
72 408 Q(Age X25519:)82 432 Q 2.5(Encrypt: ~1)87 444 R
(GB/s \(ChaCha20-Poly1305\))2.5 E 2.5(Decrypt: ~1)87 456 R(GB/s)2.5 E
-2.15 -.25(Ke y)87 468 T(size: 32 bytes \(public\), 32 bytes \(pri)2.75
E -.25(va)-.25 G(te\)).25 E(Age o)82 492 Q -.15(ve)-.15 G(rhead:).15 E 5
(Header: ~200)87 504 R(bytes per recipient)2.5 E(MA)87 516 Q 12.5(C: 16)
-.4 F(bytes)2.5 E(Signature)72 540 Q(Ed25519:)82 564 Q 10(Sign: ~10)87
576 R<cebc73>2.5 E -1.11(Ve)87 588 S 5(rify: ~10)1.11 F<cebc73>2.5 E
(Signature: 64 bytes)87 600 Q -.8(To)72 624 S(tal Pipeline).8 E
(10 MB archi)82 648 Q -.15(ve)-.25 G(:).15 E
(Compress \(zstd -T0\): ~25 ms)87 660 Q(Encrypt \(age\):)87 672 Q
(~10 ms)17.5 E(Hash \(SHA-512\):)87 684 Q(~1 ms)15 E(Sign \(Ed25519\):)
87 696 Q(~10 \316\274s)15 E -.8(To)87 708 S 35(tal: ~36).8 F(ms)2.5 E
(vs gzip le)82 732 Q -.05(ga)-.15 G -.15(cy).05 G(:).15 E
(Compress \(gzip\):)87 744 Q(~300 ms)12.5 E(Hash \(SHA-512\):)87 756 Q
(~1 ms)15 E(Sign \(Ed25519\):)87 768 Q(~10 \316\274s)15 E -.8(To)87 780
S 35(tal: ~301).8 F(ms)2.5 E 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Speedup: ~8x)82 12 Q(--------------------------\
----------------------------------------------------)72 36 Q
(Security Model)72 60 Q(Encryption Layer \(Age\))72 84 Q 3.275(-A)72 108
S .776(lgorithm: X25519 + ChaCha20-Poly1305 - Recipients: Multiple allo)
-3.275 F .776(wed \(each can decrypt\) - F)-.25 F(orw)-.15 E .776
(ard secrec)-.1 F(y:)-.15 E(Ephemeral k)72 120 Q .3 -.15(ey p)-.1 H
(er archi).15 E .3 -.15(ve - A)-.25 H(uthenticity: Poly1305 MA).15 E(C)
-.4 E(Signature Layer \(SPKI\))72 144 Q 2.5(-A)72 168 S
(lgorithm: Ed25519 - Scope: Signs encrypted archi)-2.5 E .3 -.15(ve h)
-.25 H(ash - Non-repudiation: Signer cannot den).15 E 2.5(yc)-.15 G
(reating archi)-2.5 E -.15(ve)-.25 G -1.11(Ve)72 192 S
(ri\214cation Order)1.11 E 2.931(1. V)72 216 R .431
(erify signature - Before decryption \(f)-1.11 F .431(ail f)-.1 F .431
(ast on tampering\) 2.)-.1 F -1.11(Ve)5.43 G .43
(rify hash - Encrypted archi)1.11 F .73 -.15(ve i)-.25 H(nte).15 E .43
(grity 3.)-.15 F(De-)5.43 E(crypt - Only after signature v)72 228 Q
(eri\214ed 4.)-.15 E(Extract - Only after successful decryption)5 E
(Threat Mitig)72 252 Q(ations)-.05 E 32.5(Threat Mitig)77 276 R(ation)
-.05 E(------------------- ------------------------------------)77 288 Q
(Ea)77 300 Q -.15(ve)-.2 G 15(sdropping Age).15 F
(encryption \(X25519 + ChaCha20\))2.5 E -.8(Ta)77 312 S 25
(mpering SHA-512).8 F(hash + Ed25519 signature)2.5 E(Replay attacks)77
324 Q -1.11(Ve)15 G(rsion + timestamp in manifest)1.11 E -2.15 -.25
(Ke y)77 336 T 12.5(compromise Multiple)2.75 F(recipients, k)2.5 E .3
-.15(ey r)-.1 H(otation).15 E(Chosen cipherte)77 348 Q 5(xt Poly1305)
-.15 F(authentication)2.5 E(-------------------------------------------\
-----------------------------------)72 372 Q(Compatibility)72 396 Q
(Age Identity T)72 420 Q(ypes)-.8 E 2.5(#N)82 444 S(ati)-2.5 E .3 -.15
(ve a)-.25 H(ge k).15 E -.15(ey)-.1 G(age1ql3z7hjy54pw3h)82 456 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E(w8zmrj2kg5sfn9aqmcac8p)-.1 E 2.5(#S)82
480 S(SH k)-2.5 E .3 -.15(ey \()-.1 H
(age supports ssh-ed25519 and ssh-rsa\)).15 E(ssh-ed25519 AAAA)82 492 Q
(C3NzaC1lZDI1NTE5AAAAI...)-.4 E 2.5(#G)82 516 S(itHub k)-2.5 E .3 -.15
(ey \()-.1 H(via age-plugin-github or ssh\)).15 E(github:username)82 528
Q(Platform Support)72 552 Q 5(Platform zstd)77 576 R(age)17.5 E
(---------- ---------- -------------------)77 588 Q 12.5(macOS Homebre)
77 600 R 7.5(wH)-.25 G(omebre)-7.5 E(w)-.25 E 12.5(Linux apt/yum)77 612
R(apt/yum or binary)10 E 7.5(FreeBSD pkg)77 624 R(pkg)20 E -.4(Wi)77 636
S(ndo).4 E 7.5(ws winget)-.25 F(winget or binary)12.5 E -.15(Fa)72 660 S
(llback).15 E(If zstd or age una)72 684 Q -.25(va)-.2 G(ilable, f).25 E
(all back to cryptographic format:)-.1 E(\(if \(and \(command-e)82 708 Q
(xists? "zstd"\) \(command-e)-.15 E(xists? "age"\)\))-.15 E
(\(seal-archi)92 720 Q .3 -.15(ve ve)-.25 H(rsion format: 'zstd-age\))
.15 E(\(seal-archi)92 732 Q .3 -.15(ve ve)-.25 H
(rsion format: 'cryptographic\)\)).15 E(-------------------------------\
-----------------------------------------------)72 756 Q(Implementation)
72 780 Q 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(seal-archi)72 12 Q -.15(ve)-.25 G(-zstd-age).15
E(\(de\214ne \(seal-archi)82 36 Q -.15(ve)-.25 G(-zstd-age v).15 E
(ersion output\))-.15 E("Create zstd-compressed, age-encrypted archi)87
48 Q .3 -.15(ve w)-.25 H(ith SPKI signature").15 E
(\(let \(\(recipients \(v)87 72 Q(ault-con\214g 'age-recipients\)\))-.25
E(\(signing-k)102 84 Q .3 -.15(ey \()-.1 H -.25(va).15 G(ult-con\214g ')
.25 E(signing-k)-.55 E -.15(ey)-.1 G(\)\)).15 E
(\(encrypted-\214le \(sprintf "~a.tar)102 96 Q(.zst.age" output\)\)\))
-.55 E(;; Require recipients)92 120 Q(\(unless \(pair? recipients\))92
132 Q(\(error "No age recipients con\214gured"\)\))97 144 Q
(;; Build recipient ar)92 168 Q(gs: -r k)-.18 E -.15(ey)-.1 G 2.5(1-).15
G 2.5(rk)-2.5 G -.15(ey)-2.6 G 2.5(2.).15 G(..)-2.5 E
(\(let \(\(recipient-ar)92 180 Q(gs)-.18 E(\(string-join \(map \(lambda\
 \(r\) \(sprintf "-r ~a" r\)\) recipients\) " "\)\)\))109.5 192 Q
(;; Create archi)97 216 Q -.15(ve)-.25 G 2.5(:g).15 G(it archi)-2.5 E .3
-.15(ve | z)-.25 H(std | age).15 E(\(let \(\(temp-tar \(sprintf "/tmp/v)
97 228 Q(ault-~a.tar" v)-.25 E(ersion\)\)\))-.15 E
(\(run-command "git" "archi)102 240 Q -.15(ve)-.25 G 2.5("").15 G
(--pre\214x=v)-2.5 E(ault/")-.25 E(\(sprintf "--output=~a" temp-tar\) v)
134.5 252 Q(ersion\))-.15 E
(\(system \(sprintf "zstd -T0 -c ~a | age ~a > ~a")102 264 Q
(temp-tar recipient-ar)142 276 Q(gs encrypted-\214le\)\))-.18 E
(\(delete-\214le temp-tar\)\))102 288 Q(;; Sign the encrypted archi)97
312 Q -.15(ve)-.25 G(\(when signing-k)97 324 Q -.15(ey)-.1 G
(\(let* \(\(archi)102 336 Q -.15(ve)-.25 G
(-bytes \(read-\214le-bytes encrypted-\214le\)\)).15 E(\(archi)119.5 348
Q -.15(ve)-.25 G(-hash \(sha512-hash archi).15 E -.15(ve)-.25 G
(-bytes\)\)).15 E(\(signature \(ed25519-sign signing-k)119.5 360 Q .3
-.15(ey a)-.1 H(rchi).15 E -.15(ve)-.25 G(-hash\)\)\)).15 E
(;; Write manifest)107 384 Q(\(with-output-to-\214le output)107 396 Q
(\(lambda \(\))112 408 Q(\(write `\(sealed-archi)117 420 Q -.15(ve)-.25
G(\(v)139.5 432 Q(ersion ,v)-.15 E(ersion\))-.15 E(\(format zstd-age\))
139.5 444 Q(\(archi)139.5 456 Q .3 -.15(ve ,)-.25 H(encrypted-\214le\))
.15 E(\(compression zstd\))139.5 468 Q(\(encryption age\))139.5 480 Q
(\(recipients ,recipients\))139.5 492 Q(\(hash ,\(blob->he)139.5 504 Q
2.5(xa)-.15 G(rchi)-2.5 E -.15(ve)-.25 G(-hash\)\)).15 E
(\(signature ,\(blob->he)139.5 516 Q 2.5(xs)-.15 G
(ignature\)\)\)\)\)\)\)\)\)\)\))-2.5 E(seal-restore-zstd-age)72 540 Q
(\(de\214ne \(seal-restore-zstd-age manifest v)82 564 Q(erify-k)-.15 E
.3 -.15(ey t)-.1 H(ar).15 E(get-dir identity\))-.18 E
("Restore zstd+age encrypted archi)87 576 Q -.15(ve)-.25 G(").15 E
(\(let \(\(v)87 600 Q(ersion \(cadr \(assq ')-.15 E -.15(ve)-.5 G
(rsion \(cdr manifest\)\)\)\)).15 E(\(archi)102 612 Q -.15(ve)-.25 G
(-\214le \(cadr \(assq 'archi).15 E .3 -.15(ve \()-.25 H
(cdr manifest\)\)\)\)).15 E(\(hash-he)102 624 Q 2.5(x\()-.15 G
(cadr \(assq 'hash \(cdr manifest\)\)\)\))-2.5 E(\(sig-he)102 636 Q 2.5
(x\()-.15 G(cadr \(assq ')-2.5 E(signature \(cdr manifest\)\)\)\))-.55 E
(\(id-\214le \(or identity \(v)102 648 Q
(ault-con\214g 'age-identity\)\)\)\))-.25 E(;; Require identity)92 672 Q
(\(unless id-\214le)92 684 Q(\(error "No age identity con\214gured"\)\))
97 696 Q(;; V)92 720 Q(erify signature \214rst \(before decryption\))
-1.11 E(\(when v)92 732 Q(erify-k)-.15 E -.15(ey)-.1 G(\(let* \(\(archi)
97 744 Q -.15(ve)-.25 G(-bytes \(read-\214le-bytes archi).15 E -.15(ve)
-.25 G(-\214le\)\)).15 E(\(archi)114.5 756 Q -.15(ve)-.25 G
(-hash \(sha512-hash archi).15 E -.15(ve)-.25 G(-bytes\)\)).15 E(\(e)
114.5 768 Q(xpected-hash \(he)-.15 E(x->blob hash-he)-.15 E(x\)\))-.15 E
(\(signature \(he)114.5 780 Q(x->blob sig-he)-.15 E(x\)\))-.15 E(\(pubk)
114.5 792 Q .3 -.15(ey \()-.1 H(read-k).15 E -.15(ey)-.1 G
(-from-\214le v).15 E(erify-k)-.15 E -.15(ey)-.1 G(\)\)\)).15 E 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(\(unless \(equal? archi)102 24 Q -.15(ve)-.25 G
(-hash e).15 E(xpected-hash\))-.15 E(\(error "Archi)107 36 Q .3 -.15
(ve h)-.25 H(ash mismatch"\)\)).15 E(\(unless \(ed25519-v)102 60 Q
(erify pubk)-.15 E .3 -.15(ey a)-.1 H(rchi).15 E -.15(ve)-.25 G
(-hash signature\)).15 E(\(error "Signature v)107 72 Q(eri\214cation f)
-.15 E(ailed"\)\)\)\))-.1 E(;; Decrypt and e)92 96 Q
(xtract: age -d | zstd -d | tar -x)-.15 E
(\(system \(sprintf "age -d -i ~a < ~a | zstd -d | tar -xf - -C ~a")92
108 Q(id-\214le archi)132 120 Q -.15(ve)-.25 G(-\214le tar).15 E
(get-dir\)\)\)\))-.18 E(-----------------------------------------------\
-------------------------------)72 144 Q(Usage Examples)72 168 Q
(Create Encrypted Archi)72 192 Q -.15(ve)-.25 G
(;; Con\214gure recipients)82 216 Q(\(v)82 228 Q
(ault-con\214g 'age-recipients)-.25 E('\("age1ql3z7hjy54pw3h)87 240 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E(w8zmrj2kg5sfn9aqmcac8p"\)\))-.1 E
(;; Create archi)82 264 Q -.15(ve)-.25 G(\(seal-archi)82 276 Q .3 -.15
(ve ")-.25 H(1.0.0" format: 'zstd-age\)).15 E(;; => v)82 288 Q
(ault-1.0.0.archi)-.25 E -.15(ve)-.25 G(;; => v)82 300 Q
(ault-1.0.0.archi)-.25 E -.15(ve)-.25 G(.tar).15 E(.zst.age)-.55 E
(Restore Encrypted Archi)72 324 Q -.15(ve)-.25 G
(;; Con\214gure identity)82 348 Q(\(v)82 360 Q
(ault-con\214g 'age-identity "~/.con\214g/age/identity)-.25 E(.txt"\))
-.65 E(;; Restore with v)82 384 Q(eri\214cation)-.15 E
(\(seal-restore "v)82 396 Q(ault-1.0.0.archi)-.25 E -.15(ve)-.25 G(").15
E -.15(ve)117 408 S(rify-k).15 E -.15(ey)-.1 G 2.5(:").15 G(publisher)
-2.5 E(.public")-.55 E(tar)117 420 Q(get: "./restored"\))-.18 E
(Command Line Equi)72 444 Q -.25(va)-.25 G(lents).25 E 2.5(#C)82 468 S
(reate)-2.5 E 25.851(git archi)82 480 R 26.151 -.15(ve -)-.25 H
(-pre\214x=v).15 E 25.851(ault/ 1.0.0 |)-.25 F 25.851(zstd -T0 |)43.351
F 25.852(age -r)43.351 F(age1ql3z7hjy54pw3h)72 492 Q
(yww5ayyfg7zqgvc7w3j2el)-.05 E 15(w8zmrj2kg5sfn9aqmcac8p >)-.1 F -.25
(va)2.5 G(ult-1.0.0.tar).25 E(.zst.age)-.55 E 2.5(#R)82 516 S(estore)
-2.5 E(age -d -i ~/.con\214g/age/identity)82 528 Q(.txt < v)-.65 E
(ault-1.0.0.tar)-.25 E(.zst.age |)-.55 E(zstd -d |)17.5 E(tar -xf -)17.5
E(---------------------------------------------------------------------\
---------)72 552 Q(Migration)72 576 Q(From Cryptographic to Zstd-Age)72
600 Q(;; Re-archi)82 624 Q .3 -.15(ve ex)-.25 H(isting releases with ne)
.15 E 2.5(wf)-.25 G(ormat)-2.5 E(\(for)82 636 Q(-each)-.2 E
(\(lambda \(v)87 648 Q(ersion\))-.15 E(\(seal-archi)92 660 Q .3 -.15
(ve ve)-.25 H(rsion format: 'zstd-age\)\)).15 E
(\(get-local-releases\)\))87 672 Q(Backw)72 696 Q(ard Compatibility)-.1
E .438(Both formats can coe)72 720 R .438(xist. The manifest format \
\214eld determines restoration method: - \(format cryptographic\) \342 \
seal-)-.15 F
(restore-cryptographic - \(format zstd-age\) \342 seal-restore-zstd-age)
72 732 Q(--------------------------------------------------------------\
----------------)72 756 Q(References)72 780 Q 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 3.128(1. Zstd)72 12 R 3.128(-F)3.128 G .629
(acebook\342s compression algorithm 2.)-3.278 F .629
(Age - Modern encryption tool 3.)5.629 F .629(RFC-006 - V)5.629 F .629
(ault System Archi-)-1.11 F(tecture 4.)72 24 Q
(RFC-004 - SPKI Authorization)5 E(-------------------------------------\
-----------------------------------------)72 48 Q(Changelog)72 72 Q 2.5
(-2)72 96 S(026-01-06 - Initial speci\214cation)-2.5 E(----------------\
--------------------------------------------------------------)72 120 Q
1.127(Implementation Status: Complete Compression: Zstd \(parallel\) En\
cryption: Age \(X25519 + ChaCha20-Poly1305\))72 144 R
(Signature: Ed25519 \(SPKI\))72 156 Q 0 Cg EP
%%Trailer
end
%%EOF
