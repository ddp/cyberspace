%!PS-Adobe-3.0
%%Creator: groff version 1.23.0
%%CreationDate: Sun Jan 11 22:47:37 2026
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%+ font Courier
%%DocumentSuppliedResources: procset grops 1.23 0
%%Pages: 7
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.23 0
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
% The ASCII code of the space character.
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
% name size font SF -
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
% name a c d font MF -
/MF{
findfont
[5 2 roll
0 3 1 roll % b
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
% Enable manual feed.
% MANUAL -
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
% Guess the page length.
% This assumes that the imageable area is vertically centered on the page.
% PLG - length
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
% BP -
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
DEFS/BPhook known{DEFS begin BPhook end}if
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
% centerx centery radius startangle endangle DA -
/DA{
newpath arcn stroke
}bind def
% x y SN - x' y'
% round a position to nearest (pixel + (.25,.25))
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
% endx endy startx starty DL -
% we round the endpoints of the line, so that parallel horizontal
% and vertical lines will appear even
/DL{
SN
moveto
SN
lineto stroke
}bind def
% centerx centery radius DC -
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
%  width height centerx centery DE -
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
% these are for splines
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
% fill the last path
% r g b Fr -
/Fr{
setrgbcolor fill
}bind def
% c m y k Fk -
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
% g Fg -
/Fg{
setgray fill
}bind def
% fill with the "current color"
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
% new_font_name encoding_vector old_font_name RE -
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne
2 index/UniqueID ne
and
{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
% hpos vpos EBEGIN -
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
% llx lly newwid wid newht ht newllx newlly PBEGIN -
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
% set the graphics state to default values
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
%
%  Any included setpagedevice should be ignored.
%  See: http://www.w-beer.de/doc/ps/.
%
/setpagedevice{}def
mark
}bind def
/PEND{
cleartomark
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
%%IncludeResource: font Times-Roman
%%IncludeResource: font Courier
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Courier@0 ENC0/Courier RE/Times-Roman@0 ENC0/Times-Roman RE
/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 12/Times-Bold@0 SF(RFC-015: V)216.096 123 Q(ersioning and Rollback)
-1.2 E/F1 10/Times-Italic@0 SF(Libr)260.85 159 Q(ary of Cyber)-.15 E
(space)-.1 E/F2 10/Times-Roman@0 SF(2026)296 177 Q F1(ABSTRA)282.535 213
Q(CT)-.3 E/F3 10/Times-Bold@0 SF 2.5(1. Abstract)72 261 R F2 1.49
(This RFC speci\214es user)72 276.6 R 1.489(-visible v)-.2 F 1.489
(ersioning and rollback semantics for Cyberspace v)-.15 F 1.489
(aults, pro)-.25 F 1.489(viding clear mental)-.15 F(models for v)72
288.6 Q(ersion management, safe rollback operations, and reco)-.15 E
-.15(ve)-.15 G(ry from mistak).15 E(es.)-.1 E F3 2.5(2. Moti)72 312.6 R
-.1(va)-.1 G(tion).1 E F2
(Users need simple answers to simple questions:)72 328.2 Q 6.5<8357>72
343.8 S(hat v)-6.5 E(ersion am I on?)-.15 E 6.5<8357>72 359.4 S(hat v)
-6.5 E(ersions e)-.15 E(xist?)-.15 E 6.5<8348>72 375 S .5 -.25(ow d)-6.5
H 2.5(oIg).25 G 2.5(ob)-2.5 G(ack?)-2.5 E 6.5<8357>72 390.6 S
(hat if I mak)-6.5 E 2.5(eam)-.1 G(istak)-2.5 E(e?)-.1 E(Git pro)72
409.8 Q(vides mechanisms. Cyberspace pro)-.15 E(vides semantics:)-.15 E
/F4 8/Courier@0 SF 38.4(seal-version >)108 427.8 R("2.1.0")4.8 E 33.6
(seal-versions >)108 439.8 R([1.0.0, 1.1.0, 2.0.0, 2.1.0])4.8 E
(seal-rollback 2.0.0)108 451.8 Q 4.8(>D)9.6 G(one. Now at 2.0.0.)-4.8 E
38.4(seal-recover >)108 463.8 R(Here's what you can recover.)4.8 E F3
2.5(3. Speci\214cation)72 481.8 R 2.5(3.1. V)72 505.8 R(ersion Model)-1
E F4(HEAD)228 523.8 Q(v)232.8 535.8 Q
(1.0.0 --> 1.1.0 --> 2.0.0 --> 2.1.0)127.2 547.8 Q 91.2(||)136.8 559.8 S
91.2(|+)136.8 571.8 S(-- seal-rollback target)-91.2 E(|)136.8 583.8 Q
(+-- seal-archive snapshots)136.8 595.8 Q F2 -1.11(Ve)72 613.8 S
(rsions are semantic \(X.Y.Z\), immutable, signed.)1.11 E
(HEAD is current w)72 629.4 Q(orking state.)-.1 E(Rollback creates forw)
72 645 Q(ard commit that restores past state.)-.1 E F3 2.5(3.2. Cor)72
669 R 2.5(eO)-.18 G(perations)-2.5 E F2(#### seal-v)72 684.6 Q(ersion)
-.15 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-015 0)72 48 R(Report current v)72 84
Q(ersion.)-.15 E/F1 8/Courier@0 SF(\(seal-version\))108 102 Q
(;; => "2.1.0" or "2.1.0+3" \(3 commits past release\))108 114 Q F0 .237
(Output format: - X.Y.Z - Exactly at release - X.Y.Z+N - N commits past\
 release - X.Y.Z-de)72 132 R 2.738(v-D)-.25 G -2.15 -.25(ev e)-2.738 H
.238(lopment branch).25 F 2.5(-u)72 144 S -1.85 -.4(nv e)-2.5 H
(rsioned - No releases yet).4 E(#### seal-v)72 159.6 Q(ersions)-.15 E
(List all v)72 175.2 Q(ersions.)-.15 E F1(\(seal-versions\))108 193.2 Q
(;; => \("1.0.0" "1.1.0" "2.0.0" "2.1.0"\))108 205.2 Q
(\(seal-versions verbose: #t\))108 229.2 Q(;; =>)108 241.2 Q(;; 1.0.0)
108 253.2 Q 4.8(2026-01-01 "Initial)9.6 F(release")4.8 E(;; 1.1.0)108
265.2 Q 4.8(2026-01-05 "Bug)9.6 F(fixes")4.8 E(;; 2.0.0)108 277.2 Q 4.8
(2026-01-10 "New)9.6 F(governance model")4.8 E(;; 2.1.0)108 289.2 Q 4.8
(2026-01-15 "Performance)9.6 F(improvements")4.8 E F0
(#### seal-rollback)72 307.2 Q(Roll back to speci\214c v)72 322.8 Q
(ersion.)-.15 E F1(\(seal-rollback "2.0.0"\))108 340.8 Q F0 .46
(Process: 1. V)72 358.8 R .46(erify v)-1.11 F .46(ersion e)-.15 F .459(\
xists 2. Check for uncommitted changes \(abort or stash\) 3. Create rol\
lback commit with)-.15 F(contents of tar)72 370.8 Q(get v)-.18 E
(ersion 4. Record in audit trail 5. Optionally create rollback tag)-.15
E(Rollback commit message:)72 386.4 Q F1(Rollback to 2.0.0)108 404.4 Q
(Restored vault state to version 2.0.0.)108 428.4 Q
(Previous HEAD was 2.1.0+3.)108 440.4 Q
(Reason: [user-provided or "Manual rollback"])108 464.4 Q F0(NO)72 482.4
Q 2.5(Tag)-.4 G(it reset. History preserv)-2.5 E(ed. Rollback is a forw)
-.15 E(ard operation.)-.1 E(#### seal-dif)72 498 Q(f)-.25 E(Compare v)72
513.6 Q(ersions.)-.15 E F1(\(seal-diff "2.0.0" "2.1.0"\))108 531.6 Q
(;; Shows what changed between versions)108 543.6 Q
(\(seal-diff "2.0.0"\))108 567.6 Q(;; Shows what changed since 2.0.0)108
579.6 Q F0(#### seal-reco)72 597.6 Q -.15(ve)-.15 G(r).15 E(Reco)72
613.2 Q -.15(ve)-.15 G(ry options for mistak).15 E(es.)-.1 E F1
(\(seal-recover\))108 631.2 Q(;; =>)108 643.2 Q(;; Recovery options:)108
655.2 Q 9.6(;; 1.)108 667.2 R
(Uncommitted changes \(stashed 5 minutes ago\))4.8 E 9.6(;; 2.)108 679.2
R(Last commit \(seal-undo\))4.8 E 9.6(;; 3.)108 691.2 R
(Version 2.1.0 \(seal-rollback "2.1.0"\))4.8 E 9.6(;; 4.)108 703.2 R
(Archive vault-2.0.0.archive \(seal-restore\))4.8 E 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-015 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(4. Rollback)72 84 R(Semantics)2.5 E 2.5(4.1. F)72 108 R
(orward Rollback \(Default\))-.25 E/F2 8/Courier@0 SF 4.8(Before: 1.0.0)
108 126 R 4.8(>1)4.8 G(.1.0 > 2.0.0 > 2.1.0 > HEAD)-4.8 E(^)232.8 138 Q
(rollback target)208.8 150 Q 9.6(After: 1.0.0)108 174 R 4.8(>1)4.8 G
(.1.0 > 2.0.0 > 2.1.0 > [rollback commit])-4.8 E 105.6(||)232.8 186 S
(+----------------------+)232.8 198 Q(contents match)252 210 Q F0
(History preserv)72 240 Q(ed. Audit trail sho)-.15 E(ws rollback.)-.25 E
F1 2.5(4.2. Hard)72 264 R(Rollback \(Danger)2.5 E(ous\))-.18 E F2
(\(seal-rollback "2.0.0" hard: #t\))108 282 Q F0(Actually resets to v)72
300 Q(ersion. Destro)-.15 E(ys history.)-.1 E(Requires: - Explicit hard\
: #t \215ag - Con\214rmation prompt - Audit entry before destruction)72
315.6 Q F1 2.5(4.3. Rollback)72 339.6 R(with Stash)2.5 E F2
(\(seal-rollback "2.0.0" stash: #t\))108 357.6 Q F0
(Stashes uncommitted changes before rollback. Can reco)72 375.6 Q -.15
(ve)-.15 G 2.5(rw).15 G(ith:)-2.5 E F2(\(seal-stash-pop\))108 393.6 Q F1
2.5(5. V)72 411.6 R(ersion T)-1 E(ags)-.92 E 2.5(5.1. A)72 435.6 R
(utomatic T)-.5 E(agging)-.92 E F2(\(seal-release "2.1.0"\))108 453.6 Q
(;; Creates:)108 465.6 Q 9.6(;; -)108 477.6 R(Git tag: 2.1.0)4.8 E 9.6
(;; -)108 489.6 R(Signature: .vault/releases/2.1.0.sig)4.8 E 9.6(;; -)
108 501.6 R(Audit entry)4.8 E F1 2.5(5.2. Rollback)72 519.6 R -.92(Ta)
2.5 G(gs).92 E F2(\(seal-rollback "2.0.0" tag: "rollback-2026-01-15"\))
108 537.6 Q(;; Creates additional tag marking rollback point)108 549.6 Q
F1 2.5(5.3. T)72 567.6 R(ag Listing)-.92 E F2(\(seal-tags\))108 585.6 Q
(;; =>)108 597.6 Q(;; 1.0.0)108 609.6 Q 4.8(2026-01-01 release)67.2 F
(;; 1.1.0)108 621.6 Q 4.8(2026-01-05 release)67.2 F(;; 2.0.0)108 633.6 Q
4.8(2026-01-10 release)67.2 F(;; 2.1.0)108 645.6 Q 4.8
(2026-01-15 release)67.2 F(;; rollback-2026-01-15 2026-01-15)108 657.6 Q
(rollback)9.6 E F1 2.5(6. Reco)72 675.6 R -.1(ve)-.1 G(ry Scenarios).1 E
0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-015 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(6.1. Scenario)72 84 R(1: Bad Commit)2.5 E/F2 8/Courier@0 SF
(;; Oops, committed broken code)108 102 Q 91.2(\(seal-undo\) ;)108 114 R
(Undo last commit)4.8 E(;; or)108 126 Q(\(seal-rollback "2.1.0"\))108
138 Q 4.8(;B)38.4 G(ack to last release)-4.8 E F1 2.5(6.2. Scenario)72
156 R(2: Bad Release)2.5 E F2(;; Released 2.2.0 but it's broken)108 174
Q(\(seal-rollback "2.1.0"\))108 186 Q 4.8(;B)38.4 G(ack to good version)
-4.8 E(\(seal-release "2.2.1"\))108 198 Q 4.8(;P)43.2 G(atch release)
-4.8 E F1 2.5(6.3. Scenario)72 216 R(3: Lost Changes)2.5 E F2
(;; Accidentally discarded work)108 234 Q 76.8(\(seal-recover\) ;)108
246 R(See options)4.8 E 67.2(\(seal-stash-pop\) ;)108 258 R(If stashed)
4.8 E(;; or)108 270 Q 81.6(\(seal-reflog\) ;)108 282 R
(Find lost commits)4.8 E F1 2.5(6.4. Scenario)72 300 R(4: Corrupted V)
2.5 E(ault)-.92 E F2(;; Something went very wrong)108 318 Q
(\(seal-restore "vault-2.0.0.archive" verify-key: "alice.pub"\))108 330
Q F1 2.5(7. A)72 348 R(udit Integration)-.5 E F0(Ev)72 363.6 Q(ery v)
-.15 E(ersion operation recorded:)-.15 E F2(\(audit-entry)108 381.6 Q
(\(action)117.6 393.6 Q(\(verb seal-rollback\))127.2 405.6 Q
(\(object "2.0.0"\))127.2 417.6 Q(\(parameters)127.2 429.6 Q
(\(from "2.1.0+3"\))136.8 441.6 Q(\(method forward\))136.8 453.6 Q
(\(reason "Production incident"\)\)\))136.8 465.6 Q(\(seal ...\)\))117.6
477.6 Q F0
(Audit trail answers: - Who rolled back? - When? - From what v)72 495.6
Q(ersion? - Wh)-.15 E(y? \(if reason pro)-.05 E(vided\))-.15 E 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-015 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(8. CLI)72 84 R(Interface)2.5 E/F2 8/Courier@0 SF 4.8(#C)108 102 S
(urrent version)-4.8 E 4.8($s)108 114 S(eal version)-4.8 E(2.1.0+3)108
126 Q 4.8(#L)108 150 S(ist versions)-4.8 E 4.8($s)108 162 S
(eal versions)-4.8 E 9.6(1.0.0 2026-01-01 Initial)108 174 R(release)4.8
E 9.6(1.1.0 2026-01-05 Bug)108 186 R(fixes)4.8 E 9.6
(2.0.0 2026-01-10 New)108 198 R(governance model)4.8 E 9.6
(2.1.0 2026-01-15 Performance)108 210 R(improvements)4.8 E 4.8(#R)108
234 S(ollback)-4.8 E 4.8($s)108 246 S(eal rollback 2.0.0)-4.8 E
(Rolling back to 2.0.0...)108 258 Q 4.8<e252>108 270 S
(ollback complete. Now at 2.0.0.)-4.8 E 4.8(#R)108 294 S
(ollback with reason)-4.8 E 4.8($s)108 306 S
(eal rollback 2.0.0 --reason "Production incident #123")-4.8 E 4.8(#C)
108 330 S(ompare versions)-4.8 E 4.8($s)108 342 S(eal diff 2.0.0 2.1.0)
-4.8 E 4.8(Mc)112.8 354 S(onfig.scm)-4.8 E 4.8(An)112.8 366 S
(ew-feature.scm)-4.8 E 4.8(Dd)112.8 378 S(eprecated.scm)-4.8 E 4.8(#R)
108 402 S(ecovery options)-4.8 E 4.8($s)108 414 S(eal recover)-4.8 E
(Recovery options:)108 426 Q(1. seal undo)117.6 438 Q 4.8(-U)48 G
(ndo last commit)-4.8 E(2. seal rollback 2.1.0 - Return to last release)
117.6 450 Q(3. seal stash pop)117.6 462 Q 4.8(-R)24 G
(ecover stashed changes)-4.8 E F1 2.5(9. Safety)72 480 R(Mechanisms)2.5
E 2.5(9.1. Uncommitted)72 504 R(Changes)2.5 E F2
(\(seal-rollback "2.0.0"\))108 522 Q
(;; Error: Uncommitted changes detected.)108 534 Q
(;; Use --stash to save changes, or --force to discard.)108 546 Q F1 2.5
(9.2. Pr)72 564 R(otected V)-.18 E(ersions)-1 E F2
(\(vault-config 'protected-versions '\("1.0.0" "2.0.0"\)\))108 582 Q
(\(seal-rollback "0.9.0"\))108 606 Q
(;; Warning: Rolling back past protected version 1.0.0)108 618 Q
(;; This may break compatibility. Continue? [y/N])108 630 Q F1 2.5
(9.3. Rollback)72 648 R(Limits)2.5 E F2
(\(vault-config 'max-rollback-distance 10\))108 666 Q
(\(seal-rollback "0.1.0"\))108 690 Q
(;; Error: Rollback distance \(20 versions\) exceeds limit \(10\).)108
702 Q(;; Use --force to override.)108 714 Q 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-015 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(10. Implementation)72 84 R 2.5(10.1. seal-r)72 108 R
(ollback Implementation)-.18 E/F2 8/Courier@0 SF
(\(define \(seal-rollback version #!key hard stash force reason tag\))
108 126 Q("Roll back vault to specified version")117.6 138 Q
(;; Validate version exists)117.6 162 Q
(\(unless \(tag-exists? version\))117.6 174 Q
(\(error "Version not found" version\)\))127.2 186 Q
(;; Check for uncommitted changes)117.6 210 Q
(\(when \(uncommitted-changes?\))117.6 222 Q(\(cond)127.2 234 Q
(\(stash \(seal-stash\)\))136.8 246 Q(\(force \(void\)\))136.8 258 Q
(\(else \(error "Uncommitted changes. Use stash: or force:"\)\)\)\))
136.8 270 Q(;; Record current state)117.6 294 Q
(\(let \(\(current \(seal-version\)\)\))117.6 306 Q(;; Perform rollback)
127.2 330 Q(\(if hard)127.2 342 Q(\(hard-rollback! version\))146.4 354 Q
(\(forward-rollback! version reason\)\))146.4 366 Q
(;; Create tag if requested)127.2 390 Q(\(when tag)127.2 402 Q
(\(run-command "git" "tag" tag\)\))136.8 414 Q(;; Audit)127.2 438 Q
(\(audit-append)127.2 450 Q
(actor: \(get-vault-principal \(vault-config 'signing-key\)\))136.8 462
Q(action: \(list 'seal-rollback version\))136.8 474 Q(motivation: \(or \
reason \(sprintf "Rollback from ~a to ~a" current version\)\)\))136.8
486 Q(\(print "\342 Rolled back to " version\)\)\))127.2 510 Q
(\(define \(forward-rollback! version reason\))108 534 Q
("Create rollback commit \(preserves history\)")117.6 546 Q
(\(run-command "git" "checkout" version "--" "."\))117.6 558 Q
(\(run-command "git" "commit" "-m")117.6 570 Q
(\(sprintf "Rollback to ~a\\n\\n~a" version \(or reason ""\)\)\)\))127.2
582 Q(\(define \(hard-rollback! version\))108 606 Q
("Reset to version \(destroys history\)")117.6 618 Q
(\(print "WARNING: Hard rollback destroys history"\))117.6 630 Q
(\(run-command "git" "reset" "--hard" version\)\))117.6 642 Q F1 2.5
(11. Security)72 660 R(Considerations)2.5 E 2.5(11.1. Rollback)72 684 R
(Attacks)2.5 E F0(Attack)72 699.6 Q(er forces rollback to vulnerable v)
-.1 E(ersion.)-.15 E(Mitig)72 715.2 Q
(ation: - Threshold signatures for rollback \(RFC-007\) - Protected v)
-.05 E(ersion list - Audit trail detection)-.15 E 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 423.27(RFC-015 0)72 48 R/F1 10/Times-Bold@0 SF
2.5(11.2. History)72 84 R(Manipulation)2.5 E F0
(Hard rollback can hide e)72 99.6 Q(vidence.)-.25 E(Mitig)72 115.2 Q
(ation: - Prefer forw)-.05 E(ard rollback - Audit before hard rollback \
- Federation replication preserv)-.1 E(es history)-.15 E F1 2.5
(12. Refer)72 139.2 R(ences)-.18 E F0 .891(1. Semantic V)72 154.8 R .891
(ersioning 2.0.0 \(semv)-1.11 F(er.or)-.15 E .891
(g\) 2. Git Reset, Check)-.18 F .892(out, and Re)-.1 F -.15(ve)-.25 G
.892(rt \(git-scm.com\) 3. RFC-003: Crypto-).15 F(graphic Audit T)72
166.8 Q(rail 4. RFC-006: V)-.35 E(ault System Architecture)-1.11 E F1
2.5(13. Changelog)72 190.8 R F0 6.5<8332>72 206.4 S(026-01-06)-6.5 E 6.5
<8349>72 222 S(nitial speci\214cation)-6.5 E 0 Cg EP
%%Trailer
end
%%EOF
