;; assertion-catalog.scm - Auto-generated kernel assertion catalog
;; Generated by extract-assertions.sh
;; DO NOT EDIT - regenerate with: ./docs/rfc/extract-assertions.sh

(define *assertion-catalog*
  '(
    ;; === Instrumentation Points (session-stat!) ===
    (instrumentation bytes-in "./gossip.scm" 164)
    (instrumentation bytes-out "./gossip.scm" 154)
    (instrumentation bytes-written "./vault.scm" 580)
    (instrumentation commits "./cyberspace-repl.scm" 5012)
    (instrumentation decrypts "./vault.scm" 308)
    (instrumentation encrypts "./vault.scm" 252)
    (instrumentation federation-changes "./cyberspace-repl.scm" 5043)
    (instrumentation gossip-exchanges "./cyberspace-repl.scm" 5294)
    (instrumentation hashes "./vault.scm" 1951)
    (instrumentation mdns-messages "./mdns.scm" 128)
    (instrumentation packets-ipv "./gossip.scm" 170)
    (instrumentation peers-discovered "./cyberspace-repl.scm" 5286)
    (instrumentation queries "./cyberspace-repl.scm" 1271)
    (instrumentation reads "./vault.scm" 1274)
    (instrumentation seals "./cyberspace-repl.scm" 5013)
    (instrumentation signs "./cyberspace-repl.scm" 5023)
    (instrumentation syncs "./cyberspace-repl.scm" 1146)
    (instrumentation unlocks "./vault.scm" 321)
    (instrumentation verifies "./cyberspace-repl.scm" 5028)
    (instrumentation votes "./cyberspace-repl.scm" 1404)
    (instrumentation wormholes "./cyberspace-repl.scm" 1890)
    (instrumentation writes "./vault.scm" 579)

    ;; === Security Errors ===
    (security-error capability-amplification "./cyberspace-repl.scm" 1932)
    (security-error confidentiality-violation "./cyberspace-repl.scm" 2147)
    (security-error delegate-denied "./cyberspace-repl.scm" 2182)
    (security-error delete-denied "./cyberspace-repl.scm" 2179)
    (security-error integrity-violation "./cyberspace-repl.scm" 2151)
    (security-error no-ambient-authority "./cyberspace-repl.scm" 2168)
    (security-error read-denied "./cyberspace-repl.scm" 2173)
    (security-error secure-clear "./cyberspace-repl.scm" 2341)
    (security-error secure-clear-failed "./cyberspace-repl.scm" 2329)
    (security-error write-denied "./cyberspace-repl.scm" 2176)

    ;; === Precondition Guards ===
    (precondition directory-exists? keystore-path "./enroll.scm" 503)
    (precondition directory-exists? ".forge" "./cyberspace-repl.scm" 258)
    (precondition chaotic? thing "./cyberspace-repl.scm" 796)
    (precondition attested? "./cyberspace-repl.scm" 945)
    (precondition quiescent? memo "./cyberspace-repl.scm" 1049)
    (precondition attested? "./cyberspace-repl.scm" 1589)
    (precondition attested? "./cyberspace-repl.scm" 1617)
    (precondition directory-exists? ".vault/keys" "./cyberspace-repl.scm" 3801)
    (precondition directory-exists? output-dir "./spki-keygen.scm" 83)
    (precondition directory-exists? path "./keyring.scm" 76)
    (precondition directory-exists? ks-dir "./vault.scm" 238)
    (precondition keystore-exists? "./vault.scm" 292)
    (precondition directory-exists? ".vault" "./vault.scm" 412)
))

;; Summary counts
(define (assertion-summary)
  (let ((instrs (filter (lambda (a) (eq? (car a) 'instrumentation)) *assertion-catalog*))
        (errors (filter (lambda (a) (eq? (car a) 'security-error)) *assertion-catalog*))
        (guards (filter (lambda (a) (eq? (car a) 'precondition)) *assertion-catalog*)))
    `((instrumentation-points . ,(length instrs))
      (security-errors . ,(length errors))
      (precondition-guards . ,(length guards))
      (total . ,(length *assertion-catalog*)))))
