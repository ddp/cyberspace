<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <title>Memo 0025: Demonic Agents</title>
  <link rel="icon" id="favicon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27%230f0%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>">
  <script>
(function(){
  var h=new Date().getHours(),c;
  if(h>=4&&h<6)c='%23845EC2';       // brahma muhurta - violet
  else if(h>=6&&h<8)c='%23ffd700';  // dawn - gold
  else if(h>=8&&h<11)c='%2300d4aa'; // morning - teal
  else if(h>=11&&h<14)c='%230f0';   // midday - phosphor
  else if(h>=14&&h<17)c='%2339ff14';// afternoon - neon
  else if(h>=17&&h<19)c='%23ff6600';// sunset - orange
  else if(h>=19&&h<22)c='%23ff3366';// evening - coral
  else c='%2300ffff';               // night - cyan
  document.getElementById('favicon').href='data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27'+c+'%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>';
})();
</script>
  <link rel="stylesheet" href="memo.css">
</head>
<body>
<span class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark">[theme]</span>
<h1>Memo 0025: Demonic Agents</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>This Memo specifies demonic agents for the Library of Cyberspace: how autonomous agents—daemons in the BSD tradition—are spawned, constrained, monitored, and terminated. Agents are helpful spirits that operate with capability-based authority in isolated sandboxes, enabling safe delegation of tasks while maintaining security boundaries. The vault daemons watch over all.</p>
</section>
<section>
<h2>Motivation</h2>
<h3>The BSD Daemon Tradition</h3>
<p>In Unix mythology, a daemon is a helpful spirit—a background process that tends to the system without being asked. The term comes from Maxwell's demon, the thought experiment about a creature that sorts molecules. BSD gave this concept a face: Beastie, the cheerful daemon with a pitchfork, watching over the system.</p>
<p>The Library embraces this tradition. Our agents are daemons—helpful spirits that carry authority, travel between vaults, and do work while their principals sleep.</p>
<h3>The General Magic Vision</h3>
<p>Telescript, from 1994:</p>
<blockquote>
<p>"Programs that travel from machine to machine, carrying your authority, doing things while you sleep."</p>
</blockquote>
<p>That vision failed because:</p>
<ul>
<li>No security model</li>
<li>Agents ran with ambient authority</li>
<li>No isolation</li>
<li>One agent could corrupt another</li>
<li>No accountability</li>
<li>No audit of agent actions</li>
<li>No revocation</li>
<li>Once launched, agents were uncontrollable</li>
</ul>
<h3>The Demonic Solution</h3>
<p>The Library realizes this vision with proper daemonology:</p>
<ul>
<li>Capability-based authority</li>
<li>Daemons have only granted permissions</li>
<li>Sandbox isolation</li>
<li>Process, filesystem, network boundaries</li>
<li>Full audit trail</li>
<li>The Audit Daemon witnesses every action</li>
<li>Remote termination</li>
<li>Daemons can be banished at any time</li>
</ul>
<p>Daemons don't rule—they serve. They don't watch over—they watch with.</p>
</section>
<section>
<h2>Daemon Model</h2>
<h3>What is a Daemon?</h3>
<p>A daemon is a helpful spirit—an autonomous agent that serves its principal:</p>
<pre class="language-scheme">
(agent
  (id "agent-2026-001")
  (spawned-by user-principal)
  (purpose "Monitor RSS feeds and archive new papers")
  (capabilities
    (read (url "https://arxiv.org/rss/"))
    (write (path "/vault/papers/"))
    (network (hosts ("arxiv.org" "doi.org"))))
  (constraints
    (max-runtime ( 24 3600))  ; 24 hours
    (max-memory ( 512 1024 1024))  ; 512MB
    (max-storage ( 1 1024 1024 1024)))  ; 1GB
  (sandbox posix-sandbox)
  (status running))
</pre>
<h3>Agent Lifecycle</h3>
<div class="diagram-container">
<svg class="diagram" viewBox="0 0 550 560" width="550" height="560" xmlns="http://www.w3.org/2000/svg">
<style>
  .diagram line { stroke: currentColor; stroke-width: 1.5; stroke-linecap: square; }
  .diagram rect { fill: currentColor; }
  .diagram text { font-family: monospace; font-size: 14px; fill: currentColor; text-anchor: middle; dominant-baseline: central; }
</style>
<line x1="45" y1="10" x2="50" y2="10"/>
<line x1="45" y1="10" x2="45" y2="20"/>
<line x1="50" y1="10" x2="60" y2="10"/>
<line x1="60" y1="10" x2="70" y2="10"/>
<line x1="70" y1="10" x2="80" y2="10"/>
<line x1="80" y1="10" x2="90" y2="10"/>
<line x1="90" y1="10" x2="100" y2="10"/>
<line x1="100" y1="10" x2="110" y2="10"/>
<line x1="110" y1="10" x2="120" y2="10"/>
<line x1="120" y1="10" x2="130" y2="10"/>
<line x1="130" y1="10" x2="140" y2="10"/>
<line x1="140" y1="10" x2="145" y2="10"/>
<line x1="145" y1="10" x2="145" y2="20"/>
<line x1="45" y1="20" x2="45" y2="40"/>
<text x="65" y="30">D</text>
<text x="75" y="30">E</text>
<text x="85" y="30">F</text>
<text x="95" y="30">I</text>
<text x="105" y="30">N</text>
<text x="115" y="30">E</text>
<text x="125" y="30">D</text>
<line x1="145" y1="20" x2="145" y2="40"/>
<text x="165" y="30">A</text>
<text x="175" y="30">g</text>
<text x="185" y="30">e</text>
<text x="195" y="30">n</text>
<text x="205" y="30">t</text>
<text x="225" y="30">s</text>
<text x="235" y="30">p</text>
<text x="245" y="30">e</text>
<text x="255" y="30">c</text>
<text x="265" y="30">i</text>
<text x="275" y="30">f</text>
<text x="285" y="30">i</text>
<text x="295" y="30">c</text>
<text x="305" y="30">a</text>
<text x="315" y="30">t</text>
<text x="325" y="30">i</text>
<text x="335" y="30">o</text>
<text x="345" y="30">n</text>
<text x="365" y="30">c</text>
<text x="375" y="30">r</text>
<text x="385" y="30">e</text>
<text x="395" y="30">a</text>
<text x="405" y="30">t</text>
<text x="415" y="30">e</text>
<text x="425" y="30">d</text>
<line x1="45" y1="50" x2="50" y2="50"/>
<line x1="45" y1="40" x2="45" y2="50"/>
<line x1="50" y1="50" x2="60" y2="50"/>
<line x1="60" y1="50" x2="70" y2="50"/>
<line x1="70" y1="50" x2="80" y2="50"/>
<line x1="80" y1="50" x2="90" y2="50"/>
<line x1="90" y1="50" x2="100" y2="50"/>
<line x1="95" y1="50" x2="95" y2="60"/>
<line x1="100" y1="50" x2="110" y2="50"/>
<line x1="110" y1="50" x2="120" y2="50"/>
<line x1="120" y1="50" x2="130" y2="50"/>
<line x1="130" y1="50" x2="140" y2="50"/>
<line x1="140" y1="50" x2="145" y2="50"/>
<line x1="145" y1="40" x2="145" y2="50"/>
<line x1="95" y1="60" x2="95" y2="80"/>
<text x="115" y="70">s</text>
<text x="125" y="70">p</text>
<text x="135" y="70">a</text>
<text x="145" y="70">w</text>
<text x="155" y="70">n</text>
<text x="95" y="90">↓</text>
<line x1="45" y1="110" x2="50" y2="110"/>
<line x1="45" y1="110" x2="45" y2="120"/>
<line x1="50" y1="110" x2="60" y2="110"/>
<line x1="60" y1="110" x2="70" y2="110"/>
<line x1="70" y1="110" x2="80" y2="110"/>
<line x1="80" y1="110" x2="90" y2="110"/>
<line x1="90" y1="110" x2="100" y2="110"/>
<line x1="100" y1="110" x2="110" y2="110"/>
<line x1="110" y1="110" x2="120" y2="110"/>
<line x1="120" y1="110" x2="130" y2="110"/>
<line x1="130" y1="110" x2="140" y2="110"/>
<line x1="140" y1="110" x2="145" y2="110"/>
<line x1="145" y1="110" x2="145" y2="120"/>
<line x1="45" y1="120" x2="45" y2="140"/>
<text x="65" y="130">S</text>
<text x="75" y="130">P</text>
<text x="85" y="130">A</text>
<text x="95" y="130">W</text>
<text x="105" y="130">N</text>
<text x="115" y="130">E</text>
<text x="125" y="130">D</text>
<line x1="145" y1="120" x2="145" y2="140"/>
<text x="165" y="130">P</text>
<text x="175" y="130">r</text>
<text x="185" y="130">o</text>
<text x="195" y="130">c</text>
<text x="205" y="130">e</text>
<text x="215" y="130">s</text>
<text x="225" y="130">s</text>
<text x="245" y="130">c</text>
<text x="255" y="130">r</text>
<text x="265" y="130">e</text>
<text x="275" y="130">a</text>
<text x="285" y="130">t</text>
<text x="295" y="130">e</text>
<text x="305" y="130">d</text>
<text x="315" y="130">,</text>
<text x="335" y="130">s</text>
<text x="345" y="130">a</text>
<text x="355" y="130">n</text>
<text x="365" y="130">d</text>
<text x="375" y="130">b</text>
<text x="385" y="130">o</text>
<text x="395" y="130">x</text>
<text x="415" y="130">i</text>
<text x="425" y="130">n</text>
<text x="435" y="130">i</text>
<text x="445" y="130">t</text>
<text x="455" y="130">i</text>
<text x="465" y="130">a</text>
<text x="475" y="130">l</text>
<text x="485" y="130">i</text>
<text x="495" y="130">z</text>
<text x="505" y="130">e</text>
<text x="515" y="130">d</text>
<line x1="45" y1="150" x2="50" y2="150"/>
<line x1="45" y1="140" x2="45" y2="150"/>
<line x1="50" y1="150" x2="60" y2="150"/>
<line x1="60" y1="150" x2="70" y2="150"/>
<line x1="70" y1="150" x2="80" y2="150"/>
<line x1="80" y1="150" x2="90" y2="150"/>
<line x1="90" y1="150" x2="100" y2="150"/>
<line x1="95" y1="150" x2="95" y2="160"/>
<line x1="100" y1="150" x2="110" y2="150"/>
<line x1="110" y1="150" x2="120" y2="150"/>
<line x1="120" y1="150" x2="130" y2="150"/>
<line x1="130" y1="150" x2="140" y2="150"/>
<line x1="140" y1="150" x2="145" y2="150"/>
<line x1="145" y1="140" x2="145" y2="150"/>
<line x1="95" y1="160" x2="95" y2="180"/>
<text x="115" y="170">a</text>
<text x="125" y="170">c</text>
<text x="135" y="170">t</text>
<text x="145" y="170">i</text>
<text x="155" y="170">v</text>
<text x="165" y="170">a</text>
<text x="175" y="170">t</text>
<text x="185" y="170">e</text>
<text x="95" y="190">↓</text>
<line x1="45" y1="210" x2="50" y2="210"/>
<line x1="45" y1="210" x2="45" y2="220"/>
<line x1="50" y1="210" x2="60" y2="210"/>
<line x1="60" y1="210" x2="70" y2="210"/>
<line x1="70" y1="210" x2="80" y2="210"/>
<line x1="80" y1="210" x2="90" y2="210"/>
<line x1="90" y1="210" x2="100" y2="210"/>
<line x1="100" y1="210" x2="110" y2="210"/>
<line x1="110" y1="210" x2="120" y2="210"/>
<line x1="120" y1="210" x2="130" y2="210"/>
<line x1="130" y1="210" x2="140" y2="210"/>
<line x1="140" y1="210" x2="145" y2="210"/>
<line x1="145" y1="210" x2="145" y2="220"/>
<line x1="45" y1="220" x2="45" y2="240"/>
<text x="65" y="230">R</text>
<text x="75" y="230">U</text>
<text x="85" y="230">N</text>
<text x="95" y="230">N</text>
<text x="105" y="230">I</text>
<text x="115" y="230">N</text>
<text x="125" y="230">G</text>
<line x1="145" y1="220" x2="145" y2="240"/>
<text x="165" y="230">A</text>
<text x="175" y="230">g</text>
<text x="185" y="230">e</text>
<text x="195" y="230">n</text>
<text x="205" y="230">t</text>
<text x="225" y="230">e</text>
<text x="235" y="230">x</text>
<text x="245" y="230">e</text>
<text x="255" y="230">c</text>
<text x="265" y="230">u</text>
<text x="275" y="230">t</text>
<text x="285" y="230">i</text>
<text x="295" y="230">n</text>
<text x="305" y="230">g</text>
<text x="325" y="230">w</text>
<text x="335" y="230">i</text>
<text x="345" y="230">t</text>
<text x="355" y="230">h</text>
<text x="375" y="230">c</text>
<text x="385" y="230">a</text>
<text x="395" y="230">p</text>
<text x="405" y="230">a</text>
<text x="415" y="230">b</text>
<text x="425" y="230">i</text>
<text x="435" y="230">l</text>
<text x="445" y="230">i</text>
<text x="455" y="230">t</text>
<text x="465" y="230">i</text>
<text x="475" y="230">e</text>
<text x="485" y="230">s</text>
<line x1="45" y1="250" x2="50" y2="250"/>
<line x1="45" y1="240" x2="45" y2="250"/>
<line x1="50" y1="250" x2="60" y2="250"/>
<line x1="60" y1="250" x2="70" y2="250"/>
<line x1="70" y1="250" x2="80" y2="250"/>
<line x1="80" y1="250" x2="90" y2="250"/>
<line x1="90" y1="250" x2="100" y2="250"/>
<line x1="95" y1="250" x2="95" y2="260"/>
<line x1="100" y1="250" x2="110" y2="250"/>
<line x1="110" y1="250" x2="120" y2="250"/>
<line x1="120" y1="250" x2="130" y2="250"/>
<line x1="130" y1="250" x2="140" y2="250"/>
<line x1="140" y1="250" x2="145" y2="250"/>
<line x1="145" y1="240" x2="145" y2="250"/>
<line x1="95" y1="260" x2="95" y2="280"/>
<text x="115" y="270">p</text>
<text x="125" y="270">a</text>
<text x="135" y="270">u</text>
<text x="145" y="270">s</text>
<text x="155" y="270">e</text>
<text x="165" y="270">/</text>
<text x="175" y="270">r</text>
<text x="185" y="270">e</text>
<text x="195" y="270">s</text>
<text x="205" y="270">u</text>
<text x="215" y="270">m</text>
<text x="225" y="270">e</text>
<text x="235" y="270">/</text>
<text x="245" y="270">t</text>
<text x="255" y="270">e</text>
<text x="265" y="270">r</text>
<text x="275" y="270">m</text>
<text x="285" y="270">i</text>
<text x="295" y="270">n</text>
<text x="305" y="270">a</text>
<text x="315" y="270">t</text>
<text x="325" y="270">e</text>
<text x="95" y="290">↓</text>
<line x1="45" y1="310" x2="50" y2="310"/>
<line x1="45" y1="310" x2="45" y2="320"/>
<line x1="50" y1="310" x2="60" y2="310"/>
<line x1="60" y1="310" x2="70" y2="310"/>
<line x1="70" y1="310" x2="80" y2="310"/>
<line x1="80" y1="310" x2="90" y2="310"/>
<line x1="90" y1="310" x2="100" y2="310"/>
<line x1="100" y1="310" x2="110" y2="310"/>
<line x1="110" y1="310" x2="120" y2="310"/>
<line x1="120" y1="310" x2="130" y2="310"/>
<line x1="130" y1="310" x2="140" y2="310"/>
<line x1="140" y1="310" x2="145" y2="310"/>
<line x1="145" y1="310" x2="145" y2="320"/>
<line x1="45" y1="320" x2="45" y2="340"/>
<text x="65" y="330">P</text>
<text x="75" y="330">A</text>
<text x="85" y="330">U</text>
<text x="95" y="330">S</text>
<text x="105" y="330">E</text>
<text x="115" y="330">D</text>
<line x1="145" y1="320" x2="145" y2="340"/>
<text x="165" y="330">E</text>
<text x="175" y="330">x</text>
<text x="185" y="330">e</text>
<text x="195" y="330">c</text>
<text x="205" y="330">u</text>
<text x="215" y="330">t</text>
<text x="225" y="330">i</text>
<text x="235" y="330">o</text>
<text x="245" y="330">n</text>
<text x="265" y="330">s</text>
<text x="275" y="330">u</text>
<text x="285" y="330">s</text>
<text x="295" y="330">p</text>
<text x="305" y="330">e</text>
<text x="315" y="330">n</text>
<text x="325" y="330">d</text>
<text x="335" y="330">e</text>
<text x="345" y="330">d</text>
<text x="355" y="330">,</text>
<text x="375" y="330">s</text>
<text x="385" y="330">t</text>
<text x="395" y="330">a</text>
<text x="405" y="330">t</text>
<text x="415" y="330">e</text>
<text x="435" y="330">p</text>
<text x="445" y="330">r</text>
<text x="455" y="330">e</text>
<text x="465" y="330">s</text>
<text x="475" y="330">e</text>
<text x="485" y="330">r</text>
<text x="495" y="330">v</text>
<text x="505" y="330">e</text>
<text x="515" y="330">d</text>
<line x1="45" y1="350" x2="50" y2="350"/>
<line x1="45" y1="340" x2="45" y2="350"/>
<line x1="50" y1="350" x2="60" y2="350"/>
<line x1="60" y1="350" x2="70" y2="350"/>
<line x1="70" y1="350" x2="80" y2="350"/>
<line x1="80" y1="350" x2="90" y2="350"/>
<line x1="90" y1="350" x2="100" y2="350"/>
<line x1="95" y1="350" x2="95" y2="360"/>
<line x1="100" y1="350" x2="110" y2="350"/>
<line x1="110" y1="350" x2="120" y2="350"/>
<line x1="120" y1="350" x2="130" y2="350"/>
<line x1="130" y1="350" x2="140" y2="350"/>
<line x1="140" y1="350" x2="145" y2="350"/>
<line x1="145" y1="340" x2="145" y2="350"/>
<line x1="95" y1="360" x2="95" y2="380"/>
<text x="115" y="370">t</text>
<text x="125" y="370">e</text>
<text x="135" y="370">r</text>
<text x="145" y="370">m</text>
<text x="155" y="370">i</text>
<text x="165" y="370">n</text>
<text x="175" y="370">a</text>
<text x="185" y="370">t</text>
<text x="195" y="370">e</text>
<text x="205" y="370">/</text>
<text x="215" y="370">t</text>
<text x="225" y="370">i</text>
<text x="235" y="370">m</text>
<text x="245" y="370">e</text>
<text x="255" y="370">o</text>
<text x="265" y="370">u</text>
<text x="275" y="370">t</text>
<text x="285" y="370">/</text>
<text x="295" y="370">e</text>
<text x="305" y="370">r</text>
<text x="315" y="370">r</text>
<text x="325" y="370">o</text>
<text x="335" y="370">r</text>
<text x="95" y="390">↓</text>
<line x1="45" y1="410" x2="50" y2="410"/>
<line x1="45" y1="410" x2="45" y2="420"/>
<line x1="50" y1="410" x2="60" y2="410"/>
<line x1="60" y1="410" x2="70" y2="410"/>
<line x1="70" y1="410" x2="80" y2="410"/>
<line x1="80" y1="410" x2="90" y2="410"/>
<line x1="90" y1="410" x2="100" y2="410"/>
<line x1="100" y1="410" x2="110" y2="410"/>
<line x1="110" y1="410" x2="120" y2="410"/>
<line x1="120" y1="410" x2="130" y2="410"/>
<line x1="130" y1="410" x2="140" y2="410"/>
<line x1="140" y1="410" x2="145" y2="410"/>
<line x1="145" y1="410" x2="145" y2="420"/>
<line x1="45" y1="420" x2="45" y2="440"/>
<text x="65" y="430">F</text>
<text x="75" y="430">I</text>
<text x="85" y="430">N</text>
<text x="95" y="430">I</text>
<text x="105" y="430">S</text>
<text x="115" y="430">H</text>
<text x="125" y="430">E</text>
<text x="135" y="430">D</text>
<line x1="145" y1="420" x2="145" y2="440"/>
<text x="165" y="430">E</text>
<text x="175" y="430">x</text>
<text x="185" y="430">e</text>
<text x="195" y="430">c</text>
<text x="205" y="430">u</text>
<text x="215" y="430">t</text>
<text x="225" y="430">i</text>
<text x="235" y="430">o</text>
<text x="245" y="430">n</text>
<text x="265" y="430">c</text>
<text x="275" y="430">o</text>
<text x="285" y="430">m</text>
<text x="295" y="430">p</text>
<text x="305" y="430">l</text>
<text x="315" y="430">e</text>
<text x="325" y="430">t</text>
<text x="335" y="430">e</text>
<text x="345" y="430">,</text>
<text x="365" y="430">c</text>
<text x="375" y="430">l</text>
<text x="385" y="430">e</text>
<text x="395" y="430">a</text>
<text x="405" y="430">n</text>
<text x="415" y="430">u</text>
<text x="425" y="430">p</text>
<text x="445" y="430">p</text>
<text x="455" y="430">e</text>
<text x="465" y="430">n</text>
<text x="475" y="430">d</text>
<text x="485" y="430">i</text>
<text x="495" y="430">n</text>
<text x="505" y="430">g</text>
<line x1="45" y1="450" x2="50" y2="450"/>
<line x1="45" y1="440" x2="45" y2="450"/>
<line x1="50" y1="450" x2="60" y2="450"/>
<line x1="60" y1="450" x2="70" y2="450"/>
<line x1="70" y1="450" x2="80" y2="450"/>
<line x1="80" y1="450" x2="90" y2="450"/>
<line x1="90" y1="450" x2="100" y2="450"/>
<line x1="95" y1="450" x2="95" y2="460"/>
<line x1="100" y1="450" x2="110" y2="450"/>
<line x1="110" y1="450" x2="120" y2="450"/>
<line x1="120" y1="450" x2="130" y2="450"/>
<line x1="130" y1="450" x2="140" y2="450"/>
<line x1="140" y1="450" x2="145" y2="450"/>
<line x1="145" y1="440" x2="145" y2="450"/>
<line x1="95" y1="460" x2="95" y2="480"/>
<text x="115" y="470">c</text>
<text x="125" y="470">l</text>
<text x="135" y="470">e</text>
<text x="145" y="470">a</text>
<text x="155" y="470">n</text>
<text x="165" y="470">u</text>
<text x="175" y="470">p</text>
<text x="95" y="490">↓</text>
<line x1="45" y1="510" x2="50" y2="510"/>
<line x1="45" y1="510" x2="45" y2="520"/>
<line x1="50" y1="510" x2="60" y2="510"/>
<line x1="60" y1="510" x2="70" y2="510"/>
<line x1="70" y1="510" x2="80" y2="510"/>
<line x1="80" y1="510" x2="90" y2="510"/>
<line x1="90" y1="510" x2="100" y2="510"/>
<line x1="100" y1="510" x2="110" y2="510"/>
<line x1="110" y1="510" x2="120" y2="510"/>
<line x1="120" y1="510" x2="130" y2="510"/>
<line x1="130" y1="510" x2="140" y2="510"/>
<line x1="140" y1="510" x2="145" y2="510"/>
<line x1="145" y1="510" x2="145" y2="520"/>
<line x1="45" y1="520" x2="45" y2="540"/>
<text x="65" y="530">A</text>
<text x="75" y="530">R</text>
<text x="85" y="530">C</text>
<text x="95" y="530">H</text>
<text x="105" y="530">I</text>
<text x="115" y="530">V</text>
<text x="125" y="530">E</text>
<text x="135" y="530">D</text>
<line x1="145" y1="520" x2="145" y2="540"/>
<text x="165" y="530">A</text>
<text x="175" y="530">u</text>
<text x="185" y="530">d</text>
<text x="195" y="530">i</text>
<text x="205" y="530">t</text>
<text x="225" y="530">l</text>
<text x="235" y="530">o</text>
<text x="245" y="530">g</text>
<text x="265" y="530">p</text>
<text x="275" y="530">r</text>
<text x="285" y="530">e</text>
<text x="295" y="530">s</text>
<text x="305" y="530">e</text>
<text x="315" y="530">r</text>
<text x="325" y="530">v</text>
<text x="335" y="530">e</text>
<text x="345" y="530">d</text>
<text x="355" y="530">,</text>
<text x="375" y="530">r</text>
<text x="385" y="530">e</text>
<text x="395" y="530">s</text>
<text x="405" y="530">o</text>
<text x="415" y="530">u</text>
<text x="425" y="530">r</text>
<text x="435" y="530">c</text>
<text x="445" y="530">e</text>
<text x="455" y="530">s</text>
<text x="475" y="530">r</text>
<text x="485" y="530">e</text>
<text x="495" y="530">l</text>
<text x="505" y="530">e</text>
<text x="515" y="530">a</text>
<text x="525" y="530">s</text>
<text x="535" y="530">e</text>
<text x="545" y="530">d</text>
<line x1="45" y1="550" x2="50" y2="550"/>
<line x1="45" y1="540" x2="45" y2="550"/>
<line x1="50" y1="550" x2="60" y2="550"/>
<line x1="60" y1="550" x2="70" y2="550"/>
<line x1="70" y1="550" x2="80" y2="550"/>
<line x1="80" y1="550" x2="90" y2="550"/>
<line x1="90" y1="550" x2="100" y2="550"/>
<line x1="100" y1="550" x2="110" y2="550"/>
<line x1="110" y1="550" x2="120" y2="550"/>
<line x1="120" y1="550" x2="130" y2="550"/>
<line x1="130" y1="550" x2="140" y2="550"/>
<line x1="140" y1="550" x2="145" y2="550"/>
<line x1="145" y1="540" x2="145" y2="550"/>
</svg>
</div>
</section>
<section>
<h2>Spawning Agents</h2>
<h3>Spawn Request</h3>
<pre class="language-scheme">
(define (spawn-agent spec)
  "Spawn new agent from specification"
  (let* ((agent-id (generate-agent-id))
         (spawner (current-principal))

         ;; Validate spawner has required capabilities
         (_ (verify-spawn-authority spawner (spec-capabilities spec)))

         ;; Create sandbox
         (sandbox (create-sandbox (spec-sandbox-type spec)
                                  (spec-constraints spec)))

         ;; Create agent record
         (agent (make-agent
                 id: agent-id
                 spawned-by: spawner
                 spec: spec
                 sandbox: sandbox
                 status: 'spawned)))

    ;; Audit spawn
    (audit-append
      action: `(agent-spawn ,agent-id)
      motivation: (spec-purpose spec))

    ;; Initialize agent process
    (sandbox-exec sandbox (spec-code spec))

    ;; Return agent handle
    agent))
</pre>
<h3>Capability Verification</h3>
<pre class="language-scheme">
(define (verify-spawn-authority spawner requested-caps)
  "Verify spawner can grant requested capabilities"
  (for-each
    (lambda (cap)
      (unless (authorized? spawner 'delegate cap)
        (error "Cannot delegate capability" cap)))
    requested-caps))
</pre>
<h3>Agent Code Loading</h3>
<pre class="language-scheme">
(define (load-agent-code spec)
  "Load and verify agent code"
  (let* ((code-hash (spec-code-hash spec))
         (code (cas-get code-hash)))

    ;; Verify code hash
    (unless (equal? code-hash (sha256 code))
      (error "Code integrity failure"))

    ;; Verify code signature (if required)
    (when (spec-require-signed? spec)
      (unless (verify-code-signature code (spec-signer spec))
        (error "Code signature invalid")))

    code))
</pre>
</section>
<section>
<h2>Sandbox Types</h2>
<h3>POSIX Sandbox</h3>
<p>Process isolation using OS primitives:</p>
<pre class="language-scheme">
(define (create-posix-sandbox constraints)
  "Create POSIX-based sandbox"
  (sandbox
    (type posix)

    ;; Process isolation
    (process
      (uid (allocate-sandbox-uid))
      (gid (allocate-sandbox-gid))
      (chroot (create-sandbox-root))
      (rlimits
        (cpu ,(constraints-max-cpu constraints))
        (memory ,(constraints-max-memory constraints))
        (files ,(constraints-max-files constraints))
        (processes 1)))  ; No forking

    ;; Filesystem isolation
    (filesystem
      (root ,(sandbox-root))
      (mounts
        (("/lib" read-only)
         ("/usr/lib" read-only)
         ,(sandbox-work-dir) read-write)))

    ;; Network isolation
    (network
      (allowed-hosts ,(constraints-network-hosts constraints))
      (allowed-ports ,(constraints-network-ports constraints)))))
</pre>
<h3>Scheme Sandbox</h3>
<p>Language-level isolation for Scheme agents:</p>
<pre class="language-scheme">
(define (create-scheme-sandbox constraints)
  "Create Scheme-level sandbox"
  (sandbox
    (type scheme)

    ;; Safe environment - no dangerous primitives
    (environment
      (import (scheme base)
              (scheme write)
              (library sandbox-io)
              (library sandbox-net))
      (exclude system exit eval load
               file-delete directory-delete
               process-fork process-exec))

    ;; Resource limits via fuel
    (fuel
      (computation ,(constraints-max-steps constraints))
      (allocation ,(constraints-max-memory constraints)))

    ;; Capability-restricted I/O
    (io-capabilities ,(constraints-io constraints))))
</pre>
<h3>Container Sandbox</h3>
<p>OCI container isolation:</p>
<pre class="language-scheme">
(define (create-container-sandbox constraints image)
  "Create container-based sandbox"
  (sandbox
    (type container)

    ;; Container configuration
    (container
      (image ,image)
      (readonly-rootfs #t)
      (no-new-privileges #t)
      (cap-drop ALL)
      (cap-add ,(minimal-caps constraints)))

    ;; Resource limits
    (resources
      (memory ,(constraints-max-memory constraints))
      (cpu-shares ,(constraints-cpu-shares constraints))
      (pids-limit 10))

    ;; Network policy
    (network
      (mode bridge)
      (egress-policy ,(network-policy constraints)))))
</pre>
<h3>WASM Sandbox</h3>
<p>WebAssembly isolation:</p>
<pre class="language-scheme">
(define (create-wasm-sandbox constraints)
  "Create WebAssembly sandbox"
  (sandbox
    (type wasm)

    ;; WASM runtime configuration
    (runtime
      (memory-limit ,(constraints-max-memory constraints))
      (table-limit 10000)
      (fuel ,(constraints-max-steps constraints)))

    ;; WASI capabilities
    (wasi
      (preopens ,(wasi-preopens constraints))
      (env ,(wasi-env constraints))
      (args ,(wasi-args constraints)))

    ;; Host function imports (minimal)
    (imports
      (log "library:log")
      (cas-get "library:casget")
      (cas-put "library:casput"))))
</pre>
</section>
<section>
<h2>Capability Enforcement</h2>
<h3>Capability Proxy</h3>
<p>All agent I/O goes through capability-checking proxies:</p>
<pre class="language-scheme">
(define (make-capability-proxy agent capabilities)
  "Create proxy that enforces capability checks"

  (lambda (operation . args)
    (let ((required-cap (operation-&gt;capability operation args)))

      ;; Check capability
      (unless (capability-granted? capabilities required-cap)
        (audit-violation agent operation required-cap)
        (error "Capability denied" operation))

      ;; Audit allowed operation
      (audit-agent-action agent operation args)

      ;; Execute operation
      (apply (operation-&gt;handler operation) args))))

(define (operation-&gt;capability op args)
  "Map operation to required capability"
  (case op
    ((read-file)
     (read (path ,(car args))))
    ((write-file)
     (write (path ,(car args))))
    ((http-get)
     (network (url ,(car args))))
    ((cas-get)
     (read (hash ,(car args))))
    (else
     (error "Unknown operation" op))))
</pre>
<h3>Attenuation on Delegation</h3>
<pre class="language-scheme">
(define (agent-spawn-child parent-agent child-spec)
  "Agent spawning child agent with attenuated capabilities"
  (let* ((parent-caps (agent-capabilities parent-agent))
         (requested-caps (spec-capabilities child-spec))

         ;; Child can only have subset of parent's capabilities
         (child-caps (capability-intersect parent-caps requested-caps)))

    (unless (equal? child-caps requested-caps)
      (warn "Child capabilities attenuated"))

    (spawn-agent (spec-with-capabilities child-spec child-caps))))
</pre>
</section>
<section>
<h2>Agent Communication</h2>
<h3>Message Passing</h3>
<p>Agents communicate via typed, capability-checked messages:</p>
<pre class="language-scheme">
(define (agent-send from-agent to-agent message)
  "Send message between agents"

  ;; Verify sender has send capability to receiver
  (unless (capability-granted? (agent-capabilities from-agent)
                               (send (agent ,(agent-id to-agent))))
    (error "Cannot send to agent"))

  ;; Verify message type allowed
  (unless (message-type-allowed? from-agent to-agent (message-type message))
    (error "Message type not allowed"))

  ;; Queue message
  (mailbox-enqueue (agent-mailbox to-agent)
                   (signed-message from-agent message))

  ;; Audit
  (audit-append
    action: (agent-message ,(agent-id from-agent) ,(agent-id to-agent))
    motivation: (message-type message)))

(define (agent-receive agent #!key timeout)
  "Receive message from mailbox"
  (let ((msg (mailbox-dequeue (agent-mailbox agent) timeout: timeout)))
    (when msg
      ;; Verify signature
      (verify-message-signature msg)
      msg)))
</pre>
<h3>Shared State</h3>
<p>Agents can share state through CAS:</p>
<pre class="language-scheme">
(define (agent-share agent hash recipients)
  "Share CAS object with other agents"

  ;; Verify agent can read the object
  (unless (capability-granted? (agent-capabilities agent)
                               (read (hash ,hash)))
    (error "Cannot read object to share"))

  ;; Grant read capability to recipients
  (for-each
    (lambda (recipient)
      (grant-capability agent recipient (read (hash ,hash))))
    recipients)

  ;; Audit sharing
  (audit-append
    action: `(agent-share ,hash ,recipients)))
</pre>
</section>
<section>
<h2>Monitoring and Control</h2>
<h3>Agent Status</h3>
<pre class="language-scheme">
(define (agent-status agent)
  "Get current agent status"
  `(agent-status
    (id ,(agent-id agent))
    (status ,(agent-state agent))
    (uptime ,(- (current-time) (agent-start-time agent)))
    (resources
      (memory ,(sandbox-memory-usage (agent-sandbox agent)))
      (cpu ,(sandbox-cpu-usage (agent-sandbox agent)))
      (storage ,(sandbox-storage-usage (agent-sandbox agent))))
    (actions ,(agent-action-count agent))
    (messages-sent ,(agent-messages-sent agent))
    (messages-received ,(agent-messages-received agent))))
</pre>
<h3>Agent Control</h3>
<pre class="language-scheme">
(define (agent-pause agent #!key reason)
  "Pause agent execution"
  (unless (authorized? (current-principal) 'control agent)
    (error "Not authorized to control agent"))
  (sandbox-pause (agent-sandbox agent))
  (set-agent-state! agent 'paused)
  (audit-append action: (agent-pause ,(agent-id agent)) motivation: reason))

(define (agent-resume agent)
  "Resume paused agent"
  (unless (authorized? (current-principal) 'control agent)
    (error "Not authorized to control agent"))
  (sandbox-resume (agent-sandbox agent))
  (set-agent-state! agent 'running)
  (audit-append action: (agent-resume ,(agent-id agent))))

(define (agent-terminate agent #!key reason)
  "Terminate agent immediately"
  (unless (authorized? (current-principal) 'control agent)
    (error "Not authorized to control agent"))
  (sandbox-kill (agent-sandbox agent))
  (set-agent-state! agent 'terminated)
  (audit-append
    action: `(agent-terminate ,(agent-id agent))
    motivation: reason
    priority: 'high)
  (cleanup-agent agent))
</pre>
<h3>Watchdog Daemon</h3>
<p>The watchdog daemon tends the flock of agents—a daemon watching daemons:</p>
<pre class="language-scheme">
(define (agent-watchdog)
  "Monitor all agents, enforce constraints"
  (for-each
    (lambda (agent)
      (when (eq? (agent-state agent) 'running)
        ;; Check resource limits
        (when (&gt; (sandbox-memory-usage (agent-sandbox agent))
                 (agent-max-memory agent))
          (agent-terminate agent reason: "Memory limit exceeded"))

        ;; Check runtime limit
        (when (&gt; (agent-uptime agent) (agent-max-runtime agent))
          (agent-terminate agent reason: "Runtime limit exceeded"))

        ;; Check heartbeat
        (when (&gt; (- (current-time) (agent-last-heartbeat agent))
                 agent-heartbeat-timeout)
          (agent-terminate agent reason: "Heartbeat timeout"))))
    (all-agents)))
</pre>
</section>
<section>
<h2>Soup Integration</h2>
<h3>Agents in the Soup</h3>
<pre class="language-scheme">
(soup-object
  (name "agent/2026-001")
  (type agent)
  (size "145KB")
  (status running)
  (spawned-by "ddp@electric-loft.org")
  (purpose "Archive arxiv papers")
  (runtime "4h 23m")
  (resources (memory "234MB") (storage "890MB"))
  (capabilities (read "arxiv.org/*") (write "/vault/papers/")))
</pre>
<h3>Querying Agents</h3>
<pre class="language-scheme">
;; All running agents
(soup-query type: 'agent status: 'running)

;; Agents spawned by user
(soup-query type: 'agent spawned-by: user-principal)

;; Agents with network access
(soup-query type: 'agent has-capability: 'network)

;; Resource hogs
(soup-query type: 'agent min-memory: (* 256 1024 1024))
</pre>
<h3>Agent Introspection</h3>
<pre class="language-scheme">
;; Agent can query itself
(define (agent-self-inspect)
  `(self
    (id ,(current-agent-id))
    (capabilities ,(current-capabilities))
    (resources-remaining
      (memory ,(- max-memory (current-memory)))
      (runtime ,(- max-runtime (current-uptime)))
      (fuel ,(remaining-fuel)))))
</pre>
</section>
<section>
<h2>Agent Patterns</h2>
<h3>Pattern 1: Periodic Task Agent</h3>
<pre class="language-scheme">
(spawn-agent
  (code '(lambda ()
           (let loop ()
             (perform-task)
             (sleep 3600)  ; hourly
             (loop))))
  (capabilities
    (read "/vault/feeds/")
    (write "/vault/archive/")
    (network ("rss.example.com")))
  (constraints
    (max-runtime ( 30 24 3600))  ; 30 days
    (max-memory ( 128 1024 1024))))
</pre>
<h3>Pattern 2: One-Shot Processing Agent</h3>
<pre class="language-scheme">
(spawn-agent
  (code '(lambda ()
           (let ((input (cas-get input-hash)))
             (let ((result (process input)))
               (cas-put result)))))
  (capabilities
    (read (hash input-hash))
    (write "/vault/results/"))
  (constraints
    (max-runtime 3600)
    (max-memory (* 1024 1024 1024))))
</pre>
<h3>Pattern 3: Reactive Agent</h3>
<pre class="language-scheme">
(spawn-agent
  (code '(lambda ()
           (let loop ()
             (let ((msg (agent-receive timeout: 60000)))
               (when msg
                 (handle-message msg))
               (loop)))))
  (capabilities
    (receive (from supervisor-agent))
    (send (to worker-agents))
    (read "/vault/tasks/")
    (write "/vault/results/"))
  (constraints
    (max-runtime #f)  ; runs until terminated
    (max-memory (* 256 1024 1024))))
</pre>
<h3>Pattern 4: Mobile Agent</h3>
<pre class="language-scheme">
;; Agent that migrates between vaults
(spawn-agent
  (code '(lambda ()
           (let ((data (gather-local-data)))
             (migrate-to remote-vault data)
             (process-remote data)
             (migrate-home results))))
  (capabilities
    (read "/vault/local/")
    (migrate (vaults (vault-a vault-b vault-c))))
  (constraints
    (max-migrations 10)
    (max-runtime (* 24 3600))))
</pre>
</section>
<section>
<h2>Security Considerations</h2>
<h3>Escape Prevention</h3>
<pre class="language-scheme">
;; Sandbox escape mitigations
(define sandbox-security
  '((seccomp "restrict system calls")
    (namespaces "process/network/mount isolation")
    (capabilities "drop all Linux capabilities")
    (no-setuid "prevent privilege escalation")
    (read-only-root "immutable rootfs")
    (no-raw-sockets "prevent network attacks")))
</pre>
<h3>Resource Exhaustion</h3>
<pre class="language-scheme">
;; Prevent denial of service
(define resource-limits
  '((memory "hard limit, OOM killer")
    (cpu "cgroups CPU quota")
    (disk "quota or sparse files")
    (network "bandwidth limiting")
    (processes "prevent fork bombs")
    (file-descriptors "prevent fd exhaustion")))
</pre>
<h3>Information Leakage</h3>
<pre class="language-scheme">
;; Prevent covert channels
(define isolation-measures
  '((timing "fuel-based execution, no precise timers")
    (filesystem "no access outside sandbox")
    (network "egress filtering")
    (ipc "message passing only, no shared memory")
    (environment "sanitized env vars")))
</pre>
<h3>Malicious Agents</h3>
<pre class="language-scheme">
(define (detect-malicious-behavior agent)
  "Heuristics for detecting malicious agents"
  (or
    ;; Excessive resource usage
    (&gt; (agent-resource-velocity agent) threshold)
    ;; Unusual network patterns
    (suspicious-network-activity? agent)
    ;; Repeated capability violations
    (&gt; (agent-violation-count agent) max-violations)
    ;; Anomalous message patterns
    (anomalous-messaging? agent)))
</pre>
</section>
<section>
<h2>Implementation Notes</h2>
<h3>Dependencies</h3>
<table>
<tr><th>Component </th><th>Implementation </th></tr>
<tr><td>Process sandbox </td><td>pledge/unveil (OpenBSD), seccomp (Linux) </td></tr>
<tr><td>Container sandbox </td><td>runc, crun </td></tr>
<tr><td>WASM sandbox </td><td>wasmtime, wasmer </td></tr>
<tr><td>Scheme sandbox </td><td>custom safe environment </td></tr>
</table>
<h3>Performance</h3>
<ul>
<li>Sandbox creation: ~100ms (container), ~10ms (process), ~1ms (WASM)</li>
<li>Message passing: ~10μs (local), ~1ms (cross-sandbox)</li>
<li>Capability check: ~100ns (cached), ~10μs (chain validation)</li>
</ul>
</section>
<section>
<h2>References</h2>
<p>1. [Telescript Technology: Mobile Agents](https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/telescript.html) 2. [Capsicum: Practical Capabilities for UNIX](https://www.cl.cam.ac.uk/research/security/capsicum/) 3. [WebAssembly System Interface (WASI)](https://wasi.dev/) 4. [Memo-021: Capability Delegation](memo-021-capability-delegation.html) 5. [Memo-003: Cryptographic Audit Trail](memo-003-audit-trail.html) 6. [E Programming Language](http://erights.org/) - Object capabilities</p>
</section>
<section>
<h2>Changelog</h2>
<ul>
<li>2026-01-07</li>
<li>Initial draft</li>
</ul>
</section>
<script>
function toggleTheme() {
  const html = document.documentElement;
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
}
(function() {
  // Query param override (for REPL: ?theme=dark or ?theme=light)
  const params = new URLSearchParams(window.location.search);
  const param = params.get('theme');
  if (param === 'dark' || param === 'light') {
    document.documentElement.setAttribute('data-theme', param);
    localStorage.setItem('theme', param);
    return;
  }
  // localStorage preference
  const saved = localStorage.getItem('theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
  } else if (window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', 'light');
  }
})();
</script>
</body>
</html>
