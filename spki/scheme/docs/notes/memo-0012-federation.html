<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <title>Memo 0012: Federation Protocol</title>
  <link rel="icon" id="favicon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27%230f0%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>">
  <script>
(function(){
  var h=new Date().getHours(),c;
  if(h>=4&&h<6)c='%23845EC2';       // brahma muhurta - violet
  else if(h>=6&&h<8)c='%23ffd700';  // dawn - gold
  else if(h>=8&&h<11)c='%2300d4aa'; // morning - teal
  else if(h>=11&&h<14)c='%230f0';   // midday - phosphor
  else if(h>=14&&h<17)c='%2339ff14';// afternoon - neon
  else if(h>=17&&h<19)c='%23ff6600';// sunset - orange
  else if(h>=19&&h<22)c='%23ff3366';// evening - coral
  else c='%2300ffff';               // night - cyan
  document.getElementById('favicon').href='data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27'+c+'%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>';
})();
</script>
  <link rel="stylesheet" href="memo.css">
</head>
<body>
<span class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark">[theme]</span>
<h1>Memo 0012: Federation Protocol</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>This Memo specifies the Federation Protocol for the Library of Cyberspace: a peer-to-peer synchronization system enabling loose confederacies of friends to share and preserve cryptographically sealed artifacts without central authority.</p>
</section>
<section>
<h2>E Pluribus Unum</h2>
<p>Out of many, one.</p>
<div class="diagram-container">
<svg class="diagram" viewBox="0 0 528.0 230.4" width="528.0" height="230.4" xmlns="http://www.w3.org/2000/svg">
<style>
  line { stroke: currentColor; stroke-width: 1.5; stroke-linecap: round; }
  text { font-family: 'Hack', 'SF Mono', monospace; font-size: 16px; fill: currentColor; }
</style>
<line x1="43.2" y1="9.6" x2="48.0" y2="9.6"/>
<line x1="43.2" y1="9.6" x2="43.2" y2="19.2"/>
<line x1="48.0" y1="9.6" x2="57.6" y2="9.6"/>
<line x1="57.6" y1="9.6" x2="67.2" y2="9.6"/>
<line x1="67.2" y1="9.6" x2="76.8" y2="9.6"/>
<line x1="76.8" y1="9.6" x2="86.4" y2="9.6"/>
<line x1="86.4" y1="9.6" x2="96.0" y2="9.6"/>
<line x1="96.0" y1="9.6" x2="105.6" y2="9.6"/>
<line x1="105.6" y1="9.6" x2="115.2" y2="9.6"/>
<line x1="115.2" y1="9.6" x2="124.8" y2="9.6"/>
<line x1="124.8" y1="9.6" x2="134.4" y2="9.6"/>
<line x1="134.4" y1="9.6" x2="139.2" y2="9.6"/>
<line x1="139.2" y1="9.6" x2="139.2" y2="19.2"/>
<line x1="235.2" y1="9.6" x2="240.0" y2="9.6"/>
<line x1="235.2" y1="9.6" x2="235.2" y2="19.2"/>
<line x1="240.0" y1="9.6" x2="249.6" y2="9.6"/>
<line x1="249.6" y1="9.6" x2="259.2" y2="9.6"/>
<line x1="259.2" y1="9.6" x2="268.8" y2="9.6"/>
<line x1="268.8" y1="9.6" x2="278.4" y2="9.6"/>
<line x1="278.4" y1="9.6" x2="288.0" y2="9.6"/>
<line x1="288.0" y1="9.6" x2="297.6" y2="9.6"/>
<line x1="297.6" y1="9.6" x2="307.2" y2="9.6"/>
<line x1="307.2" y1="9.6" x2="316.8" y2="9.6"/>
<line x1="316.8" y1="9.6" x2="326.4" y2="9.6"/>
<line x1="326.4" y1="9.6" x2="331.2" y2="9.6"/>
<line x1="331.2" y1="9.6" x2="331.2" y2="19.2"/>
<line x1="427.2" y1="9.6" x2="432.0" y2="9.6"/>
<line x1="427.2" y1="9.6" x2="427.2" y2="19.2"/>
<line x1="432.0" y1="9.6" x2="441.6" y2="9.6"/>
<line x1="441.6" y1="9.6" x2="451.2" y2="9.6"/>
<line x1="451.2" y1="9.6" x2="460.8" y2="9.6"/>
<line x1="460.8" y1="9.6" x2="470.4" y2="9.6"/>
<line x1="470.4" y1="9.6" x2="480.0" y2="9.6"/>
<line x1="480.0" y1="9.6" x2="489.6" y2="9.6"/>
<line x1="489.6" y1="9.6" x2="499.2" y2="9.6"/>
<line x1="499.2" y1="9.6" x2="508.8" y2="9.6"/>
<line x1="508.8" y1="9.6" x2="518.4" y2="9.6"/>
<line x1="518.4" y1="9.6" x2="523.2" y2="9.6"/>
<line x1="523.2" y1="9.6" x2="523.2" y2="19.2"/>
<line x1="43.2" y1="19.2" x2="43.2" y2="38.4"/>
<line x1="139.2" y1="19.2" x2="139.2" y2="38.4"/>
<line x1="153.6" y1="28.8" x2="163.2" y2="28.8"/>
<line x1="163.2" y1="28.8" x2="172.8" y2="28.8"/>
<line x1="172.8" y1="28.8" x2="182.4" y2="28.8"/>
<line x1="182.4" y1="28.8" x2="192.0" y2="28.8"/>
<line x1="192.0" y1="28.8" x2="201.6" y2="28.8"/>
<line x1="201.6" y1="28.8" x2="211.2" y2="28.8"/>
<line x1="211.2" y1="28.8" x2="220.8" y2="28.8"/>
<line x1="235.2" y1="19.2" x2="235.2" y2="38.4"/>
<line x1="331.2" y1="19.2" x2="331.2" y2="38.4"/>
<line x1="345.6" y1="28.8" x2="355.2" y2="28.8"/>
<line x1="355.2" y1="28.8" x2="364.8" y2="28.8"/>
<line x1="364.8" y1="28.8" x2="374.4" y2="28.8"/>
<line x1="374.4" y1="28.8" x2="384.0" y2="28.8"/>
<line x1="384.0" y1="28.8" x2="393.6" y2="28.8"/>
<line x1="393.6" y1="28.8" x2="403.2" y2="28.8"/>
<line x1="403.2" y1="28.8" x2="412.8" y2="28.8"/>
<line x1="427.2" y1="19.2" x2="427.2" y2="38.4"/>
<line x1="523.2" y1="19.2" x2="523.2" y2="38.4"/>
<line x1="43.2" y1="38.4" x2="43.2" y2="57.6"/>
<line x1="139.2" y1="38.4" x2="139.2" y2="57.6"/>
<line x1="235.2" y1="38.4" x2="235.2" y2="57.6"/>
<line x1="331.2" y1="38.4" x2="331.2" y2="57.6"/>
<line x1="427.2" y1="38.4" x2="427.2" y2="57.6"/>
<line x1="523.2" y1="38.4" x2="523.2" y2="57.6"/>
<line x1="43.2" y1="67.2" x2="48.0" y2="67.2"/>
<line x1="43.2" y1="57.6" x2="43.2" y2="67.2"/>
<line x1="48.0" y1="67.2" x2="57.6" y2="67.2"/>
<line x1="57.6" y1="67.2" x2="67.2" y2="67.2"/>
<line x1="67.2" y1="67.2" x2="76.8" y2="67.2"/>
<line x1="76.8" y1="67.2" x2="86.4" y2="67.2"/>
<line x1="86.4" y1="67.2" x2="96.0" y2="67.2"/>
<line x1="91.2" y1="67.2" x2="91.2" y2="76.8"/>
<line x1="96.0" y1="67.2" x2="105.6" y2="67.2"/>
<line x1="105.6" y1="67.2" x2="115.2" y2="67.2"/>
<line x1="115.2" y1="67.2" x2="124.8" y2="67.2"/>
<line x1="124.8" y1="67.2" x2="134.4" y2="67.2"/>
<line x1="134.4" y1="67.2" x2="139.2" y2="67.2"/>
<line x1="139.2" y1="57.6" x2="139.2" y2="67.2"/>
<line x1="235.2" y1="67.2" x2="240.0" y2="67.2"/>
<line x1="235.2" y1="57.6" x2="235.2" y2="67.2"/>
<line x1="240.0" y1="67.2" x2="249.6" y2="67.2"/>
<line x1="249.6" y1="67.2" x2="259.2" y2="67.2"/>
<line x1="259.2" y1="67.2" x2="268.8" y2="67.2"/>
<line x1="268.8" y1="67.2" x2="278.4" y2="67.2"/>
<line x1="278.4" y1="67.2" x2="288.0" y2="67.2"/>
<line x1="283.2" y1="67.2" x2="283.2" y2="76.8"/>
<line x1="288.0" y1="67.2" x2="297.6" y2="67.2"/>
<line x1="297.6" y1="67.2" x2="307.2" y2="67.2"/>
<line x1="307.2" y1="67.2" x2="316.8" y2="67.2"/>
<line x1="316.8" y1="67.2" x2="326.4" y2="67.2"/>
<line x1="326.4" y1="67.2" x2="331.2" y2="67.2"/>
<line x1="331.2" y1="57.6" x2="331.2" y2="67.2"/>
<line x1="427.2" y1="67.2" x2="432.0" y2="67.2"/>
<line x1="427.2" y1="57.6" x2="427.2" y2="67.2"/>
<line x1="432.0" y1="67.2" x2="441.6" y2="67.2"/>
<line x1="441.6" y1="67.2" x2="451.2" y2="67.2"/>
<line x1="451.2" y1="67.2" x2="460.8" y2="67.2"/>
<line x1="460.8" y1="67.2" x2="470.4" y2="67.2"/>
<line x1="470.4" y1="67.2" x2="480.0" y2="67.2"/>
<line x1="475.2" y1="67.2" x2="475.2" y2="76.8"/>
<line x1="480.0" y1="67.2" x2="489.6" y2="67.2"/>
<line x1="489.6" y1="67.2" x2="499.2" y2="67.2"/>
<line x1="499.2" y1="67.2" x2="508.8" y2="67.2"/>
<line x1="508.8" y1="67.2" x2="518.4" y2="67.2"/>
<line x1="518.4" y1="67.2" x2="523.2" y2="67.2"/>
<line x1="523.2" y1="57.6" x2="523.2" y2="67.2"/>
<line x1="91.2" y1="76.8" x2="91.2" y2="96.0"/>
<line x1="283.2" y1="76.8" x2="283.2" y2="96.0"/>
<line x1="523.2" y1="76.8" x2="523.2" y2="96.0"/>
<line x1="91.2" y1="96.0" x2="91.2" y2="115.2"/>
<line x1="139.2" y1="105.6" x2="144.0" y2="105.6"/>
<line x1="139.2" y1="105.6" x2="139.2" y2="115.2"/>
<line x1="144.0" y1="105.6" x2="153.6" y2="105.6"/>
<line x1="153.6" y1="105.6" x2="163.2" y2="105.6"/>
<line x1="163.2" y1="105.6" x2="172.8" y2="105.6"/>
<line x1="172.8" y1="105.6" x2="182.4" y2="105.6"/>
<line x1="182.4" y1="105.6" x2="192.0" y2="105.6"/>
<line x1="192.0" y1="105.6" x2="201.6" y2="105.6"/>
<line x1="201.6" y1="105.6" x2="211.2" y2="105.6"/>
<line x1="211.2" y1="105.6" x2="220.8" y2="105.6"/>
<line x1="220.8" y1="105.6" x2="230.4" y2="105.6"/>
<line x1="230.4" y1="105.6" x2="240.0" y2="105.6"/>
<line x1="240.0" y1="105.6" x2="249.6" y2="105.6"/>
<line x1="249.6" y1="105.6" x2="259.2" y2="105.6"/>
<line x1="259.2" y1="105.6" x2="268.8" y2="105.6"/>
<line x1="268.8" y1="105.6" x2="278.4" y2="105.6"/>
<line x1="278.4" y1="105.6" x2="288.0" y2="105.6"/>
<line x1="283.2" y1="96.0" x2="283.2" y2="105.6"/>
<line x1="288.0" y1="105.6" x2="297.6" y2="105.6"/>
<line x1="297.6" y1="105.6" x2="307.2" y2="105.6"/>
<line x1="307.2" y1="105.6" x2="316.8" y2="105.6"/>
<line x1="316.8" y1="105.6" x2="326.4" y2="105.6"/>
<line x1="326.4" y1="105.6" x2="336.0" y2="105.6"/>
<line x1="336.0" y1="105.6" x2="345.6" y2="105.6"/>
<line x1="345.6" y1="105.6" x2="355.2" y2="105.6"/>
<line x1="355.2" y1="105.6" x2="364.8" y2="105.6"/>
<line x1="364.8" y1="105.6" x2="374.4" y2="105.6"/>
<line x1="374.4" y1="105.6" x2="384.0" y2="105.6"/>
<line x1="384.0" y1="105.6" x2="393.6" y2="105.6"/>
<line x1="393.6" y1="105.6" x2="403.2" y2="105.6"/>
<line x1="403.2" y1="105.6" x2="412.8" y2="105.6"/>
<line x1="412.8" y1="105.6" x2="422.4" y2="105.6"/>
<line x1="422.4" y1="105.6" x2="427.2" y2="105.6"/>
<line x1="427.2" y1="105.6" x2="427.2" y2="115.2"/>
<line x1="523.2" y1="96.0" x2="523.2" y2="115.2"/>
<line x1="91.2" y1="115.2" x2="91.2" y2="134.4"/>
<line x1="139.2" y1="115.2" x2="139.2" y2="134.4"/>
<line x1="427.2" y1="115.2" x2="427.2" y2="134.4"/>
<line x1="523.2" y1="115.2" x2="523.2" y2="134.4"/>
<line x1="91.2" y1="144.0" x2="96.0" y2="144.0"/>
<line x1="91.2" y1="134.4" x2="91.2" y2="144.0"/>
<line x1="96.0" y1="144.0" x2="105.6" y2="144.0"/>
<line x1="105.6" y1="144.0" x2="115.2" y2="144.0"/>
<line x1="115.2" y1="144.0" x2="124.8" y2="144.0"/>
<line x1="124.8" y1="144.0" x2="134.4" y2="144.0"/>
<line x1="422.4" y1="144.0" x2="432.0" y2="144.0"/>
<line x1="432.0" y1="144.0" x2="441.6" y2="144.0"/>
<line x1="441.6" y1="144.0" x2="451.2" y2="144.0"/>
<line x1="451.2" y1="144.0" x2="460.8" y2="144.0"/>
<line x1="518.4" y1="144.0" x2="523.2" y2="144.0"/>
<line x1="523.2" y1="134.4" x2="523.2" y2="144.0"/>
<line x1="139.2" y1="153.6" x2="139.2" y2="172.8"/>
<line x1="523.2" y1="153.6" x2="523.2" y2="172.8"/>
<line x1="139.2" y1="172.8" x2="139.2" y2="192.0"/>
<line x1="523.2" y1="172.8" x2="523.2" y2="192.0"/>
<line x1="139.2" y1="192.0" x2="139.2" y2="211.2"/>
<line x1="523.2" y1="192.0" x2="523.2" y2="211.2"/>
<line x1="139.2" y1="220.8" x2="144.0" y2="220.8"/>
<line x1="139.2" y1="211.2" x2="139.2" y2="220.8"/>
<line x1="144.0" y1="220.8" x2="153.6" y2="220.8"/>
<line x1="153.6" y1="220.8" x2="163.2" y2="220.8"/>
<line x1="163.2" y1="220.8" x2="172.8" y2="220.8"/>
<line x1="172.8" y1="220.8" x2="182.4" y2="220.8"/>
<line x1="182.4" y1="220.8" x2="192.0" y2="220.8"/>
<line x1="192.0" y1="220.8" x2="201.6" y2="220.8"/>
<line x1="201.6" y1="220.8" x2="211.2" y2="220.8"/>
<line x1="211.2" y1="220.8" x2="220.8" y2="220.8"/>
<line x1="220.8" y1="220.8" x2="230.4" y2="220.8"/>
<line x1="230.4" y1="220.8" x2="240.0" y2="220.8"/>
<line x1="240.0" y1="220.8" x2="249.6" y2="220.8"/>
<line x1="249.6" y1="220.8" x2="259.2" y2="220.8"/>
<line x1="259.2" y1="220.8" x2="268.8" y2="220.8"/>
<line x1="268.8" y1="220.8" x2="278.4" y2="220.8"/>
<line x1="278.4" y1="220.8" x2="288.0" y2="220.8"/>
<line x1="288.0" y1="220.8" x2="297.6" y2="220.8"/>
<line x1="297.6" y1="220.8" x2="307.2" y2="220.8"/>
<line x1="307.2" y1="220.8" x2="316.8" y2="220.8"/>
<line x1="316.8" y1="220.8" x2="326.4" y2="220.8"/>
<line x1="326.4" y1="220.8" x2="336.0" y2="220.8"/>
<line x1="336.0" y1="220.8" x2="345.6" y2="220.8"/>
<line x1="345.6" y1="220.8" x2="355.2" y2="220.8"/>
<line x1="355.2" y1="220.8" x2="364.8" y2="220.8"/>
<line x1="364.8" y1="220.8" x2="374.4" y2="220.8"/>
<line x1="374.4" y1="220.8" x2="384.0" y2="220.8"/>
<line x1="384.0" y1="220.8" x2="393.6" y2="220.8"/>
<line x1="393.6" y1="220.8" x2="403.2" y2="220.8"/>
<line x1="403.2" y1="220.8" x2="412.8" y2="220.8"/>
<line x1="412.8" y1="220.8" x2="422.4" y2="220.8"/>
<line x1="518.4" y1="220.8" x2="523.2" y2="220.8"/>
<line x1="523.2" y1="211.2" x2="523.2" y2="220.8"/>
<text x="72.0" y="28.8" text-anchor="middle" dominant-baseline="central">A</text>
<text x="81.6" y="28.8" text-anchor="middle" dominant-baseline="central">l</text>
<text x="91.2" y="28.8" text-anchor="middle" dominant-baseline="central">i</text>
<text x="100.8" y="28.8" text-anchor="middle" dominant-baseline="central">c</text>
<text x="110.4" y="28.8" text-anchor="middle" dominant-baseline="central">e</text>
<text x="148.8" y="28.8" text-anchor="middle" dominant-baseline="central">◄</text>
<text x="225.6" y="28.8" text-anchor="middle" dominant-baseline="central">→</text>
<text x="273.6" y="28.8" text-anchor="middle" dominant-baseline="central">B</text>
<text x="283.2" y="28.8" text-anchor="middle" dominant-baseline="central">o</text>
<text x="292.8" y="28.8" text-anchor="middle" dominant-baseline="central">b</text>
<text x="340.8" y="28.8" text-anchor="middle" dominant-baseline="central">◄</text>
<text x="417.6" y="28.8" text-anchor="middle" dominant-baseline="central">→</text>
<text x="456.0" y="28.8" text-anchor="middle" dominant-baseline="central">C</text>
<text x="465.6" y="28.8" text-anchor="middle" dominant-baseline="central">a</text>
<text x="475.2" y="28.8" text-anchor="middle" dominant-baseline="central">r</text>
<text x="484.8" y="28.8" text-anchor="middle" dominant-baseline="central">o</text>
<text x="494.4" y="28.8" text-anchor="middle" dominant-baseline="central">l</text>
<text x="72.0" y="48.0" text-anchor="middle" dominant-baseline="central">V</text>
<text x="81.6" y="48.0" text-anchor="middle" dominant-baseline="central">a</text>
<text x="91.2" y="48.0" text-anchor="middle" dominant-baseline="central">u</text>
<text x="100.8" y="48.0" text-anchor="middle" dominant-baseline="central">l</text>
<text x="110.4" y="48.0" text-anchor="middle" dominant-baseline="central">t</text>
<text x="264.0" y="48.0" text-anchor="middle" dominant-baseline="central">V</text>
<text x="273.6" y="48.0" text-anchor="middle" dominant-baseline="central">a</text>
<text x="283.2" y="48.0" text-anchor="middle" dominant-baseline="central">u</text>
<text x="292.8" y="48.0" text-anchor="middle" dominant-baseline="central">l</text>
<text x="302.4" y="48.0" text-anchor="middle" dominant-baseline="central">t</text>
<text x="456.0" y="48.0" text-anchor="middle" dominant-baseline="central">V</text>
<text x="465.6" y="48.0" text-anchor="middle" dominant-baseline="central">a</text>
<text x="475.2" y="48.0" text-anchor="middle" dominant-baseline="central">u</text>
<text x="484.8" y="48.0" text-anchor="middle" dominant-baseline="central">l</text>
<text x="494.4" y="48.0" text-anchor="middle" dominant-baseline="central">t</text>
<text x="139.2" y="144.0" text-anchor="middle" dominant-baseline="central">→</text>
<text x="187.2" y="144.0" text-anchor="middle" dominant-baseline="central">N</text>
<text x="196.8" y="144.0" text-anchor="middle" dominant-baseline="central">o</text>
<text x="216.0" y="144.0" text-anchor="middle" dominant-baseline="central">C</text>
<text x="225.6" y="144.0" text-anchor="middle" dominant-baseline="central">e</text>
<text x="235.2" y="144.0" text-anchor="middle" dominant-baseline="central">n</text>
<text x="244.8" y="144.0" text-anchor="middle" dominant-baseline="central">t</text>
<text x="254.4" y="144.0" text-anchor="middle" dominant-baseline="central">r</text>
<text x="264.0" y="144.0" text-anchor="middle" dominant-baseline="central">a</text>
<text x="273.6" y="144.0" text-anchor="middle" dominant-baseline="central">l</text>
<text x="292.8" y="144.0" text-anchor="middle" dominant-baseline="central">A</text>
<text x="302.4" y="144.0" text-anchor="middle" dominant-baseline="central">u</text>
<text x="312.0" y="144.0" text-anchor="middle" dominant-baseline="central">t</text>
<text x="321.6" y="144.0" text-anchor="middle" dominant-baseline="central">h</text>
<text x="331.2" y="144.0" text-anchor="middle" dominant-baseline="central">o</text>
<text x="340.8" y="144.0" text-anchor="middle" dominant-baseline="central">r</text>
<text x="350.4" y="144.0" text-anchor="middle" dominant-baseline="central">i</text>
<text x="360.0" y="144.0" text-anchor="middle" dominant-baseline="central">t</text>
<text x="369.6" y="144.0" text-anchor="middle" dominant-baseline="central">y</text>
<text x="417.6" y="144.0" text-anchor="middle" dominant-baseline="central">◄</text>
<text x="177.6" y="182.4" text-anchor="middle" dominant-baseline="central">J</text>
<text x="187.2" y="182.4" text-anchor="middle" dominant-baseline="central">u</text>
<text x="196.8" y="182.4" text-anchor="middle" dominant-baseline="central">s</text>
<text x="206.4" y="182.4" text-anchor="middle" dominant-baseline="central">t</text>
<text x="225.6" y="182.4" text-anchor="middle" dominant-baseline="central">k</text>
<text x="235.2" y="182.4" text-anchor="middle" dominant-baseline="central">e</text>
<text x="244.8" y="182.4" text-anchor="middle" dominant-baseline="central">y</text>
<text x="254.4" y="182.4" text-anchor="middle" dominant-baseline="central">s</text>
<text x="264.0" y="182.4" text-anchor="middle" dominant-baseline="central">,</text>
<text x="283.2" y="182.4" text-anchor="middle" dominant-baseline="central">s</text>
<text x="292.8" y="182.4" text-anchor="middle" dominant-baseline="central">e</text>
<text x="302.4" y="182.4" text-anchor="middle" dominant-baseline="central">a</text>
<text x="312.0" y="182.4" text-anchor="middle" dominant-baseline="central">l</text>
<text x="321.6" y="182.4" text-anchor="middle" dominant-baseline="central">s</text>
<text x="331.2" y="182.4" text-anchor="middle" dominant-baseline="central">,</text>
<text x="350.4" y="182.4" text-anchor="middle" dominant-baseline="central">t</text>
<text x="360.0" y="182.4" text-anchor="middle" dominant-baseline="central">r</text>
<text x="369.6" y="182.4" text-anchor="middle" dominant-baseline="central">u</text>
<text x="379.2" y="182.4" text-anchor="middle" dominant-baseline="central">s</text>
<text x="388.8" y="182.4" text-anchor="middle" dominant-baseline="central">t</text>
</svg>
</div>
</section>
<section>
<h2>Motivation</h2>
<p>Centralized systems fail:</p>
<ul>
<li>Single point of failure: Server goes down, everyone stops</li>
<li>Censorship: Authority can deny access</li>
<li>Trust concentration: Must trust operator</li>
<li>Survival: Company folds, data lost</li>
</ul>
<p>Federation provides:</p>
<p>1. Decentralized - No master server 2. Resilient - Survives node failures 3. Autonomous - Each peer controls own data 4. Cryptographic - Trust through math, not authority 5. Eventual consistency - Convergence without coordination</p>
</section>
<section>
<h2>Federation Model</h2>
<h3>Peer Relationships</h3>
<pre>
Peer: A vault instance with identity (SPKI principal)

Relationships:
  - Publisher:  I push releases to you
  - Subscriber: I pull releases from you
  - Peer:       Bidirectional sync
</pre>
<h3>Trust Model</h3>
<pre class="language-scheme">
(federation-trust
  (peer alice-pubkey
    (role publisher)
    (trust-level verified)     ; Signature verified
    (sync-policy automatic))

  (peer bob-pubkey
    (role subscriber)
    (trust-level known)        ; Key known, not verified
    (sync-policy manual)))
</pre>
<p>Trust levels: - unknown: Never seen, reject - known: Key registered, manual approval - verified: Signature chain verified via Simple Public Key Infrastructure (SPKI) - trusted: Full automatic sync</p>
</section>
<section>
<h2>Protocol Operations</h2>
<h3>Peer Discovery</h3>
<pre class="language-scheme">
(federation-discover)
;; Returns: List of known peers and their status
</pre>
<p>Discovery mechanisms: 1. Explicit configuration: Known peer list 2. Git remotes: Extract from repository 3. Directory service: Optional, not required 4. mDNS/Bonjour: Local network discovery via cyberspace.tcp</p>
<h3>mDNS Service Discovery</h3>
<p>Cyberspace nodes announce themselves via mDNS using the cyberspace.tcp service type:</p>
<pre class="language-scheme">
;; Announce this node
(announce-presence 'starlight)
;; Registers: starlight.cyberspace.tcp.local. port 7654

;; Discover peers
(discover-peers)
;; Scans for cyberspace.tcp services on local network
</pre>
<p>Platform support: - macOS: dns-sd -R for registration, dns-sd -B for browsing - Linux: avahi-publish for registration, avahi-browse for browsing</p>
<h3>Peer Registration</h3>
<pre class="language-scheme">
(federation-register peer-uri
  #!key public-key trust-level)
</pre>
<p>Registers a new peer with: - URI (git remote, HTTP endpoint, filesystem path) - Public key for verification - Initial trust level</p>
<h3>Release Announcement</h3>
<pre class="language-scheme">
(federation-announce version
  #!key peers message)
</pre>
<p>Pushes release notification to peers: 1. Create signed announcement 2. Send to specified peers (or all) 3. Peers verify signature 4. Peers decide whether to pull</p>
<h3>Release Request</h3>
<pre class="language-scheme">
(federation-request version peer
  #!key verify-key)
</pre>
<p>Pulls specific release from peer: 1. Request release metadata 2. Verify signature 3. Download archive 4. Verify integrity 5. Record in audit trail</p>
<h3>Synchronization</h3>
<pre class="language-scheme">
(federation-sync peer
  #!key direction verify-key)
</pre>
<p>Bidirectional sync (from Memo-0002): 1. Exchange release lists 2. Identify missing releases 3. Push/pull as configured 4. Verify all signatures 5. Update audit trails</p>
</section>
<section>
<h2>Message Format</h2>
<h3>Announcement Message</h3>
<pre class="language-scheme">
(federation-message
  (type announcement)
  (from #${alice-pubkey})
  (timestamp 1767685100)
  (payload
    (release "2.0.0")
    (hash "sha512:...")
    (archive-size 1048576)
    (notes "Major release"))
  (signature #${ed25519-sig}))
</pre>
<h3>Request Message</h3>
<pre class="language-scheme">
(federation-message
  (type request)
  (from #${bob-pubkey})
  (timestamp 1767685200)
  (payload
    (release "2.0.0")
    (format cryptographic))
  (signature #${ed25519-sig}))
</pre>
<h3>Response Message</h3>
<pre class="language-scheme">
(federation-message
  (type response)
  (from #${alice-pubkey})
  (in-reply-to "sha512:request-hash")
  (timestamp 1767685300)
  (payload
    (release "2.0.0")
    (archive-uri "/releases/vault-2.0.0.archive")
    (hash "sha512:...")
    (signature "ed25519:..."))
  (signature #${ed25519-sig}))
</pre>
</section>
<section>
<h2>Transport Bindings</h2>
<h3>Git Transport</h3>
<pre>
Origin: git@github.com:alice/vault.git
Mechanism: Tags + release assets

Announce: git push origin v2.0.0
Request:  git fetch origin --tags
Sync:     git fetch origin &amp;&amp; git push origin
</pre>
<h3>HTTP Transport</h3>
<pre>
Endpoint: https://alice.example.com/federation

Announce: POST /federation/announce
Request:  GET /federation/releases/2.0.0
Sync:     POST /federation/sync
</pre>
<h3>Filesystem Transport</h3>
<pre>
Path: /shared/federation/alice

Announce: Copy to /shared/federation/alice/announce/
Request:  Read from /shared/federation/alice/releases/
Sync:     rsync --update
</pre>
</section>
<section>
<h2>Conflict Resolution</h2>
<h3>Version Conflicts</h3>
<p>Same version, different content:</p>
<pre class="language-scheme">
(federation-conflict
  (version "2.0.0")
  (local-hash "sha512:abc...")
  (remote-hash "sha512:def...")
  (resolution reject))  ; Or: prefer-local, prefer-remote, rename
</pre>
<p>Default: Reject conflicts, require human decision.</p>
<h3>Resolution Strategies</h3>
<p>1. Reject: Stop sync, alert human 2. Prefer-local: Keep local version 3. Prefer-remote: Take remote version 4. Rename: Keep both as 2.0.0-local, 2.0.0-remote 5. Merge: If content mergeable (future)</p>
</section>
<section>
<h2>Consistency Model</h2>
<h3>Eventual Consistency</h3>
<ul>
<li>No global ordering required</li>
<li>Each peer has local view</li>
<li>Convergence through sync</li>
<li>Conflicts resolved locally</li>
</ul>
<h3>Causal Ordering</h3>
<p>Within a peer's releases: - Version numbers are monotonic - Audit trail provides causality - Hash chains prevent reordering</p>
<h3>No Coordination</h3>
<ul>
<li>No consensus protocol required</li>
<li>No distributed lock</li>
<li>No leader election</li>
<li>Each peer autonomous</li>
</ul>
</section>
<section>
<h2>Security Considerations</h2>
<h3>Threat Model</h3>
<p>Protected: - Unauthenticated release injection (signature verification) - Content tampering (hash verification) - Impersonation (SPKI principal binding) - Replay attacks (timestamps, sequence numbers)</p>
<p>Not protected: - Denial of service (rate limiting helps) - Privacy of release metadata (encrypted transport helps) - Sybil attacks (trust management helps)</p>
<h3>Trust Verification</h3>
<pre class="language-scheme">
(define (verify-peer-message msg peer-key)
  (and (verify-signature msg peer-key)
       (verify-timestamp msg (current-seconds))
       (verify-not-replayed msg)))
</pre>
<h3>Rate Limiting</h3>
<pre class="language-scheme">
(federation-config
  (rate-limit
    (announcements-per-hour 10)
    (requests-per-minute 60)
    (sync-interval-minimum 300)))
</pre>
</section>
<section>
<h2>Gossip Protocol (Future)</h2>
<p>For larger networks:</p>
<pre>
Alice announces to Bob and Carol
Bob announces to Dave and Eve
Eve announces to Frank

Result: Epidemic spread without central broadcast
</pre>
<p>Properties: - Logarithmic propagation time - Resilient to node failures - No single bottleneck</p>
</section>
<section>
<h2>Bootstrap Procedure</h2>
<h3>New Peer Joining</h3>
<p>1. Generate keypair 2. Register with known peer 3. Exchange public keys (out-of-band verification) 4. Initial sync to get current releases 5. Begin participating in federation</p>
<h3>Network Partitions</h3>
<ul>
<li>Partitions heal automatically on reconnection</li>
<li>Conflicting releases detected and flagged</li>
<li>Audit trails show partition history</li>
</ul>
</section>
<section>
<h2>Configuration</h2>
<pre class="language-scheme">
(federation-config
  ;; Identity
  (identity my-private-key)

  ;; Peers
  (peers
    (peer "alice" uri: "git@github.com:alice/vault.git"
                  key: alice-pubkey
                  trust: verified)
    (peer "bob"   uri: "/shared/bob-vault"
                  key: bob-pubkey
                  trust: known))

  ;; Policies
  (auto-sync #t)
  (sync-interval 3600)  ; seconds
  (verify-before-accept #t)

  ;; Security
  (require-signature #t)
  (trust-on-first-use #f))
</pre>
</section>
<section>
<h2>Implementation Status</h2>
<h3>Implemented (Memo-001)</h3>
<ul>
<li>seal-publish: Push to single remote - seal-subscribe: Pull from single remote - seal-synchronize: Bidirectional with single peer</li>
<li>Transport: git, HTTP, filesystem</li>
</ul>
<h3>Proposed (This Memo)</h3>
<ul>
<li>Multi-peer management</li>
<li>Trust levels and policies</li>
<li>Announcement protocol</li>
<li>Gossip propagation</li>
<li>Conflict resolution UI</li>
</ul>
</section>
<section>
<h2>References</h2>
<p>1. Birman, K. (2007). The Promise, and Limitations, of Gossip Protocols. 2. Demers, A., et al. (1987). Epidemic Algorithms for Replicated Database Maintenance. 3. Shapiro, M., et al. (2011). Conflict-Free Replicated Data Types. 4. Memo-0002: Replication Layer 5. Memo-004: SPKI Authorization</p>
</section>
<section>
<h2>Changelog</h2>
<ul>
<li>2026-01-06</li>
<li>Initial specification</li>
</ul>
</section>
<script>
function toggleTheme() {
  const html = document.documentElement;
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
}
(function() {
  // Query param override (for REPL: ?theme=dark or ?theme=light)
  const params = new URLSearchParams(window.location.search);
  const param = params.get('theme');
  if (param === 'dark' || param === 'light') {
    document.documentElement.setAttribute('data-theme', param);
    localStorage.setItem('theme', param);
    return;
  }
  // localStorage preference
  const saved = localStorage.getItem('theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
  } else if (window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', 'light');
  }
})();
</script>
</body>
</html>
