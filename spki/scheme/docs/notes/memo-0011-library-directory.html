<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <title>Memo 0011: Library Directory System</title>
  <link rel="icon" id="favicon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27%230f0%27 text-anchor=%27middle%27 font-weight=%27bold%27>Î»</text></svg>">
  <script>
(function(){
  var h=new Date().getHours(),c;
  if(h>=4&&h<6)c='%23845EC2';       // brahma muhurta - violet
  else if(h>=6&&h<8)c='%23ffd700';  // dawn - gold
  else if(h>=8&&h<11)c='%2300d4aa'; // morning - teal
  else if(h>=11&&h<14)c='%230f0';   // midday - phosphor
  else if(h>=14&&h<17)c='%2339ff14';// afternoon - neon
  else if(h>=17&&h<19)c='%23ff6600';// sunset - orange
  else if(h>=19&&h<22)c='%23ff3366';// evening - coral
  else c='%2300ffff';               // night - cyan
  document.getElementById('favicon').href='data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27'+c+'%27 text-anchor=%27middle%27 font-weight=%27bold%27>Î»</text></svg>';
})();
</script>
  <link rel="stylesheet" href="memo.css">
</head>
<body>
<span class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark">[theme]</span>
<h1>Memo 0011: Library Directory System</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>This Memo specifies the Library Directory System for the Library of Cyberspace: a searchable catalog of research papers with natural language queries, fuzzy matching, and beautiful output. Finding knowledge should be delightful.</p>
</section>
<section>
<h2>E Pluribus Unum</h2>
<pre class="diagram">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“š Cyberspace Library Directory                               â•‘
â•‘  Finding knowledge should be joyful                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</pre>
</section>
<section>
<h2>Motivation</h2>
<p>The Library of Cyberspace contains 421+ research papers spanning 50 years of computing history. Without a catalog:</p>
<ul>
<li>Discoverability: How to find Lamport's clock paper?</li>
<li>Connections: What relates to Simple Public Key Infrastructure (SPKI)?</li>
<li>Context: When was this written? By whom?</li>
</ul>
<p>The Directory System provides:</p>
<ul>
<li>Natural language search - "papers by Lampson about protection"</li>
<li>Multi-index access - By author, topic, year, collection</li>
<li>Fuzzy matching - "Lamp" finds Lampson and Lamport</li>
<li>Beautiful output - Unicode, emoji, formatted results</li>
<li>S-expression export - Machine-readable catalogs</li>
</ul>
</section>
<section>
<h2>Data Model</h2>
<h3>Document Record</h3>
<pre class="language-scheme">
(define-record-type &lt;document&gt;
  (make-document title authors year topics file-path
                 collection source-url description)
  document?
  (title document-title)
  (authors document-authors)      ; List of strings
  (year document-year)            ; Integer or #f
  (topics document-topics)        ; List of strings
  (file-path document-file-path)
  (collection document-collection)
  (source-url document-source-url)
  (description document-description))
</pre>
<h3>Collection Record</h3>
<pre class="language-scheme">
(define-record-type &lt;collection&gt;
  (make-collection name path documents description)
  collection?
  (name collection-name)
  (path collection-path)
  (documents collection-documents)  ; List of documents
  (description collection-description))
</pre>
<h3>Library Record</h3>
<pre class="language-scheme">
(define-record-type &lt;library&gt;
  (make-library collections documents
                author-index topic-index year-index collection-index)
  library?
  (collections library-collections)
  (documents library-documents)
  (author-index library-author-index)     ; Hash table
  (topic-index library-topic-index)       ; Hash table
  (year-index library-year-index)         ; Hash table
  (collection-index library-collection-index))
</pre>
</section>
<section>
<h2>Index System</h2>
<p>Four hash table indexes for O(1) lookup:</p>
<pre class="diagram">
author-index:     "Lamport" â†’ [doc1, doc2, doc5, ...]
topic-index:      "cryptography" â†’ [doc3, doc7, doc12, ...]
year-index:       1978 â†’ [doc1, doc4, ...]
collection-index: "lampson" â†’ &lt;collection&gt;
</pre>
<h3>Building Indexes</h3>
<pre class="language-scheme">
(define (build-author-index documents)
  (let ((index (make-hash-table equal?)))
    (for-each
      (lambda (doc)
        (for-each
          (lambda (author)
            (hash-table-update!/default
              index
              (normalize-author author)
              (lambda (docs) (cons doc docs))
              '()))
          (document-authors doc)))
      documents)
    index))
</pre>
</section>
<section>
<h2>Query Interface</h2>
<h3>Natural Language Parsing</h3>
<pre class="language-scheme">
(parse-query "papers by Lampson about protection")
;; =&gt; (query (author "Lampson") (topic "protection"))

(parse-query "from 1978")
;; =&gt; (query (year 1978))

(parse-query "SPKI certificates")
;; =&gt; (query (topic "SPKI") (topic "certificates"))
</pre>
<p>Recognized Patterns: - by &lt;name&gt; â†’ author search - about &lt;topic&gt; â†’ topic search - from &lt;year&gt; â†’ year search - in &lt;collection&gt; â†’ collection filter - Bare words â†’ topic search</p>
<h3>Fuzzy Matching</h3>
<pre class="language-scheme">
(fuzzy-match "Lamp" author-list)
;; =&gt; ("Lampson" "Lamport")

(fuzzy-match "crypto" topic-list)
;; =&gt; ("cryptography" "cryptographic" "encryption")
</pre>
<p>Matching strategies:</p>
<ul>
<li>Exact match (highest priority)</li>
<li>Case-insensitive match</li>
<li>Prefix match</li>
<li>Substring match</li>
</ul>
<h3>Query Functions</h3>
<pre class="language-scheme">
(find-by-author library "Lampson")
(find-by-topic library "SPKI")
(find-by-year library 1978)
(find-by-collection library "lampson")
(find-related library document)
</pre>
</section>
<section>
<h2>REPL Interface</h2>
<h3>Interactive Session</h3>
<pre class="diagram">
$ csi -s directory-repl.scm

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“š Cyberspace Library Directory                               â•‘
â•‘  "E Pluribus Unum" - Finding knowledge should be joyful        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Loaded 312 documents from 18 collections
Type 'help' for search tips, 'quit' to exit

ğŸ“– &gt; papers by Rivest

ğŸ“š Found 3 documents:

 [1] SDSI: A Simple Distributed Security Infrastructure
     ğŸ‘¤ R. Rivest, B. Lampson
     ğŸ“… 1996  ğŸ“ lampson

 [2] SPKI Certificate Theory
     ğŸ‘¤ C. Ellison, B. Frantz, B. Lampson, R. Rivest, ...
     ğŸ“… 1999  ğŸ“ lampson

ğŸ“– &gt; about SPKI

ğŸ“š Found 8 documents:
...

ğŸ“– &gt; stats

Library Statistics:
  ğŸ“š Documents: 312
  ğŸ“ Collections: 18
  ğŸ‘¤ Authors: 245
  ğŸ·ï¸ Topics: 89
  ğŸ“… Years: 1971-2024

ğŸ“– &gt; quit
Happy exploring! ğŸ“šâœ¨
</pre>
<h3>Commands</h3>
<table>
<tr><th>Command </th><th>Description </th></tr>
<tr><td>help </td><td>Show search tips </td></tr>
<tr><td>stats </td><td>Library statistics </td></tr>
<tr><td>collections </td><td>List all collections </td></tr>
<tr><td>authors </td><td>Show author index </td></tr>
<tr><td>topics </td><td>Show topic index </td></tr>
<tr><td>years </td><td>Show year distribution </td></tr>
<tr><td>quit </td><td>Exit REPL </td></tr>
</table>
</section>
<section>
<h2>INDEX.md Parser</h2>
<p>Each collection contains an INDEX.md with paper listings:</p>
<pre class="language-markdown">
# Lampson Collection

Butler Lampson's papers on protection, capability systems, and distributed computing.

## Papers

1. Protection (1971)
   - Author: Butler Lampson
   - Topics: capability, protection, access control
   - Source: ACM Operating Systems Review

2. Hints for Computer System Design (1983)
   - Author: Butler Lampson
   - Topics: systems design, engineering
   - Source: ACM Operating Systems Review
</pre>
<h3>Parser Output</h3>
<pre class="language-scheme">
(parse-index-file "lampson/INDEX.md")
;; =&gt;
(collection
  (name "lampson")
  (description "Butler Lampson's papers...")
  (documents
    ((title "Protection")
     (authors "Butler Lampson")
     (year 1971)
     (topics "capability" "protection" "access control"))
    ...))
</pre>
</section>
<section>
<h2>Export Formats</h2>
<h3>S-expression Export</h3>
<pre class="language-scheme">
(export-to-sexp library "catalog.sexp")
</pre>
<p>Output:</p>
<pre class="language-scheme">
(library
  (metadata
    (document-count 312)
    (collection-count 18)
    (generated "2026-01-06"))
  (collections
    (collection
      (name "lampson")
      (documents
        (document
          (title "Protection")
          (authors ("Butler Lampson"))
          (year 1971)
          (topics ("capability" "protection")))
        ...))
    ...))
</pre>
<h3>HTML Export</h3>
<pre class="language-scheme">
(export-to-html library "catalog.html")
</pre>
<p>Generates browsable web catalog with: - Alphabetical author index - Topic tag cloud - Year timeline - Search functionality</p>
<h3>Markdown Export</h3>
<pre class="language-scheme">
(export-to-markdown library "catalog.md")
</pre>
<p>Documentation-friendly format for README files.</p>
</section>
<section>
<h2>Design Philosophy</h2>
<h3>Super Nice and Helpful</h3>
<ul>
<li>Natural language understanding</li>
<li>Fuzzy matching catches typos</li>
<li>Suggestions for empty results</li>
<li>Encouraging prompts</li>
</ul>
<p>Research discovery should lower barriers, not raise them; the interface should anticipate what users need rather than demanding precise query syntax.</p>
<h3>Beautiful Output</h3>
<ul>
<li>Unicode box drawing (â•”â•â•â•â•—)</li>
<li>Emoji visual markers (ğŸ“– ğŸ“š ğŸ‘¤ ğŸ“…)</li>
<li>Consistent formatting</li>
<li>Progressive disclosure</li>
</ul>
<h3>Hone In On What You Need</h3>
<ul>
<li>Multi-strategy search</li>
<li>Progressive filtering</li>
<li>Cross-references</li>
<li>Related paper discovery</li>
</ul>
</section>
<section>
<h2>Security Considerations</h2>
<h3>No Execution</h3>
<p>The directory system is read-only: - Parses INDEX.md files (trusted) - No code execution - No network access - No file modification</p>
<h3>Path Traversal</h3>
<p>File paths validated: - Must be within library root - No .. components - Normalized before use</p>
</section>
<section>
<h2>Implementation Notes</h2>
<h3>Dependencies</h3>
<ul>
<li>srfi-1</li>
<li>List utilities - srfi-13</li>
<li>String utilities - srfi-69</li>
<li>Hash tables - chicken file</li>
<li>Directory scanning</li>
</ul>
<h3>Performance</h3>
<ul>
<li>Index building: O(N) documents</li>
<li>Query: O(1) hash lookup + O(M) result filtering</li>
<li>Fuzzy match: O(K) candidates</li>
</ul>
<h3>Extensibility</h3>
<p>Future enhancements: - Full-text search (PostScript/Text extraction) - Citation graph visualization - BibTeX export - Web API server - Semantic search with embeddings</p>
</section>
<section>
<h2>References</h2>
<ul>
<li>Dublin Core Metadata Initiative</li>
<li>Library of Congress Subject Headings</li>
<li>BibTeX format specification</li>
<li>Unicode Standard for box drawing</li>
</ul>
</section>
<section>
<h2>Changelog</h2>
<ul>
<li>2026-01-06</li>
<li>Initial specification</li>
</ul>
</section>
<script>
function toggleTheme() {
  const html = document.documentElement;
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
}
(function() {
  // Query param override (for REPL: ?theme=dark or ?theme=light)
  const params = new URLSearchParams(window.location.search);
  const param = params.get('theme');
  if (param === 'dark' || param === 'light') {
    document.documentElement.setAttribute('data-theme', param);
    localStorage.setItem('theme', param);
    return;
  }
  // localStorage preference
  const saved = localStorage.getItem('theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
  } else if (window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', 'light');
  }
})();
</script>
</body>
</html>
