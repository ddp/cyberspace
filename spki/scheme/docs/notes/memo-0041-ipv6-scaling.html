<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <title>Memo 0041: Scaling Architecture for IPv6</title>
  <link rel="icon" id="favicon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27%230f0%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>">
  <script>
(function(){
  var h=new Date().getHours(),c;
  if(h>=4&&h<6)c='%23845EC2';       // brahma muhurta - violet
  else if(h>=6&&h<8)c='%23ffd700';  // dawn - gold
  else if(h>=8&&h<11)c='%2300d4aa'; // morning - teal
  else if(h>=11&&h<14)c='%230f0';   // midday - phosphor
  else if(h>=14&&h<17)c='%2339ff14';// afternoon - neon
  else if(h>=17&&h<19)c='%23ff6600';// sunset - orange
  else if(h>=19&&h<22)c='%23ff3366';// evening - coral
  else c='%2300ffff';               // night - cyan
  document.getElementById('favicon').href='data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27'+c+'%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>';
})();
</script>
  <link rel="stylesheet" href="memo.css">
</head>
<body>
<span class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark">[theme]</span>
<h1>Memo 0041: Scaling Architecture for IPv6</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>This Memo defines the architectural changes required to scale Cyberspace from a git-backed prototype to a native distributed system capable of operating at IPv6 scale (billions of realms, exabytes of content). Git becomes an export format; the vault becomes the source of truth.</p>
</section>
<section>
<h2>Terminology</h2>
<p>Realm: A node's place in cyberspace - its vault, principal, capabilities, and objects. Each realm is sovereign: local-first, controlled by its operator. Realms federate by choice, sharing objects according to trust relationships.</p>
<p>Vault: The local content-addressed object store (.vault/). The vault IS the realm's storage - all objects, catalogs, audit trails, and configuration live here.</p>
<p>Principal: A node's cryptographic identity (Ed25519 public key). The principal identifies the realm to peers and signs its objects.</p>
<p>At IPv6 scale, cyberspace consists of billions of realms, each occupying its own address space, each sovereign, each choosing what to share and with whom.</p>
</section>
<section>
<h2>Motivation</h2>
<p>Git served as an excellent prototype substrate: - Content-addressed objects (proof of concept) - Merkle tree integrity (validates the model) - Ubiquitous tooling (bootstrap adoption)</p>
<p>Git cannot scale to IPv6: - Full history on every clone - Repository as replication unit (too coarse) - SHA-1 (cryptographically broken) - No native federation or discovery - Merge semantics are wrong model</p>
<p>The internet has 2^128 addresses. Cyberspace should use them.</p>
</section>
<section>
<h2>Design Principles</h2>
<pre>
1. Objects, not repositories
2. Pull, not push
3. Lazy, not eager
4. Local-first, federate-second
5. Trust math, not infrastructure
</pre>
</section>
<section>
<h2>Content-Addressed Object Store</h2>
<h3>Storage Model</h3>
<pre>
.vault/
  objects/
    sha512-a1b2c3.../    # First 8 chars as directory
      a1b2c3d4e5f6...    # Full hash as filename (S-expression)
  catalog/
    manifest.sexp        # Vault catalog object
    bloom.sexp           # Bloom filter object
    indices/             # Secondary index objects
      by-signer.sexp
      by-type.sexp
  chunks/
    sha512-xxxx/         # Chunked large objects
  audit/
    head.sexp            # Current audit chain head
    chain/               # Audit entries (hash-addressed)
</pre>
<h3>Object Format</h3>
<pre class="language-scheme">
(cyberspace-object
  (version 1)
  (type blob|tree|manifest|cert|audit)
  (size 1048576)
  (compression zstd|none)
  (hash "sha512:a1b2c3...")
  (chunks ("sha512:..." "sha512:..." ...))  ; If chunked
  (signature "ed25519:...")
  (timestamp 1736300000))
</pre>
<h3>Chunking Strategy</h3>
<p>Large objects split at content-defined boundaries (Rabin fingerprinting):</p>
<pre>
Target chunk: 64 KB (Starlink-optimized)
Min chunk:    16 KB
Max chunk:   256 KB

Benefits:
  - Deduplication across objects
  - Partial sync (fetch only missing chunks)
  - Resumable transfers
  - Efficient diff
</pre>
<h3>Hash Function</h3>
<pre>
SHA-512 everywhere.

Not SHA-256: We have the bits, use them.
Not SHA-1: Broken.
Not BLAKE3: Less analyzed, marginal speed gain irrelevant at network latency.

SHA-512 is:
  - FIPS certified (GovCloud path)
  - 50 years of cryptanalysis
  - Hardware accelerated
  - Already in use (audit trail, signatures)
</pre>
</section>
<section>
<h2>Catalog and Query</h2>
<p>The soup IS the catalog. No SQL. Objects are S-expressions, queries are pattern matching.</p>
<h3>The Soup Query Model</h3>
<pre class="language-scheme">
;; Find objects by pattern
(soup-query
  '(cyberspace-object
    (type blob)
    (signer "ed25519:alice...")
    ?rest))                        ; Match any object signed by Alice

;; Find by hash (direct lookup)
(soup-fetch "sha512:a1b2c3...")    ; O(1) content-addressed

;; Find by type
(soup-query '(cyberspace-object (type cert) ?rest))

;; Find by time range
(soup-query-range
  type: 'audit
  from: 1736000000
  to:   1736100000)

;; Cursor-based iteration for large result sets
(soup-cursor
  '(cyberspace-object (type ?) ?rest)
  batch: 100)
</pre>
<h3>Object Catalog</h3>
<p>The catalog is itself an object in the soup - a manifest of what the vault contains:</p>
<pre class="language-scheme">
(vault-catalog
  (version 1)
  (realm "ed25519:principal...")
  (object-count 150000)
  (types
    (blob 100000)
    (tree 30000)
    (cert 15000)
    (audit 5000))
  (bloom-filter #${...})           ; Fast existence check
  (updated 1736400000))
</pre>
<h3>Bloom Filter</h3>
<p>Fast existence check before network round-trip:</p>
<pre class="language-scheme">
(define (soup-maybe-contains? hash)
  "Check bloom filter - false means definitely not, true means maybe"
  (let ((catalog (soup-fetch-catalog)))
    (bloom-test (catalog-bloom catalog) hash)))

;; Bloom parameters
(bloom-filter
  (capacity 10000000)              ; 10M objects
  (false-positive 0.001)           ; 0.1% FP rate
  (bits #${...}))
</pre>
<h3>Audit Trail</h3>
<p>The audit trail is a hash-chain of objects in the soup:</p>
<pre class="language-scheme">
(audit-entry
  (sequence 12345)
  (timestamp 1736300000)
  (lamport 67890)
  (actor "ed25519:subject...")
  (action (read "sha512:object..."))
  (previous "sha512:prev-entry...")  ; Chain link
  (signature "ed25519:auditor..."))

;; Query audit by walking the chain
(define (audit-query actor from-seq)
  "Walk audit chain, filter by actor"
  (soup-chain-walk
    start: (audit-head)
    filter: (lambda (entry)
              (equal? (entry-actor entry) actor))
    from: from-seq))
</pre>
<h3>Secondary Indices</h3>
<p>For queries that can't use content-addressing, the soup maintains lightweight indices as objects:</p>
<pre class="language-scheme">
(soup-index
  (name "by-signer")
  (key-type principal)
  (entries
    (("ed25519:alice..." ("sha512:obj1" "sha512:obj2" ...))
     ("ed25519:bob..." ("sha512:obj3" "sha512:obj4" ...)))))

(soup-index
  (name "by-type")
  (key-type symbol)
  (entries
    ((blob ("sha512:..." "sha512:..." ...))
     (cert ("sha512:..." "sha512:..." ...))
     (audit ("sha512:..." "sha512:..." ...)))))
</pre>
<p>Indices are rebuilt on demand, not authoritative - the soup is truth.</p>
</section>
<section>
<h2>Discovery and Routing</h2>
<h3>Realm Identity</h3>
<p>Each realm has a principal (Ed25519 public key). This IS its identity:</p>
<pre class="language-scheme">
(realm-identity
  (principal "ed25519:a1b2c3...")
  (addresses                          ; Where to reach this realm
    (ipv6 "2001:db8::1" port: 7777)
    (ipv4 "192.0.2.1" port: 7777)     ; Legacy
    (onion "xxxx.onion" port: 7777))  ; Tor
  (role witness)
  (capabilities (storage-gb 1000) (bandwidth-mbps 100))
  (signature "ed25519:..."))
</pre>
<h3>Peer Discovery</h3>
<p>Bootstrap:</p>
<pre class="language-scheme">
(bootstrap-peers
  ("ed25519:official1..." "bootstrap.cyberspace.org")
  ("ed25519:official2..." "bootstrap2.cyberspace.org"))
</pre>
<p>Gossip Protocol:</p>
<pre>
1. Realm joins, contacts bootstrap peer
2. Receives partial peer list (random subset)
3. Contacts those peers, exchanges lists
4. Epidemic spread: O(log n) rounds to reach all realms
5. Periodic refresh (every 5 min on Starlink-friendly schedule)
</pre>
<p>Distributed Hash Table (Future):</p>
<pre>
Kademlia-style routing:
  - XOR distance metric on principal hashes
  - O(log n) lookups
  - Realms responsible for nearby hash ranges
  - Natural load balancing
</pre>
<h3>Content Discovery</h3>
<pre class="language-scheme">
;; "Who has this hash?"
(content-locate "sha512:a1b2c3...")

;; Returns list of peers claiming to have it:
(("ed25519:peer1..." (latency-ms 50) (role full))
 ("ed25519:peer2..." (latency-ms 200) (role witness))
 ("ed25519:peer3..." (latency-ms 600) (role archiver)))

;; Fetch from best candidate
(content-fetch "sha512:a1b2c3..." from: "ed25519:peer1...")
</pre>
</section>
<section>
<h2>Transport Protocol</h2>
<h3>End-to-End Encryption</h3>
<p>All network traffic is encrypted. The OS and network are not trusted.</p>
<pre class="language-scheme">
(cyberspace-message
  (version 1)
  (from "ed25519:sender...")
  (to "ed25519:recipient...")        ; Or broadcast key
  (ephemeral "x25519:...")           ; One-time key (PFS)
  (nonce #${24-bytes})               ; Random nonce
  (ciphertext #${...})               ; NaCl box: X25519 + XSalsa20-Poly1305
  (signature "ed25519:..."))         ; Sign the ciphertext
</pre>
<p>Encryption scheme: NaCl crypto_box (libsodium) - Key agreement: X25519 (Curve25519 ECDH) - Cipher: XSalsa20-Poly1305 - Perfect forward secrecy: ephemeral keys per message</p>
<p>Decrypted payload:</p>
<pre class="language-scheme">
(plaintext-payload
  (type request|response|announce|gossip)
  (nonce 12345678)                   ; Replay protection
  (timestamp 1736300000)
  (body ...))
</pre>
<p>Broadcast messages use a shared group key or are signed-only (announcements of public objects).</p>
<h3>Wire Format (Encrypted)</h3>
<pre class="language-scheme">
;; Sender encrypts
(define (seal-message payload recipient-pubkey sender-keypair)
  (let ((ephemeral (x25519-keypair))
         (shared (x25519-shared (ephemeral-secret ephemeral) recipient-pubkey))
         (nonce (random-bytes 24))
         (ciphertext (crypto-box payload nonce shared)))
    `(cyberspace-message
      (version 1)
      (from ,(keypair-public sender-keypair))
      (to ,recipient-pubkey)
      (ephemeral ,(ephemeral-public ephemeral))
      (nonce ,nonce)
      (ciphertext ,ciphertext)
      (signature ,(sign-message ciphertext sender-keypair)))))

;; Recipient decrypts
(define (open-message msg recipient-keypair)
  (let ((shared (x25519-shared (keypair-secret recipient-keypair)
                                (message-ephemeral msg)))
         (plaintext (crypto-box-open (message-ciphertext msg)
                                     (message-nonce msg)
                                     shared)))
    (and (verify-signature msg (message-from msg))
         plaintext)))
</pre>
<h3>Request Types</h3>
<pre class="language-scheme">
;; Existence check
(have? ("sha512:..." "sha512:..." ...))
;; Response: (have ("sha512:..." "sha512:...") missing ("sha512:..."))

;; Fetch object
(fetch "sha512:...")
;; Response: (object ...)

;; Fetch chunk range
(fetch-chunks "sha512:..." start: 5 count: 10)
;; Response: (chunks ...)

;; Peer list exchange
(peers? limit: 50)
;; Response: (peers ...)

;; Announce new content
(announce ("sha512:..." "sha512:..."))
;; Response: (ack)
</pre>
<h3>Transport Bindings</h3>
<pre>
Native:     UDP/IPv6, port 7777 (primary)
Fallback:   TCP/IPv6, port 7777 (firewalls)
Legacy:     TCP/IPv4, port 7777 (transition)
Stealth:    Tor onion service (censorship resistance)
Offline:    USB drive, file copy (sneakernet)
Export:     Git bundle (GitHub compatibility)
</pre>
<h3>Starlink Optimization</h3>
<pre class="language-scheme">
(transport-config
  (mode satellite)
  (batch-window-ms 500)        ; Aggregate small messages
  (chunk-size-kb 64)           ; Match MTU
  (retry-strategy exponential)
  (max-in-flight 10)           ; Parallelism
  (keepalive-sec 300))         ; 5 min, not 30 sec
</pre>
</section>
<section>
<h2>Synchronization Protocol</h2>
<h3>Lazy Sync (Default)</h3>
<pre>
Node A                              Node B
   |                                   |
   |----(have? [h1, h2, h3])----------&gt;|
   |&lt;---(have [h1, h3] missing [h2])---|
   |----(fetch h2)--------------------&gt;|
   |&lt;---(object h2 ...)----------------|
   |                                   |

No coordination. No locks. No leader.
</pre>
<h3>Crdt-Style Convergence</h3>
<p>Objects are immutable and content-addressed. No conflicts possible at object level.</p>
<p>Manifests (collections of objects) use: - Lamport timestamps for ordering - Last-writer-wins with principal tiebreaker - Or: union (add-only sets)</p>
<pre class="language-scheme">
(manifest
  (name "library")
  (version (lamport 42) (principal "ed25519:..."))
  (entries
    ("memo-001" "sha512:...")
    ("memo-002" "sha512:...")
    ...))
</pre>
<h3>Merkle Sync</h3>
<p>Efficient diff for large manifests:</p>
<pre>
         root
        /    \
      h1      h2
     /  \    /  \
    a    b  c    d

Exchange root hash.
If different, recurse on children.
O(log n) round trips to find diff.
</pre>
</section>
<section>
<h2>Federation at Scale</h2>
<h3>Cluster Topology</h3>
<div class="diagram-container">
<svg class="diagram" viewBox="0 0 710 440" width="710" height="440" xmlns="http://www.w3.org/2000/svg">
<style>
  .diagram line { stroke: currentColor; stroke-width: 1.5; stroke-linecap: square; }
  .diagram rect { fill: currentColor; }
  .diagram text { font-family: monospace; font-size: 14px; fill: currentColor; text-anchor: middle; dominant-baseline: central; }
</style>
<line x1="205" y1="10" x2="210" y2="10"/>
<line x1="205" y1="10" x2="205" y2="20"/>
<line x1="210" y1="10" x2="220" y2="10"/>
<line x1="220" y1="10" x2="230" y2="10"/>
<line x1="230" y1="10" x2="240" y2="10"/>
<line x1="240" y1="10" x2="250" y2="10"/>
<line x1="250" y1="10" x2="260" y2="10"/>
<line x1="260" y1="10" x2="270" y2="10"/>
<line x1="270" y1="10" x2="280" y2="10"/>
<line x1="280" y1="10" x2="290" y2="10"/>
<line x1="290" y1="10" x2="300" y2="10"/>
<line x1="300" y1="10" x2="310" y2="10"/>
<line x1="310" y1="10" x2="320" y2="10"/>
<line x1="320" y1="10" x2="330" y2="10"/>
<line x1="330" y1="10" x2="340" y2="10"/>
<line x1="340" y1="10" x2="350" y2="10"/>
<line x1="350" y1="10" x2="360" y2="10"/>
<line x1="360" y1="10" x2="370" y2="10"/>
<line x1="370" y1="10" x2="380" y2="10"/>
<line x1="380" y1="10" x2="390" y2="10"/>
<line x1="390" y1="10" x2="400" y2="10"/>
<line x1="400" y1="10" x2="410" y2="10"/>
<line x1="410" y1="10" x2="420" y2="10"/>
<line x1="420" y1="10" x2="430" y2="10"/>
<line x1="430" y1="10" x2="440" y2="10"/>
<line x1="440" y1="10" x2="450" y2="10"/>
<line x1="450" y1="10" x2="460" y2="10"/>
<line x1="460" y1="10" x2="470" y2="10"/>
<line x1="470" y1="10" x2="480" y2="10"/>
<line x1="480" y1="10" x2="490" y2="10"/>
<line x1="490" y1="10" x2="500" y2="10"/>
<line x1="500" y1="10" x2="510" y2="10"/>
<line x1="510" y1="10" x2="520" y2="10"/>
<line x1="520" y1="10" x2="530" y2="10"/>
<line x1="530" y1="10" x2="540" y2="10"/>
<line x1="540" y1="10" x2="550" y2="10"/>
<line x1="550" y1="10" x2="560" y2="10"/>
<line x1="560" y1="10" x2="570" y2="10"/>
<line x1="570" y1="10" x2="580" y2="10"/>
<line x1="580" y1="10" x2="585" y2="10"/>
<line x1="585" y1="10" x2="585" y2="20"/>
<line x1="205" y1="20" x2="205" y2="40"/>
<text x="305" y="30">C</text>
<text x="315" y="30">O</text>
<text x="325" y="30">O</text>
<text x="335" y="30">R</text>
<text x="345" y="30">D</text>
<text x="355" y="30">I</text>
<text x="365" y="30">N</text>
<text x="375" y="30">A</text>
<text x="385" y="30">T</text>
<text x="395" y="30">O</text>
<text x="405" y="30">R</text>
<text x="425" y="30">C</text>
<text x="435" y="30">L</text>
<text x="445" y="30">U</text>
<text x="455" y="30">S</text>
<text x="465" y="30">T</text>
<text x="475" y="30">E</text>
<text x="485" y="30">R</text>
<line x1="585" y1="20" x2="585" y2="40"/>
<line x1="205" y1="40" x2="205" y2="60"/>
<text x="235" y="50">(</text>
<text x="245" y="50">3</text>
<text x="255" y="50">-</text>
<text x="265" y="50">7</text>
<text x="285" y="50">n</text>
<text x="295" y="50">o</text>
<text x="305" y="50">d</text>
<text x="315" y="50">e</text>
<text x="325" y="50">s</text>
<text x="335" y="50">,</text>
<text x="355" y="50">B</text>
<text x="365" y="50">y</text>
<text x="375" y="50">z</text>
<text x="385" y="50">a</text>
<text x="395" y="50">n</text>
<text x="405" y="50">t</text>
<text x="415" y="50">i</text>
<text x="425" y="50">n</text>
<text x="435" y="50">e</text>
<text x="455" y="50">c</text>
<text x="465" y="50">o</text>
<text x="475" y="50">n</text>
<text x="485" y="50">s</text>
<text x="495" y="50">e</text>
<text x="505" y="50">n</text>
<text x="515" y="50">s</text>
<text x="525" y="50">u</text>
<text x="535" y="50">s</text>
<text x="545" y="50">)</text>
<line x1="585" y1="40" x2="585" y2="60"/>
<line x1="205" y1="70" x2="210" y2="70"/>
<line x1="205" y1="60" x2="205" y2="70"/>
<line x1="210" y1="70" x2="220" y2="70"/>
<line x1="220" y1="70" x2="230" y2="70"/>
<line x1="230" y1="70" x2="240" y2="70"/>
<line x1="240" y1="70" x2="250" y2="70"/>
<line x1="250" y1="70" x2="260" y2="70"/>
<line x1="260" y1="70" x2="270" y2="70"/>
<line x1="270" y1="70" x2="280" y2="70"/>
<line x1="280" y1="70" x2="290" y2="70"/>
<line x1="290" y1="70" x2="300" y2="70"/>
<line x1="300" y1="70" x2="310" y2="70"/>
<line x1="310" y1="70" x2="320" y2="70"/>
<line x1="320" y1="70" x2="330" y2="70"/>
<line x1="330" y1="70" x2="340" y2="70"/>
<line x1="340" y1="70" x2="350" y2="70"/>
<line x1="350" y1="70" x2="360" y2="70"/>
<line x1="360" y1="70" x2="370" y2="70"/>
<line x1="370" y1="70" x2="380" y2="70"/>
<line x1="375" y1="70" x2="375" y2="80"/>
<line x1="380" y1="70" x2="390" y2="70"/>
<line x1="390" y1="70" x2="400" y2="70"/>
<line x1="400" y1="70" x2="410" y2="70"/>
<line x1="410" y1="70" x2="420" y2="70"/>
<line x1="420" y1="70" x2="430" y2="70"/>
<line x1="430" y1="70" x2="440" y2="70"/>
<line x1="440" y1="70" x2="450" y2="70"/>
<line x1="450" y1="70" x2="460" y2="70"/>
<line x1="460" y1="70" x2="470" y2="70"/>
<line x1="470" y1="70" x2="480" y2="70"/>
<line x1="480" y1="70" x2="490" y2="70"/>
<line x1="490" y1="70" x2="500" y2="70"/>
<line x1="500" y1="70" x2="510" y2="70"/>
<line x1="510" y1="70" x2="520" y2="70"/>
<line x1="520" y1="70" x2="530" y2="70"/>
<line x1="530" y1="70" x2="540" y2="70"/>
<line x1="540" y1="70" x2="550" y2="70"/>
<line x1="550" y1="70" x2="560" y2="70"/>
<line x1="560" y1="70" x2="570" y2="70"/>
<line x1="570" y1="70" x2="580" y2="70"/>
<line x1="580" y1="70" x2="585" y2="70"/>
<line x1="585" y1="60" x2="585" y2="70"/>
<line x1="375" y1="80" x2="375" y2="100"/>
<line x1="105" y1="110" x2="110" y2="110"/>
<line x1="105" y1="110" x2="105" y2="120"/>
<line x1="110" y1="110" x2="120" y2="110"/>
<line x1="120" y1="110" x2="130" y2="110"/>
<line x1="130" y1="110" x2="140" y2="110"/>
<line x1="140" y1="110" x2="150" y2="110"/>
<line x1="150" y1="110" x2="160" y2="110"/>
<line x1="160" y1="110" x2="170" y2="110"/>
<line x1="170" y1="110" x2="180" y2="110"/>
<line x1="180" y1="110" x2="190" y2="110"/>
<line x1="190" y1="110" x2="200" y2="110"/>
<line x1="200" y1="110" x2="210" y2="110"/>
<line x1="210" y1="110" x2="220" y2="110"/>
<line x1="220" y1="110" x2="230" y2="110"/>
<line x1="230" y1="110" x2="240" y2="110"/>
<line x1="240" y1="110" x2="250" y2="110"/>
<line x1="250" y1="110" x2="260" y2="110"/>
<line x1="260" y1="110" x2="270" y2="110"/>
<line x1="270" y1="110" x2="280" y2="110"/>
<line x1="280" y1="110" x2="290" y2="110"/>
<line x1="290" y1="110" x2="300" y2="110"/>
<line x1="300" y1="110" x2="310" y2="110"/>
<line x1="310" y1="110" x2="320" y2="110"/>
<line x1="320" y1="110" x2="330" y2="110"/>
<line x1="330" y1="110" x2="340" y2="110"/>
<line x1="340" y1="110" x2="350" y2="110"/>
<line x1="350" y1="110" x2="360" y2="110"/>
<line x1="360" y1="110" x2="370" y2="110"/>
<line x1="370" y1="110" x2="380" y2="110"/>
<line x1="375" y1="100" x2="375" y2="120"/>
<line x1="380" y1="110" x2="390" y2="110"/>
<line x1="390" y1="110" x2="400" y2="110"/>
<line x1="400" y1="110" x2="410" y2="110"/>
<line x1="410" y1="110" x2="420" y2="110"/>
<line x1="420" y1="110" x2="430" y2="110"/>
<line x1="430" y1="110" x2="440" y2="110"/>
<line x1="440" y1="110" x2="450" y2="110"/>
<line x1="450" y1="110" x2="460" y2="110"/>
<line x1="460" y1="110" x2="470" y2="110"/>
<line x1="470" y1="110" x2="480" y2="110"/>
<line x1="480" y1="110" x2="490" y2="110"/>
<line x1="490" y1="110" x2="500" y2="110"/>
<line x1="500" y1="110" x2="510" y2="110"/>
<line x1="510" y1="110" x2="520" y2="110"/>
<line x1="520" y1="110" x2="530" y2="110"/>
<line x1="530" y1="110" x2="540" y2="110"/>
<line x1="540" y1="110" x2="550" y2="110"/>
<line x1="550" y1="110" x2="560" y2="110"/>
<line x1="560" y1="110" x2="570" y2="110"/>
<line x1="570" y1="110" x2="580" y2="110"/>
<line x1="580" y1="110" x2="590" y2="110"/>
<line x1="590" y1="110" x2="600" y2="110"/>
<line x1="600" y1="110" x2="610" y2="110"/>
<line x1="610" y1="110" x2="620" y2="110"/>
<line x1="620" y1="110" x2="630" y2="110"/>
<line x1="630" y1="110" x2="640" y2="110"/>
<line x1="640" y1="110" x2="645" y2="110"/>
<line x1="645" y1="110" x2="645" y2="120"/>
<line x1="105" y1="120" x2="105" y2="140"/>
<line x1="375" y1="120" x2="375" y2="140"/>
<line x1="645" y1="120" x2="645" y2="140"/>
<line x1="45" y1="150" x2="50" y2="150"/>
<line x1="45" y1="150" x2="45" y2="160"/>
<line x1="50" y1="150" x2="60" y2="150"/>
<line x1="60" y1="150" x2="70" y2="150"/>
<line x1="70" y1="150" x2="80" y2="150"/>
<line x1="80" y1="150" x2="90" y2="150"/>
<line x1="90" y1="150" x2="100" y2="150"/>
<text x="105" y="150">↓</text>
<line x1="110" y1="150" x2="120" y2="150"/>
<line x1="120" y1="150" x2="130" y2="150"/>
<line x1="130" y1="150" x2="140" y2="150"/>
<line x1="140" y1="150" x2="150" y2="150"/>
<line x1="150" y1="150" x2="160" y2="150"/>
<line x1="160" y1="150" x2="165" y2="150"/>
<line x1="165" y1="150" x2="165" y2="160"/>
<line x1="305" y1="150" x2="310" y2="150"/>
<line x1="305" y1="150" x2="305" y2="160"/>
<line x1="310" y1="150" x2="320" y2="150"/>
<line x1="320" y1="150" x2="330" y2="150"/>
<line x1="330" y1="150" x2="340" y2="150"/>
<line x1="340" y1="150" x2="350" y2="150"/>
<line x1="350" y1="150" x2="360" y2="150"/>
<line x1="360" y1="150" x2="370" y2="150"/>
<text x="375" y="150">↓</text>
<line x1="380" y1="150" x2="390" y2="150"/>
<line x1="390" y1="150" x2="400" y2="150"/>
<line x1="400" y1="150" x2="410" y2="150"/>
<line x1="410" y1="150" x2="420" y2="150"/>
<line x1="420" y1="150" x2="430" y2="150"/>
<line x1="430" y1="150" x2="435" y2="150"/>
<line x1="435" y1="150" x2="435" y2="160"/>
<line x1="575" y1="150" x2="580" y2="150"/>
<line x1="575" y1="150" x2="575" y2="160"/>
<line x1="580" y1="150" x2="590" y2="150"/>
<line x1="590" y1="150" x2="600" y2="150"/>
<line x1="600" y1="150" x2="610" y2="150"/>
<line x1="610" y1="150" x2="620" y2="150"/>
<line x1="620" y1="150" x2="630" y2="150"/>
<line x1="630" y1="150" x2="640" y2="150"/>
<text x="645" y="150">↓</text>
<line x1="650" y1="150" x2="660" y2="150"/>
<line x1="660" y1="150" x2="670" y2="150"/>
<line x1="670" y1="150" x2="680" y2="150"/>
<line x1="680" y1="150" x2="690" y2="150"/>
<line x1="690" y1="150" x2="700" y2="150"/>
<line x1="700" y1="150" x2="705" y2="150"/>
<line x1="705" y1="150" x2="705" y2="160"/>
<line x1="45" y1="160" x2="45" y2="180"/>
<text x="85" y="170">F</text>
<text x="95" y="170">U</text>
<text x="105" y="170">L</text>
<text x="115" y="170">L</text>
<line x1="165" y1="160" x2="165" y2="180"/>
<line x1="305" y1="160" x2="305" y2="180"/>
<text x="345" y="170">F</text>
<text x="355" y="170">U</text>
<text x="365" y="170">L</text>
<text x="375" y="170">L</text>
<line x1="435" y1="160" x2="435" y2="180"/>
<line x1="575" y1="160" x2="575" y2="180"/>
<text x="625" y="170">F</text>
<text x="635" y="170">U</text>
<text x="645" y="170">L</text>
<text x="655" y="170">L</text>
<line x1="705" y1="160" x2="705" y2="180"/>
<line x1="45" y1="180" x2="45" y2="200"/>
<text x="75" y="190">N</text>
<text x="85" y="190">O</text>
<text x="95" y="190">D</text>
<text x="105" y="190">E</text>
<text x="115" y="190">S</text>
<line x1="165" y1="180" x2="165" y2="200"/>
<line x1="305" y1="180" x2="305" y2="200"/>
<text x="345" y="190">N</text>
<text x="355" y="190">O</text>
<text x="365" y="190">D</text>
<text x="375" y="190">E</text>
<text x="385" y="190">S</text>
<line x1="435" y1="180" x2="435" y2="200"/>
<line x1="575" y1="180" x2="575" y2="200"/>
<text x="615" y="190">N</text>
<text x="625" y="190">O</text>
<text x="635" y="190">D</text>
<text x="645" y="190">E</text>
<text x="655" y="190">S</text>
<line x1="705" y1="180" x2="705" y2="200"/>
<line x1="45" y1="210" x2="50" y2="210"/>
<line x1="45" y1="200" x2="45" y2="210"/>
<line x1="50" y1="210" x2="60" y2="210"/>
<line x1="60" y1="210" x2="70" y2="210"/>
<line x1="70" y1="210" x2="80" y2="210"/>
<line x1="80" y1="210" x2="90" y2="210"/>
<line x1="90" y1="210" x2="100" y2="210"/>
<line x1="100" y1="210" x2="110" y2="210"/>
<line x1="105" y1="210" x2="105" y2="220"/>
<line x1="110" y1="210" x2="120" y2="210"/>
<line x1="120" y1="210" x2="130" y2="210"/>
<line x1="130" y1="210" x2="140" y2="210"/>
<line x1="140" y1="210" x2="150" y2="210"/>
<line x1="150" y1="210" x2="160" y2="210"/>
<line x1="160" y1="210" x2="165" y2="210"/>
<line x1="165" y1="200" x2="165" y2="210"/>
<line x1="305" y1="210" x2="310" y2="210"/>
<line x1="305" y1="200" x2="305" y2="210"/>
<line x1="310" y1="210" x2="320" y2="210"/>
<line x1="320" y1="210" x2="330" y2="210"/>
<line x1="330" y1="210" x2="340" y2="210"/>
<line x1="340" y1="210" x2="350" y2="210"/>
<line x1="350" y1="210" x2="360" y2="210"/>
<line x1="360" y1="210" x2="370" y2="210"/>
<line x1="365" y1="210" x2="365" y2="220"/>
<line x1="370" y1="210" x2="380" y2="210"/>
<line x1="380" y1="210" x2="390" y2="210"/>
<line x1="390" y1="210" x2="400" y2="210"/>
<line x1="400" y1="210" x2="410" y2="210"/>
<line x1="410" y1="210" x2="420" y2="210"/>
<line x1="420" y1="210" x2="430" y2="210"/>
<line x1="430" y1="210" x2="435" y2="210"/>
<line x1="435" y1="200" x2="435" y2="210"/>
<line x1="575" y1="210" x2="580" y2="210"/>
<line x1="575" y1="200" x2="575" y2="210"/>
<line x1="580" y1="210" x2="590" y2="210"/>
<line x1="590" y1="210" x2="600" y2="210"/>
<line x1="600" y1="210" x2="610" y2="210"/>
<line x1="610" y1="210" x2="620" y2="210"/>
<line x1="620" y1="210" x2="630" y2="210"/>
<line x1="630" y1="210" x2="640" y2="210"/>
<line x1="635" y1="210" x2="635" y2="220"/>
<line x1="640" y1="210" x2="650" y2="210"/>
<line x1="650" y1="210" x2="660" y2="210"/>
<line x1="660" y1="210" x2="670" y2="210"/>
<line x1="670" y1="210" x2="680" y2="210"/>
<line x1="680" y1="210" x2="690" y2="210"/>
<line x1="690" y1="210" x2="700" y2="210"/>
<line x1="700" y1="210" x2="705" y2="210"/>
<line x1="705" y1="200" x2="705" y2="210"/>
<line x1="105" y1="220" x2="105" y2="240"/>
<line x1="365" y1="220" x2="365" y2="240"/>
<line x1="635" y1="220" x2="635" y2="240"/>
<line x1="45" y1="250" x2="50" y2="250"/>
<line x1="45" y1="250" x2="45" y2="260"/>
<line x1="50" y1="250" x2="60" y2="250"/>
<line x1="60" y1="250" x2="70" y2="250"/>
<line x1="70" y1="250" x2="80" y2="250"/>
<line x1="80" y1="250" x2="90" y2="250"/>
<line x1="90" y1="250" x2="100" y2="250"/>
<text x="105" y="250">↓</text>
<line x1="110" y1="250" x2="120" y2="250"/>
<line x1="120" y1="250" x2="130" y2="250"/>
<line x1="130" y1="250" x2="140" y2="250"/>
<line x1="140" y1="250" x2="150" y2="250"/>
<line x1="150" y1="250" x2="160" y2="250"/>
<line x1="160" y1="250" x2="165" y2="250"/>
<line x1="165" y1="250" x2="165" y2="260"/>
<line x1="305" y1="250" x2="310" y2="250"/>
<line x1="305" y1="250" x2="305" y2="260"/>
<line x1="310" y1="250" x2="320" y2="250"/>
<line x1="320" y1="250" x2="330" y2="250"/>
<line x1="330" y1="250" x2="340" y2="250"/>
<line x1="340" y1="250" x2="350" y2="250"/>
<line x1="350" y1="250" x2="360" y2="250"/>
<text x="365" y="250">↓</text>
<line x1="370" y1="250" x2="380" y2="250"/>
<line x1="380" y1="250" x2="390" y2="250"/>
<line x1="390" y1="250" x2="400" y2="250"/>
<line x1="400" y1="250" x2="410" y2="250"/>
<line x1="410" y1="250" x2="420" y2="250"/>
<line x1="420" y1="250" x2="430" y2="250"/>
<line x1="430" y1="250" x2="435" y2="250"/>
<line x1="435" y1="250" x2="435" y2="260"/>
<line x1="575" y1="250" x2="580" y2="250"/>
<line x1="575" y1="250" x2="575" y2="260"/>
<line x1="580" y1="250" x2="590" y2="250"/>
<line x1="590" y1="250" x2="600" y2="250"/>
<line x1="600" y1="250" x2="610" y2="250"/>
<line x1="610" y1="250" x2="620" y2="250"/>
<line x1="620" y1="250" x2="630" y2="250"/>
<text x="635" y="250">↓</text>
<line x1="640" y1="250" x2="650" y2="250"/>
<line x1="650" y1="250" x2="660" y2="250"/>
<line x1="660" y1="250" x2="670" y2="250"/>
<line x1="670" y1="250" x2="680" y2="250"/>
<line x1="680" y1="250" x2="690" y2="250"/>
<line x1="690" y1="250" x2="700" y2="250"/>
<line x1="700" y1="250" x2="705" y2="250"/>
<line x1="705" y1="250" x2="705" y2="260"/>
<line x1="45" y1="260" x2="45" y2="280"/>
<text x="65" y="270">W</text>
<text x="75" y="270">I</text>
<text x="85" y="270">T</text>
<text x="95" y="270">N</text>
<text x="105" y="270">E</text>
<text x="115" y="270">S</text>
<text x="125" y="270">S</text>
<text x="135" y="270">E</text>
<text x="145" y="270">S</text>
<line x1="165" y1="260" x2="165" y2="280"/>
<line x1="305" y1="260" x2="305" y2="280"/>
<text x="325" y="270">W</text>
<text x="335" y="270">I</text>
<text x="345" y="270">T</text>
<text x="355" y="270">N</text>
<text x="365" y="270">E</text>
<text x="375" y="270">S</text>
<text x="385" y="270">S</text>
<text x="395" y="270">E</text>
<text x="405" y="270">S</text>
<line x1="435" y1="260" x2="435" y2="280"/>
<line x1="575" y1="260" x2="575" y2="280"/>
<text x="595" y="270">W</text>
<text x="605" y="270">I</text>
<text x="615" y="270">T</text>
<text x="625" y="270">N</text>
<text x="635" y="270">E</text>
<text x="645" y="270">S</text>
<text x="655" y="270">S</text>
<text x="665" y="270">E</text>
<text x="675" y="270">S</text>
<line x1="705" y1="260" x2="705" y2="280"/>
<line x1="45" y1="280" x2="45" y2="300"/>
<text x="65" y="290">A</text>
<text x="75" y="290">R</text>
<text x="85" y="290">C</text>
<text x="95" y="290">H</text>
<text x="105" y="290">I</text>
<text x="115" y="290">V</text>
<text x="125" y="290">E</text>
<text x="135" y="290">R</text>
<text x="145" y="290">S</text>
<line x1="165" y1="280" x2="165" y2="300"/>
<line x1="305" y1="280" x2="305" y2="300"/>
<text x="325" y="290">A</text>
<text x="335" y="290">R</text>
<text x="345" y="290">C</text>
<text x="355" y="290">H</text>
<text x="365" y="290">I</text>
<text x="375" y="290">V</text>
<text x="385" y="290">E</text>
<text x="395" y="290">R</text>
<text x="405" y="290">S</text>
<line x1="435" y1="280" x2="435" y2="300"/>
<line x1="575" y1="280" x2="575" y2="300"/>
<text x="595" y="290">A</text>
<text x="605" y="290">R</text>
<text x="615" y="290">C</text>
<text x="625" y="290">H</text>
<text x="635" y="290">I</text>
<text x="645" y="290">V</text>
<text x="655" y="290">E</text>
<text x="665" y="290">R</text>
<text x="675" y="290">S</text>
<line x1="705" y1="280" x2="705" y2="300"/>
<line x1="45" y1="300" x2="45" y2="320"/>
<text x="85" y="310">E</text>
<text x="95" y="310">D</text>
<text x="105" y="310">G</text>
<text x="115" y="310">E</text>
<text x="125" y="310">S</text>
<line x1="165" y1="300" x2="165" y2="320"/>
<line x1="305" y1="300" x2="305" y2="320"/>
<text x="345" y="310">E</text>
<text x="355" y="310">D</text>
<text x="365" y="310">G</text>
<text x="375" y="310">E</text>
<text x="385" y="310">S</text>
<line x1="435" y1="300" x2="435" y2="320"/>
<line x1="575" y1="300" x2="575" y2="320"/>
<text x="615" y="310">E</text>
<text x="625" y="310">D</text>
<text x="635" y="310">G</text>
<text x="645" y="310">E</text>
<text x="655" y="310">S</text>
<line x1="705" y1="300" x2="705" y2="320"/>
<line x1="45" y1="330" x2="50" y2="330"/>
<line x1="45" y1="320" x2="45" y2="330"/>
<line x1="50" y1="330" x2="60" y2="330"/>
<line x1="60" y1="330" x2="70" y2="330"/>
<line x1="70" y1="330" x2="80" y2="330"/>
<line x1="80" y1="330" x2="90" y2="330"/>
<line x1="90" y1="330" x2="100" y2="330"/>
<line x1="100" y1="330" x2="110" y2="330"/>
<line x1="110" y1="330" x2="120" y2="330"/>
<line x1="120" y1="330" x2="130" y2="330"/>
<line x1="130" y1="330" x2="140" y2="330"/>
<line x1="140" y1="330" x2="150" y2="330"/>
<line x1="150" y1="330" x2="160" y2="330"/>
<line x1="160" y1="330" x2="165" y2="330"/>
<line x1="165" y1="320" x2="165" y2="330"/>
<line x1="305" y1="330" x2="310" y2="330"/>
<line x1="305" y1="320" x2="305" y2="330"/>
<line x1="310" y1="330" x2="320" y2="330"/>
<line x1="320" y1="330" x2="330" y2="330"/>
<line x1="330" y1="330" x2="340" y2="330"/>
<line x1="340" y1="330" x2="350" y2="330"/>
<line x1="350" y1="330" x2="360" y2="330"/>
<line x1="360" y1="330" x2="370" y2="330"/>
<line x1="370" y1="330" x2="380" y2="330"/>
<line x1="380" y1="330" x2="390" y2="330"/>
<line x1="390" y1="330" x2="400" y2="330"/>
<line x1="400" y1="330" x2="410" y2="330"/>
<line x1="410" y1="330" x2="420" y2="330"/>
<line x1="420" y1="330" x2="430" y2="330"/>
<line x1="430" y1="330" x2="435" y2="330"/>
<line x1="435" y1="320" x2="435" y2="330"/>
<line x1="575" y1="330" x2="580" y2="330"/>
<line x1="575" y1="320" x2="575" y2="330"/>
<line x1="580" y1="330" x2="590" y2="330"/>
<line x1="590" y1="330" x2="600" y2="330"/>
<line x1="600" y1="330" x2="610" y2="330"/>
<line x1="610" y1="330" x2="620" y2="330"/>
<line x1="620" y1="330" x2="630" y2="330"/>
<line x1="630" y1="330" x2="640" y2="330"/>
<line x1="640" y1="330" x2="650" y2="330"/>
<line x1="650" y1="330" x2="660" y2="330"/>
<line x1="660" y1="330" x2="670" y2="330"/>
<line x1="670" y1="330" x2="680" y2="330"/>
<line x1="680" y1="330" x2="690" y2="330"/>
<line x1="690" y1="330" x2="700" y2="330"/>
<line x1="700" y1="330" x2="705" y2="330"/>
<line x1="705" y1="320" x2="705" y2="330"/>
<text x="5" y="350">C</text>
<text x="15" y="350">o</text>
<text x="25" y="350">o</text>
<text x="35" y="350">r</text>
<text x="45" y="350">d</text>
<text x="55" y="350">i</text>
<text x="65" y="350">n</text>
<text x="75" y="350">a</text>
<text x="85" y="350">t</text>
<text x="95" y="350">o</text>
<text x="105" y="350">r</text>
<text x="115" y="350">s</text>
<text x="125" y="350">:</text>
<text x="145" y="350">R</text>
<text x="155" y="350">a</text>
<text x="165" y="350">r</text>
<text x="175" y="350">e</text>
<text x="185" y="350">,</text>
<text x="205" y="350">h</text>
<text x="215" y="350">i</text>
<text x="225" y="350">g</text>
<text x="235" y="350">h</text>
<text x="245" y="350">-</text>
<text x="255" y="350">c</text>
<text x="265" y="350">a</text>
<text x="275" y="350">p</text>
<text x="285" y="350">a</text>
<text x="295" y="350">b</text>
<text x="305" y="350">i</text>
<text x="315" y="350">l</text>
<text x="325" y="350">i</text>
<text x="335" y="350">t</text>
<text x="345" y="350">y</text>
<text x="365" y="350">r</text>
<text x="375" y="350">e</text>
<text x="385" y="350">a</text>
<text x="395" y="350">l</text>
<text x="405" y="350">m</text>
<text x="415" y="350">s</text>
<text x="425" y="350">,</text>
<text x="445" y="350">r</text>
<text x="455" y="350">u</text>
<text x="465" y="350">n</text>
<text x="485" y="350">c</text>
<text x="495" y="350">o</text>
<text x="505" y="350">n</text>
<text x="515" y="350">s</text>
<text x="525" y="350">e</text>
<text x="535" y="350">n</text>
<text x="545" y="350">s</text>
<text x="555" y="350">u</text>
<text x="565" y="350">s</text>
<text x="5" y="370">F</text>
<text x="15" y="370">u</text>
<text x="25" y="370">l</text>
<text x="35" y="370">l</text>
<text x="45" y="370">:</text>
<text x="65" y="370">C</text>
<text x="75" y="370">o</text>
<text x="85" y="370">m</text>
<text x="95" y="370">m</text>
<text x="105" y="370">o</text>
<text x="115" y="370">n</text>
<text x="135" y="370">r</text>
<text x="145" y="370">e</text>
<text x="155" y="370">a</text>
<text x="165" y="370">l</text>
<text x="175" y="370">m</text>
<text x="185" y="370">s</text>
<text x="195" y="370">,</text>
<text x="215" y="370">r</text>
<text x="225" y="370">e</text>
<text x="235" y="370">p</text>
<text x="245" y="370">l</text>
<text x="255" y="370">i</text>
<text x="265" y="370">c</text>
<text x="275" y="370">a</text>
<text x="285" y="370">t</text>
<text x="295" y="370">e</text>
<text x="315" y="370">e</text>
<text x="325" y="370">v</text>
<text x="335" y="370">e</text>
<text x="345" y="370">r</text>
<text x="355" y="370">y</text>
<text x="365" y="370">t</text>
<text x="375" y="370">h</text>
<text x="385" y="370">i</text>
<text x="395" y="370">n</text>
<text x="405" y="370">g</text>
<text x="415" y="370">,</text>
<text x="435" y="370">s</text>
<text x="445" y="370">e</text>
<text x="455" y="370">r</text>
<text x="465" y="370">v</text>
<text x="475" y="370">e</text>
<text x="495" y="370">c</text>
<text x="505" y="370">o</text>
<text x="515" y="370">n</text>
<text x="525" y="370">t</text>
<text x="535" y="370">e</text>
<text x="545" y="370">n</text>
<text x="555" y="370">t</text>
<text x="5" y="390">W</text>
<text x="15" y="390">i</text>
<text x="25" y="390">t</text>
<text x="35" y="390">n</text>
<text x="45" y="390">e</text>
<text x="55" y="390">s</text>
<text x="65" y="390">s</text>
<text x="75" y="390">e</text>
<text x="85" y="390">s</text>
<text x="95" y="390">:</text>
<text x="115" y="390">A</text>
<text x="125" y="390">b</text>
<text x="135" y="390">u</text>
<text x="145" y="390">n</text>
<text x="155" y="390">d</text>
<text x="165" y="390">a</text>
<text x="175" y="390">n</text>
<text x="185" y="390">t</text>
<text x="205" y="390">r</text>
<text x="215" y="390">e</text>
<text x="225" y="390">a</text>
<text x="235" y="390">l</text>
<text x="245" y="390">m</text>
<text x="255" y="390">s</text>
<text x="265" y="390">,</text>
<text x="285" y="390">v</text>
<text x="295" y="390">e</text>
<text x="305" y="390">r</text>
<text x="315" y="390">i</text>
<text x="325" y="390">f</text>
<text x="335" y="390">y</text>
<text x="355" y="390">a</text>
<text x="365" y="390">n</text>
<text x="375" y="390">d</text>
<text x="395" y="390">s</text>
<text x="405" y="390">t</text>
<text x="415" y="390">o</text>
<text x="425" y="390">r</text>
<text x="435" y="390">e</text>
<text x="445" y="390">,</text>
<text x="465" y="390">p</text>
<text x="475" y="390">a</text>
<text x="485" y="390">s</text>
<text x="495" y="390">s</text>
<text x="505" y="390">i</text>
<text x="515" y="390">v</text>
<text x="525" y="390">e</text>
<text x="545" y="390">s</text>
<text x="555" y="390">y</text>
<text x="565" y="390">n</text>
<text x="575" y="390">c</text>
<text x="5" y="410">A</text>
<text x="15" y="410">r</text>
<text x="25" y="410">c</text>
<text x="35" y="410">h</text>
<text x="45" y="410">i</text>
<text x="55" y="410">v</text>
<text x="65" y="410">e</text>
<text x="75" y="410">r</text>
<text x="85" y="410">s</text>
<text x="95" y="410">:</text>
<text x="115" y="410">C</text>
<text x="125" y="410">o</text>
<text x="135" y="410">l</text>
<text x="145" y="410">d</text>
<text x="165" y="410">s</text>
<text x="175" y="410">t</text>
<text x="185" y="410">o</text>
<text x="195" y="410">r</text>
<text x="205" y="410">a</text>
<text x="215" y="410">g</text>
<text x="225" y="410">e</text>
<text x="245" y="410">r</text>
<text x="255" y="410">e</text>
<text x="265" y="410">a</text>
<text x="275" y="410">l</text>
<text x="285" y="410">m</text>
<text x="295" y="410">s</text>
<text x="305" y="410">,</text>
<text x="325" y="410">b</text>
<text x="335" y="410">a</text>
<text x="345" y="410">t</text>
<text x="355" y="410">c</text>
<text x="365" y="410">h</text>
<text x="385" y="410">s</text>
<text x="395" y="410">y</text>
<text x="405" y="410">n</text>
<text x="415" y="410">c</text>
<text x="5" y="430">E</text>
<text x="15" y="430">d</text>
<text x="25" y="430">g</text>
<text x="35" y="430">e</text>
<text x="45" y="430">s</text>
<text x="55" y="430">:</text>
<text x="75" y="430">R</text>
<text x="85" y="430">e</text>
<text x="95" y="430">a</text>
<text x="105" y="430">d</text>
<text x="115" y="430">-</text>
<text x="125" y="430">o</text>
<text x="135" y="430">n</text>
<text x="145" y="430">l</text>
<text x="155" y="430">y</text>
<text x="175" y="430">r</text>
<text x="185" y="430">e</text>
<text x="195" y="430">a</text>
<text x="205" y="430">l</text>
<text x="215" y="430">m</text>
<text x="225" y="430">s</text>
<text x="235" y="430">,</text>
<text x="255" y="430">i</text>
<text x="265" y="430">n</text>
<text x="275" y="430">t</text>
<text x="285" y="430">e</text>
<text x="295" y="430">r</text>
<text x="305" y="430">m</text>
<text x="315" y="430">i</text>
<text x="325" y="430">t</text>
<text x="335" y="430">t</text>
<text x="345" y="430">e</text>
<text x="355" y="430">n</text>
<text x="365" y="430">t</text>
<text x="375" y="430">,</text>
<text x="395" y="430">m</text>
<text x="405" y="430">o</text>
<text x="415" y="430">b</text>
<text x="425" y="430">i</text>
<text x="435" y="430">l</text>
<text x="445" y="430">e</text>
</svg>
</div>
<h3>Partition Tolerance</h3>
<div class="diagram-container">
<svg class="diagram" viewBox="0 0 660 100" width="660" height="100" xmlns="http://www.w3.org/2000/svg">
<style>
  .diagram line { stroke: currentColor; stroke-width: 1.5; stroke-linecap: square; }
  .diagram rect { fill: currentColor; }
  .diagram text { font-family: monospace; font-size: 14px; fill: currentColor; text-anchor: middle; dominant-baseline: central; }
</style>
<text x="5" y="10">N</text>
<text x="15" y="10">e</text>
<text x="25" y="10">t</text>
<text x="35" y="10">w</text>
<text x="45" y="10">o</text>
<text x="55" y="10">r</text>
<text x="65" y="10">k</text>
<text x="85" y="10">s</text>
<text x="95" y="10">p</text>
<text x="105" y="10">l</text>
<text x="115" y="10">i</text>
<text x="125" y="10">t</text>
<text x="135" y="10">s</text>
<text x="155" y="10">→</text>
<text x="175" y="10">c</text>
<text x="185" y="10">l</text>
<text x="195" y="10">u</text>
<text x="205" y="10">s</text>
<text x="215" y="10">t</text>
<text x="225" y="10">e</text>
<text x="235" y="10">r</text>
<text x="245" y="10">s</text>
<text x="265" y="10">d</text>
<text x="275" y="10">i</text>
<text x="285" y="10">v</text>
<text x="295" y="10">e</text>
<text x="305" y="10">r</text>
<text x="315" y="10">g</text>
<text x="325" y="10">e</text>
<text x="345" y="10">→</text>
<text x="365" y="10">c</text>
<text x="375" y="10">l</text>
<text x="385" y="10">u</text>
<text x="395" y="10">s</text>
<text x="405" y="10">t</text>
<text x="415" y="10">e</text>
<text x="425" y="10">r</text>
<text x="435" y="10">s</text>
<text x="455" y="10">c</text>
<text x="465" y="10">o</text>
<text x="475" y="10">n</text>
<text x="485" y="10">v</text>
<text x="495" y="10">e</text>
<text x="505" y="10">r</text>
<text x="515" y="10">g</text>
<text x="525" y="10">e</text>
<text x="545" y="10">o</text>
<text x="555" y="10">n</text>
<text x="575" y="10">r</text>
<text x="585" y="10">e</text>
<text x="595" y="10">c</text>
<text x="605" y="10">o</text>
<text x="615" y="10">n</text>
<text x="625" y="10">n</text>
<text x="635" y="10">e</text>
<text x="645" y="10">c</text>
<text x="655" y="10">t</text>
<text x="5" y="30">N</text>
<text x="15" y="30">o</text>
<text x="35" y="30">d</text>
<text x="45" y="30">a</text>
<text x="55" y="30">t</text>
<text x="65" y="30">a</text>
<text x="85" y="30">l</text>
<text x="95" y="30">o</text>
<text x="105" y="30">s</text>
<text x="115" y="30">s</text>
<text x="135" y="30">(</text>
<text x="145" y="30">c</text>
<text x="155" y="30">o</text>
<text x="165" y="30">n</text>
<text x="175" y="30">t</text>
<text x="185" y="30">e</text>
<text x="195" y="30">n</text>
<text x="205" y="30">t</text>
<text x="215" y="30">-</text>
<text x="225" y="30">a</text>
<text x="235" y="30">d</text>
<text x="245" y="30">d</text>
<text x="255" y="30">r</text>
<text x="265" y="30">e</text>
<text x="275" y="30">s</text>
<text x="285" y="30">s</text>
<text x="295" y="30">e</text>
<text x="305" y="30">d</text>
<text x="315" y="30">)</text>
<text x="5" y="50">N</text>
<text x="15" y="50">o</text>
<text x="35" y="50">c</text>
<text x="45" y="50">o</text>
<text x="55" y="50">n</text>
<text x="65" y="50">f</text>
<text x="75" y="50">l</text>
<text x="85" y="50">i</text>
<text x="95" y="50">c</text>
<text x="105" y="50">t</text>
<text x="115" y="50">s</text>
<text x="135" y="50">(</text>
<text x="145" y="50">i</text>
<text x="155" y="50">m</text>
<text x="165" y="50">m</text>
<text x="175" y="50">u</text>
<text x="185" y="50">t</text>
<text x="195" y="50">a</text>
<text x="205" y="50">b</text>
<text x="215" y="50">l</text>
<text x="225" y="50">e</text>
<text x="245" y="50">o</text>
<text x="255" y="50">b</text>
<text x="265" y="50">j</text>
<text x="275" y="50">e</text>
<text x="285" y="50">c</text>
<text x="295" y="50">t</text>
<text x="305" y="50">s</text>
<text x="315" y="50">)</text>
<text x="5" y="70">A</text>
<text x="15" y="70">u</text>
<text x="25" y="70">d</text>
<text x="35" y="70">i</text>
<text x="45" y="70">t</text>
<text x="65" y="70">t</text>
<text x="75" y="70">r</text>
<text x="85" y="70">a</text>
<text x="95" y="70">i</text>
<text x="105" y="70">l</text>
<text x="115" y="70">s</text>
<text x="135" y="70">m</text>
<text x="145" y="70">e</text>
<text x="155" y="70">r</text>
<text x="165" y="70">g</text>
<text x="175" y="70">e</text>
<text x="195" y="70">(</text>
<text x="205" y="70">u</text>
<text x="215" y="70">n</text>
<text x="225" y="70">i</text>
<text x="235" y="70">o</text>
<text x="245" y="70">n</text>
<text x="265" y="70">o</text>
<text x="275" y="70">f</text>
<text x="295" y="70">e</text>
<text x="305" y="70">n</text>
<text x="315" y="70">t</text>
<text x="325" y="70">r</text>
<text x="335" y="70">i</text>
<text x="345" y="70">e</text>
<text x="355" y="70">s</text>
<text x="365" y="70">,</text>
<text x="385" y="70">L</text>
<text x="395" y="70">a</text>
<text x="405" y="70">m</text>
<text x="415" y="70">p</text>
<text x="425" y="70">o</text>
<text x="435" y="70">r</text>
<text x="445" y="70">t</text>
<text x="465" y="70">o</text>
<text x="475" y="70">r</text>
<text x="485" y="70">d</text>
<text x="495" y="70">e</text>
<text x="505" y="70">r</text>
<text x="515" y="70">i</text>
<text x="525" y="70">n</text>
<text x="535" y="70">g</text>
<text x="545" y="70">)</text>
<text x="5" y="90">M</text>
<text x="15" y="90">a</text>
<text x="25" y="90">n</text>
<text x="35" y="90">i</text>
<text x="45" y="90">f</text>
<text x="55" y="90">e</text>
<text x="65" y="90">s</text>
<text x="75" y="90">t</text>
<text x="85" y="90">s</text>
<text x="105" y="90">r</text>
<text x="115" y="90">e</text>
<text x="125" y="90">s</text>
<text x="135" y="90">o</text>
<text x="145" y="90">l</text>
<text x="155" y="90">v</text>
<text x="165" y="90">e</text>
<text x="185" y="90">(</text>
<text x="195" y="90">L</text>
<text x="205" y="90">W</text>
<text x="215" y="90">W</text>
<text x="235" y="90">o</text>
<text x="245" y="90">r</text>
<text x="265" y="90">u</text>
<text x="275" y="90">n</text>
<text x="285" y="90">i</text>
<text x="295" y="90">o</text>
<text x="305" y="90">n</text>
<text x="325" y="90">b</text>
<text x="335" y="90">a</text>
<text x="345" y="90">s</text>
<text x="355" y="90">e</text>
<text x="365" y="90">d</text>
<text x="385" y="90">o</text>
<text x="395" y="90">n</text>
<text x="415" y="90">t</text>
<text x="425" y="90">y</text>
<text x="435" y="90">p</text>
<text x="445" y="90">e</text>
<text x="455" y="90">)</text>
</svg>
</div>
</section>
<section>
<h2>Git as Export Format</h2>
<h3>The Transition</h3>
<pre>
Phase 1 (Now):      Git is source of truth, vault is cache
Phase 2 (Next):     Vault is source of truth, git is export
Phase 3 (Future):   Git optional, purely for GitHub presence
</pre>
<h3>Export Process</h3>
<pre class="language-scheme">
(git-export
  from: ".vault"
  to: "/tmp/cyberspace-export"
  format: 'git-repo)

;; Creates standard git repo from vault contents
;; For publishing to GitHub, GitLab, etc.
</pre>
<h3>Import Process</h3>
<pre class="language-scheme">
(git-import
  from: "https://github.com/ddp/cyberspace.git"
  to: ".vault")

;; Extracts objects from git, stores in vault
;; Discards git history, keeps content
</pre>
</section>
<section>
<h2>Security at Scale</h2>
<h3>Sybil Resistance</h3>
<p>Problem: Attacker creates many fake nodes to dominate network.</p>
<p>Mitigations: 1. Stake-weighted voting (not proof-of-work, just reputation) 2. Web of trust - new nodes introduced by existing trusted nodes 3. Rate limiting - bound resources per principal 4. Coordinator consensus - Byzantine-resistant core</p>
<h3>Eclipse Attack Resistance</h3>
<p>Problem: Attacker isolates a node by controlling all its peers.</p>
<p>Mitigations: 1. Diverse bootstrap - multiple independent entry points 2. Random peer selection - can't predict who you'll connect to 3. Peer rotation - periodically reconnect to new peers 4. Out-of-band verification - publish peer lists via DNS, blockchain, etc.</p>
<h3>Denial of Service</h3>
<p>Problem: Attacker floods network with junk.</p>
<p>Mitigations: 1. Proof of work on announcements (small, CPU cost) 2. Rate limiting per principal 3. Reputation scoring - misbehaving peers deprioritized 4. Content validation - reject malformed objects immediately</p>
</section>
<section>
<h2>Implementation Phases</h2>
<h3>Phase 1: Native Object Store</h3>
<ul>
<li>Implement .vault/objects/ storage</li>
<li>Soup catalog and query</li>
<li>Keep git for development workflow</li>
</ul>
<h3>Phase 2: Local-First Sync</h3>
<ul>
<li>Direct node-to-node protocol - have?/fetch message types</li>
<li>UDP transport with TCP fallback</li>
</ul>
<h3>Phase 3: Discovery</h3>
<ul>
<li>Gossip peer exchange</li>
<li>Bootstrap nodes</li>
<li>Bloom filters for content location</li>
</ul>
<h3>Phase 4: Scale Testing</h3>
<ul>
<li>100 nodes - 1000 nodes - 10000 nodes</li>
<li>Measure: latency, convergence time, bandwidth</li>
</ul>
<h3>Phase 5: Git Deprecation</h3>
<ul>
<li>Vault as source of truth</li>
<li>Git export for compatibility</li>
<li>Remove git dependency from core operations</li>
</ul>
</section>
<section>
<h2>Metrics and Monitoring</h2>
<pre class="language-scheme">
(node-metrics)
;; Returns:
((objects-stored 150000)
 (objects-size-gb 50)
 (peers-known 500)
 (peers-connected 20)
 (sync-lag-seconds 30)
 (bandwidth-in-mbps 10)
 (bandwidth-out-mbps 5)
 (requests-per-second 100)
 (errors-per-second 0.1))
</pre>
</section>
<section>
<h2>References</h2>
<p>1. Memo-010: Federation Protocol 2. Memo-016: Lazy Clustering 3. Memo-037: Node Roles and Capabilities 4. Maymounkov, P. (2002). Kademlia: A Peer-to-peer Information System 5. Rabin, M. (1981). Fingerprinting by Random Polynomials 6. IPFS Whitepaper (2014) 7. Shapiro, M. (2011). Conflict-Free Replicated Data Types</p>
</section>
<section>
<h2>Changelog</h2>
<ul>
<li>2026-01-07</li>
<li>Initial draft</li>
</ul>
</section>
<script>
function toggleTheme() {
  const html = document.documentElement;
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
}
(function() {
  // Query param override (for REPL: ?theme=dark or ?theme=light)
  const params = new URLSearchParams(window.location.search);
  const param = params.get('theme');
  if (param === 'dark' || param === 'light') {
    document.documentElement.setAttribute('data-theme', param);
    localStorage.setItem('theme', param);
    return;
  }
  // localStorage preference
  const saved = localStorage.getItem('theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
  } else if (window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', 'light');
  }
})();
</script>
</body>
</html>
