<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <title>Memo 0023: Capability Delegation Patterns</title>
  <link rel="icon" id="favicon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27%230f0%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>">
  <script>
(function(){
  var h=new Date().getHours(),c;
  if(h>=4&&h<6)c='%23845EC2';       // brahma muhurta - violet
  else if(h>=6&&h<8)c='%23ffd700';  // dawn - gold
  else if(h>=8&&h<11)c='%2300d4aa'; // morning - teal
  else if(h>=11&&h<14)c='%230f0';   // midday - phosphor
  else if(h>=14&&h<17)c='%2339ff14';// afternoon - neon
  else if(h>=17&&h<19)c='%23ff6600';// sunset - orange
  else if(h>=19&&h<22)c='%23ff3366';// evening - coral
  else c='%2300ffff';               // night - cyan
  document.getElementById('favicon').href='data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27'+c+'%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>';
})();
</script>
  <link rel="stylesheet" href="memo.css">
</head>
<body>
<span class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark">[theme]</span>
<h1>Memo 0023: Capability Delegation Patterns</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>This Memo specifies capability delegation patterns for the Library of Cyberspace: how principals grant, attenuate, and revoke capabilities using SPKI certificates, content-addressed objects, and the soup metadata layer. Capabilities flow through delegation chains with monotonically decreasing authority.</p>
</section>
<section>
<h2>Motivation</h2>
<p>Authorization in distributed systems is hard:</p>
<p>- ACLs don't scale - Central lists become bottlenecks - Identity is fragile - Names change, keys rotate - Ambient authority is dangerous - "Run as root" is not a security model - Revocation is an afterthought - Usually bolted on badly</p>
<p>Simple Distributed Security Infrastructure/Simple Public Key Infrastructure (SDSI/SPKI) solved this decades ago:</p>
<ul>
<li>Capabilities, not identities</li>
<li>What you can do, not who you are</li>
<li>Local names</li>
<li>No global namespace required</li>
<li>Delegation chains</li>
<li>Authority flows from source to delegate</li>
<li>Threshold signatures</li>
<li>M-of-N for critical operations</li>
</ul>
<p>The Library integrates SPKI with content-addressed storage, creating capabilities that are themselves content-addressed and introspectable.</p>
</section>
<section>
<h2>Capability Model</h2>
<h3>Principals</h3>
<p>A principal is anything that can hold authority:</p>
<pre class="language-scheme">
;; Key principal - most common
(make-principal
  (type key)
  (algorithm ed25519)
  (public-key #${...32 bytes...}))

;; Hash principal - content-addressed object
(make-principal
  (type hash)
  (algorithm sha256)
  (digest #${...32 bytes...}))

;; Threshold principal - M-of-N group
(make-principal
  (type threshold)
  (threshold 3)
  (members (key1 key2 key3 key4 key5)))

;; Name principal - local binding
(make-principal
  (type name)
  (issuer parent-key)
  (name "alice"))
</pre>
<h3>Capabilities</h3>
<p>A capability is a transferable right to perform an action:</p>
<pre class="language-scheme">
(capability
  (action read)
  (object (hash sha256 "content-hash...")))

(capability
  (action write)
  (object (tree sha256 "subtree-root...")))

(capability
  (action sign)
  (object (tag "releases/*")))

(capability
  (action delegate)
  (object (capability ...)))  ; Meta-capability
</pre>
<h3>Certificates</h3>
<p>SPKI certificates bind capabilities to principals:</p>
<pre class="language-scheme">
(spki-cert
  (issuer vault-master-key)
  (subject alice-key)
  (capability
    (action read)
    (object (tree sha256 "docs-root...")))
  (validity
    (not-before "2026-01-01")
    (not-after "2027-01-01"))
  (delegation #t))  ; Alice can re-delegate
</pre>
</section>
<section>
<h2>Delegation Chains</h2>
<h3>Chain Structure</h3>
<p>Authority flows through certificate chains:</p>
<div class="diagram-container">
