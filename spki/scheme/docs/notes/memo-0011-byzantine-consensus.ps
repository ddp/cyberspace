%!PS-Adobe-3.0
%%Title: memo-0011-byzantine-consensus
%%Creator: Library of Cyberspace Memo Pipeline
%%Pages: (atend)
%%EndComments

/Courier findfont 10 scalefont setfont
/margin 72 def
/pagewidth 612 def
/pageheight 792 def
/leading 12 def
/topmargin pageheight margin sub def
/bottommargin margin def
/linewidth pagewidth margin 2 mul sub def
/ypos topmargin def
/pagenum 1 def

/newline {
  /ypos ypos leading sub def
  ypos bottommargin lt {
    showpage
    /pagenum pagenum 1 add def
    /ypos topmargin def
  } if
  margin ypos moveto
} def

margin topmargin moveto
(Memo 0011: Byzantine Consensus) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
() show newline
(------------------------------------------------------------------------) show newline
(ABSTRACT) show newline
(------------------------------------------------------------------------) show newline
() show newline
(This Memo specifies Byzantine fault-tolerant consensus for Cyberspace) show newline
(federation, enabling agreement among distributed vaults even when some) show newline
(participants are faulty or malicious. N nodes tolerate up to f failures) show newline
(where N ≥ 3f + 1.) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(MOTIVATION) show newline
(------------------------------------------------------------------------) show newline
() show newline
(Federation \(Memo-010\) assumes honest peers. Reality differs:) show newline
() show newline
(  * Crash failures: Nodes go offline) show newline
(  * Byzantine failures: Nodes lie, equivocate, or attack) show newline
(  * Network partitions: Messages delayed or lost) show newline
(  * Sybil attacks: Fake identities flood the network) show newline
() show newline
(Byzantine consensus provides:) show newline
() show newline
(1. Safety: Honest nodes agree on same value 2. Liveness: System makes) show newline
(progress despite failures 3. Fault tolerance: Survives f failures with) show newline
(3f+1 nodes) show newline
() show newline
(From Lamport, Shostak, and Pease \(1982\):) show newline
() show newline
() show newline
(    "The Byzantine Generals Problem: reaching agreement in the presence of traitors.") show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(SPECIFICATION) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(System Model) show newline
(------------) show newline
() show newline
() show newline
(    Nodes:        N = 3f + 1 \(tolerates f Byzantine faults\)) show newline
(    Network:      Asynchronous with eventual delivery) show newline
(    Cryptography: Ed25519 signatures \(authenticated channels\)) show newline
() show newline
() show newline
(Consensus Properties) show newline
(--------------------) show newline
() show newline
(Agreement: If honest node i decides v, honest node j decides v.) show newline
() show newline
(Validity: If all honest nodes propose v, decision is v.) show newline
() show newline
(Termination: All honest nodes eventually decide.) show newline
() show newline
() show newline
(Protocol: Practical Byzantine Fault Tolerance \(PBFT\)) show newline
(----------------------------------------------------) show newline
() show newline
() show newline
(    Phase 1: PRE-PREPARE) show newline
(      Primary broadcasts ⟨PRE-PREPARE, v, n, sig⟩) show newline
(    Phase 2: PREPARE) show newline
(      On valid PRE-PREPARE, broadcast ⟨PREPARE, v, n, sig⟩) show newline
(      Collect 2f PREPARE messages) show newline
(    Phase 3: COMMIT) show newline
(      On 2f+1 PREPARE, broadcast ⟨COMMIT, v, n, sig⟩) show newline
(      Collect 2f+1 COMMIT messages) show newline
(    Decision:) show newline
(      On 2f+1 COMMIT, decide v) show newline
() show newline
() show newline
(Message Formats) show newline
(---------------) show newline
() show newline
() show newline
(    \(consensus-message) show newline
(      \(type pre-prepare\)) show newline
(      \(view 0\)) show newline
(      \(sequence 42\)) show newline
(      \(value-hash "sha512:..."\)) show newline
(      \(from #${primary-pubkey}\)) show newline
(      \(signature #${ed25519-sig}\)\)) show newline
(    \(consensus-message) show newline
(      \(type prepare\)) show newline
(      \(view 0\)) show newline
(      \(sequence 42\)) show newline
(      \(value-hash "sha512:..."\)) show newline
(      \(from #${replica-pubkey}\)) show newline
(      \(signature #${ed25519-sig}\)\)) show newline
(    \(consensus-message) show newline
(      \(type commit\)) show newline
(      \(view 0\)) show newline
(      \(sequence 42\)) show newline
(      \(from #${replica-pubkey}\)) show newline
(      \(signature #${ed25519-sig}\)\)) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(VIEW CHANGE) show newline
(------------------------------------------------------------------------) show newline
() show newline
(When primary fails or is Byzantine:) show newline
() show newline
() show newline
(    1. Replica timeout on PRE-PREPARE) show newline
(    2. Broadcast ⟨VIEW-CHANGE, v+1, prepared-proofs⟩) show newline
(    3. New primary collects 2f+1 VIEW-CHANGE) show newline
(    4. New primary broadcasts ⟨NEW-VIEW, v+1, proofs⟩) show newline
(    5. Resume protocol in new view) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(APPLICATION TO CYBERSPACE) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(Federation Ordering) show newline
(-------------------) show newline
() show newline
() show newline
(    \(consensus-propose) show newline
(      \(action release-publish\)) show newline
(      \(version "2.0.0"\)) show newline
(      \(proposer #${alice-key}\)\)) show newline
(    ;; After consensus:) show newline
(    \(consensus-decided) show newline
(      \(sequence 42\)) show newline
(      \(action release-publish\)) show newline
(      \(version "2.0.0"\)) show newline
(      \(decided-by \(quorum ...\)\)\)) show newline
() show newline
() show newline
(Threshold Governance Integration) show newline
(--------------------------------) show newline
() show newline
(Combine with Memo-008: - Consensus on what to do - Threshold signatures) show newline
(on authorization) show newline
() show newline
() show newline
(    \(governance-decision) show newline
(      \(consensus-sequence 42\)) show newline
(      \(action deploy-production\)) show newline
(      \(threshold-met 3-of-5\)) show newline
(      \(signers \(alice carol dave\)\)\)) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(OPTIMIZATIONS) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(Speculation) show newline
(-----------) show newline
() show newline
(Execute optimistically before commit:) show newline
() show newline
() show newline
(    Tentative execution after 2f+1 PREPARE) show newline
(    Rollback if COMMIT fails) show newline
() show newline
() show newline
(Batching) show newline
(--------) show newline
() show newline
(Amortize consensus over multiple operations:) show newline
() show newline
() show newline
(    \(consensus-batch) show newline
(      \(sequence 42\)) show newline
(      \(operations) show newline
(        \(release-publish "2.0.0"\)) show newline
(        \(release-publish "2.0.1"\)) show newline
(        \(config-update ...\)\)\)) show newline
() show newline
() show newline
(Fast Path) show newline
(---------) show newline
() show newline
(When all replicas agree initially:) show newline
() show newline
() show newline
(    Skip PREPARE phase) show newline
(    Direct to COMMIT with 3f+1 matching responses) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(SECURITY CONSIDERATIONS) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(Threat Model) show newline
(------------) show newline
() show newline
(Tolerates: - f Byzantine nodes \(arbitrary behavior\) - Network delays and) show newline
(reordering - Message loss \(with retransmission\)) show newline
() show newline
(Requires: - N ≥ 3f + 1 total nodes - Authenticated channels) show newline
(\(signatures\) - Eventual message delivery) show newline
() show newline
() show newline
(Attack Resistance) show newline
(-----------------) show newline
() show newline
() show newline
(  Attack              Mitigation                       ) show newline
(  Equivocation        Signatures prove inconsistency   ) show newline
(  Replay              Sequence numbers, view numbers   ) show newline
(  Denial of service   View change, rate limiting       ) show newline
(  Sybil               SPKI admission control           ) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(COMPLEXITY) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(  Metric                     Value                      ) show newline
(  Message complexity         O\(N²\) per decision        ) show newline
(  Communication rounds       3 \(normal case\)            ) show newline
(  Cryptographic operations   O\(N\) signatures/verifies   ) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(IMPLEMENTATION NOTES) show newline
(------------------------------------------------------------------------) show newline
() show newline
() show newline
(State Machine) show newline
(-------------) show newline
() show newline
() show newline
(    \(define-record-type <pbft-state>) show newline
(      \(make-pbft-state view sequence log prepared committed\)) show newline
(      pbft-state?) show newline
(      \(view pbft-view\)) show newline
(      \(sequence pbft-sequence\)) show newline
(      \(log pbft-log\)              ; sequence > messages) show newline
(      \(prepared pbft-prepared\)    ; sequence > value) show newline
(      \(committed pbft-committed\)\) ; sequence > value) show newline
() show newline
() show newline
(Dependencies) show newline
(------------) show newline
() show newline
(  * crypto-ffi) show newline
(  * Ed25519 signatures - audit) show newline
(  * Decision logging) show newline
(  * Network transport \(TCP, QUIC\)) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(REFERENCES) show newline
(------------------------------------------------------------------------) show newline
() show newline
(1. Lamport, L., Shostak, R., & Pease, M. \(1982\). The Byzantine Generals) show newline
(Problem. 2. Castro, M., & Liskov, B. \(1999\). Practical Byzantine Fault) show newline
(Tolerance. 3. Yin, M., et al. \(2019\). HotStuff: BFT Consensus with) show newline
(Linearity and Responsiveness. 4. Memo-008: Threshold Signature) show newline
(Governance 5. Memo-010: Federation Protocol) show newline
() show newline
() show newline
(------------------------------------------------------------------------) show newline
(CHANGELOG) show newline
(------------------------------------------------------------------------) show newline
() show newline
(  * 2026-01-06) show newline
(  * Initial specification) show newline
() show newline
(------------------------------------------------------------------------) show newline

showpage
%%Trailer
%%Pages: pagenum
%%EOF
