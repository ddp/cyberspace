<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <title>Memo 0028: Garbage Collection</title>
  <link rel="icon" id="favicon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27%230f0%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>">
  <script>
(function(){
  var h=new Date().getHours(),c;
  if(h>=4&&h<6)c='%23845EC2';       // brahma muhurta - violet
  else if(h>=6&&h<8)c='%23ffd700';  // dawn - gold
  else if(h>=8&&h<11)c='%2300d4aa'; // morning - teal
  else if(h>=11&&h<14)c='%230f0';   // midday - phosphor
  else if(h>=14&&h<17)c='%2339ff14';// afternoon - neon
  else if(h>=17&&h<19)c='%23ff6600';// sunset - orange
  else if(h>=19&&h<22)c='%23ff3366';// evening - coral
  else c='%2300ffff';               // night - cyan
  document.getElementById('favicon').href='data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 32 32%27><text x=%2716%27 y=%2725%27 font-family=%27serif%27 font-size=%2728%27 fill=%27'+c+'%27 text-anchor=%27middle%27 font-weight=%27bold%27>λ</text></svg>';
})();
</script>
  <link rel="stylesheet" href="memo.css">
</head>
<body>
<span class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark">[theme]</span>
<h1>Memo 0028: Garbage Collection</h1>
<dl class="metadata">
</dl>
<hr>
<section>
<h2>Abstract</h2>
<p>This Memo specifies garbage collection for the Library of Cyberspace: how vaults identify and reclaim storage from unreferenced objects while preserving pinned content, respecting tombstones, and maintaining audit trails. Content-addressed storage requires careful GC to avoid data loss.</p>
<p>The Library of Cyberspace is an archival system. The default is preservation, not collection. Objects evaporate only with explicit consent.</p>
</section>
<section>
<h2>Philosophy: The Soup Preserves</h2>
<p>The soup is not a runtime heap. It is a library.</p>
<p>In runtime garbage collection, the goal is to reclaim memory quickly. Young objects die young. Old objects survive. Collect aggressively.</p>
<p>In archival garbage collection, the opposite holds:</p>
<ul>
<li>Old objects are precious</li>
<li>They have survived, been referenced, replicated</li>
<li>Young objects are suspect</li>
<li>They may be transient, failed, or temporary</li>
<li>Deletion is violence</li>
<li>Once collected, an object is gone from this vault forever</li>
<li>Preservation is the default</li>
<li>When in doubt, keep it</li>
</ul>
<p>The Library of Alexandria burned once. We will not let it burn again.</p>
</section>
<section>
<h2>Motivation</h2>
<p>Content-addressed storage accumulates objects forever unless actively pruned:</p>
<ul>
<li>Orphaned objects</li>
<li>No longer referenced by any root</li>
<li>Superseded versions</li>
<li>Old versions after updates</li>
<li>Failed uploads</li>
<li>Partial or abandoned writes</li>
<li>Temporary objects</li>
<li>Intermediate computation results</li>
</ul>
<p>But deletion is dangerous:</p>
<ul>
<li>Hash as capability</li>
<li>Someone may hold the hash</li>
<li>Lazy replication</li>
<li>Remote vaults may need it later</li>
<li>Audit requirements</li>
<li>May need historical data</li>
<li>Resurrection</li>
<li>Deleted objects may be re-added</li>
</ul>
<p>GC must be conservative, consensual, and auditable.</p>
<p>The default is: never collect. Collection requires explicit action.</p>
</section>
<section>
<h2>Object Lifecycle</h2>
<h3>States</h3>
<div class="diagram-container">
